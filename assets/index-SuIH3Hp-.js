(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const s of o)if(s.type==="childList")for(const r of s.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&i(r)}).observe(document,{childList:!0,subtree:!0});function n(o){const s={};return o.integrity&&(s.integrity=o.integrity),o.referrerPolicy&&(s.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?s.credentials="include":o.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(o){if(o.ep)return;o.ep=!0;const s=n(o);fetch(o.href,s)}})();const at=!1,dt=(e,t)=>e===t,B=Symbol("solid-proxy"),ut=typeof Proxy=="function",Ee=Symbol("solid-track"),ue={equals:dt};let Xe=Ke;const K=1,fe=2,We={owned:null,cleanups:null,context:null,owner:null};var N=null;let Ce=null,ft=null,L=null,T=null,W=null,ke=0;function oe(e,t){const n=L,i=N,o=e.length===0,s=t===void 0?i:t,r=o?We:{owned:null,cleanups:null,context:s?s.context:null,owner:s},l=o?e:()=>e(()=>D(()=>ie(r)));N=r,L=null;try{return J(l,!0)}finally{L=n,N=i}}function M(e,t){t=t?Object.assign({},ue,t):ue;const n={value:e,observers:null,observerSlots:null,comparator:t.equals||void 0},i=o=>(typeof o=="function"&&(o=o(n.value)),Ge(n,o));return[Ye.bind(n),i]}function E(e,t,n){const i=ze(e,t,!1,K);ae(i)}function te(e,t,n){Xe=xt;const i=ze(e,t,!1,K);(!n||!n.render)&&(i.user=!0),W?W.push(i):ae(i)}function S(e,t,n){n=n?Object.assign({},ue,n):ue;const i=ze(e,t,!0,0);return i.observers=null,i.observerSlots=null,i.comparator=n.equals||void 0,ae(i),Ye.bind(i)}function ht(e){return J(e,!1)}function D(e){if(L===null)return e();const t=L;L=null;try{return e()}finally{L=t}}function gt(e,t,n){const i=Array.isArray(e);let o,s=n&&n.defer;return r=>{let l;if(i){l=Array(e.length);for(let c=0;c<e.length;c++)l[c]=e[c]()}else l=e();if(s)return s=!1,r;const a=D(()=>t(l,o,r));return o=l,a}}function ce(e){te(()=>D(e))}function Y(e){return N===null||(N.cleanups===null?N.cleanups=[e]:N.cleanups.push(e)),e}function Pe(){return L}function vt(){return N}function wt(e,t){const n=N,i=L;N=e,L=null;try{return J(t,!0)}catch(o){Te(o)}finally{N=n,L=i}}const[Zo,qo]=M(!1);function mt(e){const t=S(e),n=S(()=>Le(t()));return n.toArray=()=>{const i=n();return Array.isArray(i)?i:i!=null?[i]:[]},n}function Ye(){if(this.sources&&this.state)if(this.state===K)ae(this);else{const e=T;T=null,J(()=>ge(this),!1),T=e}if(L){const e=this.observers?this.observers.length:0;L.sources?(L.sources.push(this),L.sourceSlots.push(e)):(L.sources=[this],L.sourceSlots=[e]),this.observers?(this.observers.push(L),this.observerSlots.push(L.sources.length-1)):(this.observers=[L],this.observerSlots=[L.sources.length-1])}return this.value}function Ge(e,t,n){let i=e.value;return(!e.comparator||!e.comparator(i,t))&&(e.value=t,e.observers&&e.observers.length&&J(()=>{for(let o=0;o<e.observers.length;o+=1){const s=e.observers[o],r=Ce&&Ce.running;r&&Ce.disposed.has(s),(r?!s.tState:!s.state)&&(s.pure?T.push(s):W.push(s),s.observers&&Ze(s)),r||(s.state=K)}if(T.length>1e6)throw T=[],new Error},!1)),t}function ae(e){if(!e.fn)return;ie(e);const t=ke;yt(e,e.value,t)}function yt(e,t,n){let i;const o=N,s=L;L=N=e;try{i=e.fn(t)}catch(r){return e.pure&&(e.state=K,e.owned&&e.owned.forEach(ie),e.owned=null),e.updatedAt=n+1,Te(r)}finally{L=s,N=o}(!e.updatedAt||e.updatedAt<=n)&&(e.updatedAt!=null&&"observers"in e?Ge(e,i):e.value=i,e.updatedAt=n)}function ze(e,t,n,i=K,o){const s={fn:e,state:i,updatedAt:null,owned:null,sources:null,sourceSlots:null,cleanups:null,value:t,owner:N,context:N?N.context:null,pure:n};return N===null||N!==We&&(N.owned?N.owned.push(s):N.owned=[s]),s}function he(e){if(e.state===0)return;if(e.state===fe)return ge(e);if(e.suspense&&D(e.suspense.inFallback))return e.suspense.effects.push(e);const t=[e];for(;(e=e.owner)&&(!e.updatedAt||e.updatedAt<ke);)e.state&&t.push(e);for(let n=t.length-1;n>=0;n--)if(e=t[n],e.state===K)ae(e);else if(e.state===fe){const i=T;T=null,J(()=>ge(e,t[0]),!1),T=i}}function J(e,t){if(T)return e();let n=!1;t||(T=[]),W?n=!0:W=[],ke++;try{const i=e();return bt(n),i}catch(i){n||(W=null),T=null,Te(i)}}function bt(e){if(T&&(Ke(T),T=null),e)return;const t=W;W=null,t.length&&J(()=>Xe(t),!1)}function Ke(e){for(let t=0;t<e.length;t++)he(e[t])}function xt(e){let t,n=0;for(t=0;t<e.length;t++){const i=e[t];i.user?e[n++]=i:he(i)}for(t=0;t<n;t++)he(e[t])}function ge(e,t){e.state=0;for(let n=0;n<e.sources.length;n+=1){const i=e.sources[n];if(i.sources){const o=i.state;o===K?i!==t&&(!i.updatedAt||i.updatedAt<ke)&&he(i):o===fe&&ge(i,t)}}}function Ze(e){for(let t=0;t<e.observers.length;t+=1){const n=e.observers[t];n.state||(n.state=fe,n.pure?T.push(n):W.push(n),n.observers&&Ze(n))}}function ie(e){let t;if(e.sources)for(;e.sources.length;){const n=e.sources.pop(),i=e.sourceSlots.pop(),o=n.observers;if(o&&o.length){const s=o.pop(),r=n.observerSlots.pop();i<o.length&&(s.sourceSlots[r]=i,o[i]=s,n.observerSlots[i]=r)}}if(e.tOwned){for(t=e.tOwned.length-1;t>=0;t--)ie(e.tOwned[t]);delete e.tOwned}if(e.owned){for(t=e.owned.length-1;t>=0;t--)ie(e.owned[t]);e.owned=null}if(e.cleanups){for(t=e.cleanups.length-1;t>=0;t--)e.cleanups[t]();e.cleanups=null}e.state=0}function kt(e){return e instanceof Error?e:new Error(typeof e=="string"?e:"Unknown error",{cause:e})}function Te(e,t=N){throw kt(e)}function Le(e){if(typeof e=="function"&&!e.length)return Le(e());if(Array.isArray(e)){const t=[];for(let n=0;n<e.length;n++){const i=Le(e[n]);Array.isArray(i)?t.push.apply(t,i):t.push(i)}return t}return e}const pt=Symbol("fallback");function Ie(e){for(let t=0;t<e.length;t++)e[t]()}function $t(e,t,n={}){let i=[],o=[],s=[],r=0,l=t.length>1?[]:null;return Y(()=>Ie(s)),()=>{let a=e()||[],c=a.length,d,f;return a[Ee],D(()=>{let u,w,v,y,$,g,b,x,k;if(c===0)r!==0&&(Ie(s),s=[],i=[],o=[],r=0,l&&(l=[])),n.fallback&&(i=[pt],o[0]=oe(A=>(s[0]=A,n.fallback())),r=1);else if(r===0){for(o=new Array(c),f=0;f<c;f++)i[f]=a[f],o[f]=oe(h);r=c}else{for(v=new Array(c),y=new Array(c),l&&($=new Array(c)),g=0,b=Math.min(r,c);g<b&&i[g]===a[g];g++);for(b=r-1,x=c-1;b>=g&&x>=g&&i[b]===a[x];b--,x--)v[x]=o[b],y[x]=s[b],l&&($[x]=l[b]);for(u=new Map,w=new Array(x+1),f=x;f>=g;f--)k=a[f],d=u.get(k),w[f]=d===void 0?-1:d,u.set(k,f);for(d=g;d<=b;d++)k=i[d],f=u.get(k),f!==void 0&&f!==-1?(v[f]=o[d],y[f]=s[d],l&&($[f]=l[d]),f=w[f],u.set(k,f)):s[d]();for(f=g;f<c;f++)f in v?(o[f]=v[f],s[f]=y[f],l&&(l[f]=$[f],l[f](f))):o[f]=oe(h);o=o.slice(0,r=c),i=a.slice(0)}return o});function h(u){if(s[f]=u,l){const[w,v]=M(f);return l[f]=v,t(a[f],w)}return t(a[f])}}}function m(e,t){return D(()=>e(t||{}))}function de(){return!0}const Re={get(e,t,n){return t===B?n:e.get(t)},has(e,t){return t===B?!0:e.has(t)},set:de,deleteProperty:de,getOwnPropertyDescriptor(e,t){return{configurable:!0,enumerable:!0,get(){return e.get(t)},set:de,deleteProperty:de}},ownKeys(e){return e.keys()}};function qe(e,...t){const n=t.length;if(ut&&B in e){const o=n>1?t.flat():t[0],s=t.map(r=>new Proxy({get(l){return r.includes(l)?e[l]:void 0},has(l){return r.includes(l)&&l in e},keys(){return r.filter(l=>l in e)}},Re));return s.push(new Proxy({get(r){return o.includes(r)?void 0:e[r]},has(r){return o.includes(r)?!1:r in e},keys(){return Object.keys(e).filter(r=>!o.includes(r))}},Re)),s}const i=[];for(let o=0;o<=n;o++)i[o]={};for(const o of Object.getOwnPropertyNames(e)){let s=n;for(let a=0;a<t.length;a++)if(t[a].includes(o)){s=a;break}const r=Object.getOwnPropertyDescriptor(e,o);!r.get&&!r.set&&r.enumerable&&r.writable&&r.configurable?i[s][o]=r.value:Object.defineProperty(i[s],o,r)}return i}const Je=e=>`Stale read from <${e}>.`;function j(e){const t="fallback"in e&&{fallback:()=>e.fallback};return S($t(()=>e.each,e.children,t||void 0))}function I(e){const t=e.keyed,n=S(()=>e.when,void 0,void 0),i=t?n:S(n,void 0,{equals:(o,s)=>!o==!s});return S(()=>{const o=i();if(o){const s=e.children;return typeof s=="function"&&s.length>0?D(()=>s(t?o:()=>{if(!D(i))throw Je("Show");return n()})):s}return e.fallback},void 0,void 0)}function De(e){const t=mt(()=>e.children),n=S(()=>{const i=t(),o=Array.isArray(i)?i:[i];let s=()=>{};for(let r=0;r<o.length;r++){const l=r,a=o[r],c=s,d=S(()=>c()?void 0:a.when,void 0,void 0),f=a.keyed?d:S(d,void 0,{equals:(h,u)=>!h==!u});s=()=>c()||(f()?[l,d,a]:void 0)}return s});return S(()=>{const i=n()();if(!i)return e.fallback;const[o,s,r]=i,l=r.children;return typeof l=="function"&&l.length>0?D(()=>l(r.keyed?s():()=>{if(D(n)()?.[0]!==o)throw Je("Match");return s()})):l},void 0,void 0)}function re(e){return e}const Ct=["allowfullscreen","async","alpha","autofocus","autoplay","checked","controls","default","disabled","formnovalidate","hidden","indeterminate","inert","ismap","loop","multiple","muted","nomodule","novalidate","open","playsinline","readonly","required","reversed","seamless","selected","adauctionheaders","browsingtopics","credentialless","defaultchecked","defaultmuted","defaultselected","defer","disablepictureinpicture","disableremoteplayback","preservespitch","shadowrootclonable","shadowrootcustomelementregistry","shadowrootdelegatesfocus","shadowrootserializable","sharedstoragewritable"],St=new Set(["className","value","readOnly","noValidate","formNoValidate","isMap","noModule","playsInline","adAuctionHeaders","allowFullscreen","browsingTopics","defaultChecked","defaultMuted","defaultSelected","disablePictureInPicture","disableRemotePlayback","preservesPitch","shadowRootClonable","shadowRootCustomElementRegistry","shadowRootDelegatesFocus","shadowRootSerializable","sharedStorageWritable",...Ct]),Et=new Set(["innerHTML","textContent","innerText","children"]),Pt=Object.assign(Object.create(null),{className:"class",htmlFor:"for"}),Lt=Object.assign(Object.create(null),{class:"className",novalidate:{$:"noValidate",FORM:1},formnovalidate:{$:"formNoValidate",BUTTON:1,INPUT:1},ismap:{$:"isMap",IMG:1},nomodule:{$:"noModule",SCRIPT:1},playsinline:{$:"playsInline",VIDEO:1},readonly:{$:"readOnly",INPUT:1,TEXTAREA:1},adauctionheaders:{$:"adAuctionHeaders",IFRAME:1},allowfullscreen:{$:"allowFullscreen",IFRAME:1},browsingtopics:{$:"browsingTopics",IMG:1},defaultchecked:{$:"defaultChecked",INPUT:1},defaultmuted:{$:"defaultMuted",AUDIO:1,VIDEO:1},defaultselected:{$:"defaultSelected",OPTION:1},disablepictureinpicture:{$:"disablePictureInPicture",VIDEO:1},disableremoteplayback:{$:"disableRemotePlayback",AUDIO:1,VIDEO:1},preservespitch:{$:"preservesPitch",AUDIO:1,VIDEO:1},shadowrootclonable:{$:"shadowRootClonable",TEMPLATE:1},shadowrootdelegatesfocus:{$:"shadowRootDelegatesFocus",TEMPLATE:1},shadowrootserializable:{$:"shadowRootSerializable",TEMPLATE:1},sharedstoragewritable:{$:"sharedStorageWritable",IFRAME:1,IMG:1}});function Nt(e,t){const n=Lt[e];return typeof n=="object"?n[t]?n.$:void 0:n}const At=new Set(["beforeinput","click","dblclick","contextmenu","focusin","focusout","input","keydown","keyup","mousedown","mousemove","mouseout","mouseover","mouseup","pointerdown","pointermove","pointerout","pointerover","pointerup","touchend","touchmove","touchstart"]),Mt=new Set(["altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignObject","g","glyph","glyphRef","hkern","image","line","linearGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","set","stop","svg","switch","symbol","text","textPath","tref","tspan","use","view","vkern"]),_t={xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace"},V=e=>S(()=>e());function zt(e,t,n){let i=n.length,o=t.length,s=i,r=0,l=0,a=t[o-1].nextSibling,c=null;for(;r<o||l<s;){if(t[r]===n[l]){r++,l++;continue}for(;t[o-1]===n[s-1];)o--,s--;if(o===r){const d=s<i?l?n[l-1].nextSibling:n[s-l]:a;for(;l<s;)e.insertBefore(n[l++],d)}else if(s===l)for(;r<o;)(!c||!c.has(t[r]))&&t[r].remove(),r++;else if(t[r]===n[s-1]&&n[l]===t[o-1]){const d=t[--o].nextSibling;e.insertBefore(n[l++],t[r++].nextSibling),e.insertBefore(n[--s],d),t[o]=n[s]}else{if(!c){c=new Map;let f=l;for(;f<s;)c.set(n[f],f++)}const d=c.get(t[r]);if(d!=null)if(l<d&&d<s){let f=r,h=1,u;for(;++f<o&&f<s&&!((u=c.get(t[f]))==null||u!==d+h);)h++;if(h>d-l){const w=t[r];for(;l<d;)e.insertBefore(n[l++],w)}else e.replaceChild(n[l++],t[r++])}else r++;else t[r++].remove()}}}const He="_$DX_DELEGATE";function Tt(e,t,n,i={}){let o;return oe(s=>{o=s,t===document?e():p(t,e(),t.firstChild?null:void 0,n)},i.owner),()=>{o(),t.textContent=""}}function C(e,t,n,i){let o;const s=()=>{const l=i?document.createElementNS("http://www.w3.org/1998/Math/MathML","template"):document.createElement("template");return l.innerHTML=e,n?l.content.firstChild.firstChild:i?l.firstChild:l.content.firstChild},r=t?()=>D(()=>document.importNode(o||(o=s()),!0)):()=>(o||(o=s())).cloneNode(!0);return r.cloneNode=r,r}function H(e,t=window.document){const n=t[He]||(t[He]=new Set);for(let i=0,o=e.length;i<o;i++){const s=e[i];n.has(s)||(n.add(s),t.addEventListener(s,jt))}}function P(e,t,n){n==null?e.removeAttribute(t):e.setAttribute(t,n)}function Dt(e,t,n,i){i==null?e.removeAttributeNS(t,n):e.setAttributeNS(t,n,i)}function Ot(e,t,n){n?e.setAttribute(t,""):e.removeAttribute(t)}function Qe(e,t){t==null?e.removeAttribute("class"):e.className=t}function R(e,t,n,i){if(i)Array.isArray(n)?(e[`$$${t}`]=n[0],e[`$$${t}Data`]=n[1]):e[`$$${t}`]=n;else if(Array.isArray(n)){const o=n[0];e.addEventListener(t,n[0]=s=>o.call(e,n[1],s))}else e.addEventListener(t,n,typeof n!="function"&&n)}function It(e,t,n={}){const i=Object.keys(t||{}),o=Object.keys(n);let s,r;for(s=0,r=o.length;s<r;s++){const l=o[s];!l||l==="undefined"||t[l]||(Ve(e,l,!1),delete n[l])}for(s=0,r=i.length;s<r;s++){const l=i[s],a=!!t[l];!l||l==="undefined"||n[l]===a||!a||(Ve(e,l,!0),n[l]=a)}return n}function pe(e,t,n){if(!t)return n?P(e,"style"):t;const i=e.style;if(typeof t=="string")return i.cssText=t;typeof n=="string"&&(i.cssText=n=void 0),n||(n={}),t||(t={});let o,s;for(s in n)t[s]==null&&i.removeProperty(s),delete n[s];for(s in t)o=t[s],o!==n[s]&&(i.setProperty(s,o),n[s]=o);return n}function z(e,t,n){n!=null?e.style.setProperty(t,n):e.style.removeProperty(t)}function Rt(e,t={},n,i){const o={};return E(()=>o.children=se(e,t.children,o.children)),E(()=>typeof t.ref=="function"&&q(t.ref,e)),E(()=>Ht(e,t,n,!0,o,!0)),o}function q(e,t,n){return D(()=>e(t,n))}function p(e,t,n,i){if(n!==void 0&&!i&&(i=[]),typeof t!="function")return se(e,t,i,n);E(o=>se(e,t(),o,n),i)}function Ht(e,t,n,i,o={},s=!1){t||(t={});for(const r in o)if(!(r in t)){if(r==="children")continue;o[r]=je(e,r,null,o[r],n,s,t)}for(const r in t){if(r==="children")continue;const l=t[r];o[r]=je(e,r,l,o[r],n,s,t)}}function Vt(e){return e.toLowerCase().replace(/-([a-z])/g,(t,n)=>n.toUpperCase())}function Ve(e,t,n){const i=t.trim().split(/\s+/);for(let o=0,s=i.length;o<s;o++)e.classList.toggle(i[o],n)}function je(e,t,n,i,o,s,r){let l,a,c,d,f;if(t==="style")return pe(e,n,i);if(t==="classList")return It(e,n,i);if(n===i)return i;if(t==="ref")s||n(e);else if(t.slice(0,3)==="on:"){const h=t.slice(3);i&&e.removeEventListener(h,i,typeof i!="function"&&i),n&&e.addEventListener(h,n,typeof n!="function"&&n)}else if(t.slice(0,10)==="oncapture:"){const h=t.slice(10);i&&e.removeEventListener(h,i,!0),n&&e.addEventListener(h,n,!0)}else if(t.slice(0,2)==="on"){const h=t.slice(2).toLowerCase(),u=At.has(h);if(!u&&i){const w=Array.isArray(i)?i[0]:i;e.removeEventListener(h,w)}(u||n)&&(R(e,h,n,u),u&&H([h]))}else if(t.slice(0,5)==="attr:")P(e,t.slice(5),n);else if(t.slice(0,5)==="bool:")Ot(e,t.slice(5),n);else if((f=t.slice(0,5)==="prop:")||(c=Et.has(t))||!o&&((d=Nt(t,e.tagName))||(a=St.has(t)))||(l=e.nodeName.includes("-")||"is"in r))f&&(t=t.slice(5),a=!0),t==="class"||t==="className"?Qe(e,n):l&&!a&&!c?e[Vt(t)]=n:e[d||t]=n;else{const h=o&&t.indexOf(":")>-1&&_t[t.split(":")[0]];h?Dt(e,h,t,n):P(e,Pt[t]||t,n)}return n}function jt(e){let t=e.target;const n=`$$${e.type}`,i=e.target,o=e.currentTarget,s=a=>Object.defineProperty(e,"target",{configurable:!0,value:a}),r=()=>{const a=t[n];if(a&&!t.disabled){const c=t[`${n}Data`];if(c!==void 0?a.call(t,c,e):a.call(t,e),e.cancelBubble)return}return t.host&&typeof t.host!="string"&&!t.host._$host&&t.contains(e.target)&&s(t.host),!0},l=()=>{for(;r()&&(t=t._$host||t.parentNode||t.host););};if(Object.defineProperty(e,"currentTarget",{configurable:!0,get(){return t||document}}),e.composedPath){const a=e.composedPath();s(a[0]);for(let c=0;c<a.length-2&&(t=a[c],!!r());c++){if(t._$host){t=t._$host,l();break}if(t.parentNode===o)break}}else l();s(i)}function se(e,t,n,i,o){for(;typeof n=="function";)n=n();if(t===n)return n;const s=typeof t,r=i!==void 0;if(e=r&&n[0]&&n[0].parentNode||e,s==="string"||s==="number"){if(s==="number"&&(t=t.toString(),t===n))return n;if(r){let l=n[0];l&&l.nodeType===3?l.data!==t&&(l.data=t):l=document.createTextNode(t),n=Q(e,n,i,l)}else n!==""&&typeof n=="string"?n=e.firstChild.data=t:n=e.textContent=t}else if(t==null||s==="boolean")n=Q(e,n,i);else{if(s==="function")return E(()=>{let l=t();for(;typeof l=="function";)l=l();n=se(e,l,n,i)}),()=>n;if(Array.isArray(t)){const l=[],a=n&&Array.isArray(n);if(Ne(l,t,n,o))return E(()=>n=se(e,l,n,i,!0)),()=>n;if(l.length===0){if(n=Q(e,n,i),r)return n}else a?n.length===0?Be(e,l,i):zt(e,n,l):(n&&Q(e),Be(e,l));n=l}else if(t.nodeType){if(Array.isArray(n)){if(r)return n=Q(e,n,i,t);Q(e,n,null,t)}else n==null||n===""||!e.firstChild?e.appendChild(t):e.replaceChild(t,e.firstChild);n=t}}return n}function Ne(e,t,n,i){let o=!1;for(let s=0,r=t.length;s<r;s++){let l=t[s],a=n&&n[e.length],c;if(!(l==null||l===!0||l===!1))if((c=typeof l)=="object"&&l.nodeType)e.push(l);else if(Array.isArray(l))o=Ne(e,l,a)||o;else if(c==="function")if(i){for(;typeof l=="function";)l=l();o=Ne(e,Array.isArray(l)?l:[l],Array.isArray(a)?a:[a])||o}else e.push(l),o=!0;else{const d=String(l);a&&a.nodeType===3&&a.data===d?e.push(a):e.push(document.createTextNode(d))}}return o}function Be(e,t,n=null){for(let i=0,o=t.length;i<o;i++)e.insertBefore(t[i],n)}function Q(e,t,n,i){if(n===void 0)return e.textContent="";const o=i||document.createTextNode("");if(t.length){let s=!1;for(let r=t.length-1;r>=0;r--){const l=t[r];if(o!==l){const a=l.parentNode===e;!s&&!r?a?e.replaceChild(o,l):e.insertBefore(o,n):a&&l.remove()}else s=!0}}else e.insertBefore(o,n);return[o]}const Bt="http://www.w3.org/2000/svg";function et(e,t=!1,n=void 0){return t?document.createElementNS(Bt,e):document.createElement(e,{is:n})}function Ft(e){const{useShadow:t}=e,n=document.createTextNode(""),i=()=>e.mount||document.body,o=vt();let s;return te(()=>{s||(s=wt(o,()=>S(()=>e.children)));const r=i();if(r instanceof HTMLHeadElement){const[l,a]=M(!1),c=()=>a(!0);oe(d=>p(r,()=>l()?d():s(),null)),Y(c)}else{const l=et(e.isSVG?"g":"div",e.isSVG),a=t&&l.attachShadow?l.attachShadow({mode:"open"}):l;Object.defineProperty(l,"_$host",{get(){return n.parentNode},configurable:!0}),p(a,s),r.appendChild(l),e.ref&&e.ref(l),Y(()=>r.removeChild(l))}},void 0,{render:!0}),n}function Ut(e,t){const n=S(e);return S(()=>{const i=n();switch(typeof i){case"function":return D(()=>i(t));case"string":const o=Mt.has(i),s=et(i,o,D(()=>t.is));return Rt(s,t,o),s}})}function Ae(e){const[,t]=qe(e,["component"]);return Ut(()=>e.component,t)}const F=e=>t=>{const{helper:n,state:i,logic:o,view:s}=e.create(t);return s(i,o,t,n)},Xt=["disableZoom","minZoom","maxZoom","disableNodeDrag","disableEdgeDrag","gridSize","minNodeWidth","maxNodeWidth","minNodeHeight","maxNodeHeight","defaultNode","disableNodeAnchors","disableAnchorConnectionCreation","disableKeyboardShortcuts","disableHorizontalPan","disableVerticalPan","filterNodes","filterConnections"];function Wt(){const[e,t]=M({nodes:[],connections:[]});return{getConnections:()=>e().connections,getNodes:()=>e().nodes,get:e,set:t,getMerged:()=>[...e().nodes,...e().connections],setConnections:f=>t({...e(),connections:f}),setNodes:f=>t({...e(),nodes:f}),addItem:(f,h)=>{t(h==="node"?u=>({...u,nodes:[...u.nodes,f]}):u=>({...u,connections:[...u.connections,f]}))},removeItem:(f,h)=>{t(h==="node"?u=>({...u,nodes:u.nodes.filter(w=>w!==f)}):u=>({...u,connections:u.connections.filter(w=>w!==f)}))},length:()=>e().nodes.length+e().connections.length,clear:()=>t({nodes:[],connections:[]})}}function Fe(e){const t=new Set;function n(...i){D(()=>{const o=i[0],s=e.store;if(typeof o=="number"||Array.isArray(o)){const r=typeof o=="number"?o:o[0],l=s[r]?.id;l&&t.add(l),e.setStore(...i)}else if(typeof o=="function"){const r=new Set(s.map(a=>a.id));e.setStore(...i);const l=new Set(e.store.map(a=>a.id));for(const a of l)r.has(a)||t.add(a);for(const a of r)l.has(a)||t.add(a)}else if(o===void 0){const r=i[0],l=new Set(s.map(c=>c.id)),a=new Set(r.map(c=>c.id));for(const c of a)l.has(c)||t.add(c);for(const c of l)a.has(c)||t.add(c);e.setStore(...i)}})}return[t,n]}const Yt=e=>{const[t,n]=e.nodesStore,[i,o]=Fe({store:t,setStore:n}),[s,r]=e.connectionsStore,[l,a]=Fe({store:s,setStore:r}),[c,d]=e.viewportSignal,[f,h]=M(!1),u=Wt(),[w,v]=M(null),y=()=>e.onViewportChange?.(c()),$=k=>k+"-"+Math.random().toString(36).substring(2,10),g=k=>{e.onNodesChange([...i]),i.clear()},b=k=>{e.onConnectionsChange([...l]),l.clear()},[x]=qe(e,Xt);return{nodes:t,setNodes:o,connections:s,setConnections:a,viewport:c,setViewport:d,focus:f,setFocus:h,selection:u,activeConnectionDestination:w,setActiveConnectionDestination:v,activeConnection:{},container:null,updateNodes:g,updateConnections:b,updateViewport:y,randomId:$,configs:x}},Gt=(e,t)=>{let n;const i=Yt(e),o=()=>{const a=e.children;return typeof a=="function"?a(i):a},s=S(()=>i.viewport()),r=S(()=>e.filterNodes?i.nodes.filter(e.filterNodes):i.nodes),l=S(()=>e.filterConnections?i.connections.filter(e.filterConnections):i.connections);return{kit:i,containerRef:n,Children:o,vp:s,filteredConnections:l,filteredNodes:r}},Me=(e,t)=>Math.round(e/t)*t,ve=(e,t,n,i)=>i?{x:(e-i.left-n.x)/n.zoom,y:(t-i.top-n.y)/n.zoom}:null,we=(e,t,n,i)=>{const o=(e-t)/n;return i?Me(o,i):o},tt=()=>{document.documentElement.style.userSelect="none"},nt=()=>{document.documentElement.style.userSelect="auto"},Oe=e=>{let t=!1,n,i=null,o=null,s=null;const r=c=>{!t||n===void 0||c.pointerId!==i||(e.preventDefault&&c.preventDefault(),e.onMove(c,n))},l=c=>{!t||c.pointerId!==i||(t=!1,e.preventDefault&&c.preventDefault(),e.onEnd&&n!==void 0&&e.onEnd(c,n),e.disableSelection&&nt(),s?.abort(),s=null,o&&o.hasPointerCapture(c.pointerId)&&o.releasePointerCapture(c.pointerId),i=null,o=null)};return{onPointerDown:c=>{if(t)return;const d=e.onStart?.(c);if(d===void 0)return;e.stopPropagation&&c.stopPropagation(),e.preventDefault&&c.preventDefault(),t=!0,n=d,i=c.pointerId,e.disableSelection&&tt(),s=new AbortController;const f=c.currentTarget;f&&f.setPointerCapture&&(f.setPointerCapture(c.pointerId),o=f),window.addEventListener("pointermove",r,{signal:s.signal}),window.addEventListener("pointerup",l,{signal:s.signal}),window.addEventListener("pointercancel",l,{signal:s.signal})}}};function Se(e,t,n,i){te(()=>{const o=e();o&&(t()?o.addEventListener(n,i):o.removeEventListener(n,i))})}const Kt=(e,t,n)=>{let i={x:0,y:0,zoom:1};const o=new Map;let s=0;const r=u=>{if(!e.kit.focus()&&!u.target.closest(".node")){if(o.set(u.pointerId,{x:u.clientX,y:u.clientY}),o.size===1&&(i=e.kit.viewport()),o.size===2){const[w,v]=Array.from(o.values());w&&v&&(s=Math.hypot(w.x-v.x,w.y-v.y))}window.addEventListener("pointermove",l),window.addEventListener("pointerup",a),window.addEventListener("pointercancel",a)}},l=u=>{if(!o.has(u.pointerId)||t.disableHorizontalPan&&t.disableVerticalPan)return;const w=o.get(u.pointerId);if(w){if(o.set(u.pointerId,{x:u.clientX,y:u.clientY}),o.size===2&&s>0){u.preventDefault();const[v,y]=Array.from(o.values());if(!v||!y)return;const g=Math.hypot(v.x-y.x,v.y-y.y)/s,b=Math.max(.1,Math.min(5,i.zoom*g)),x=(v.x+y.x)/2,k=(v.y+y.y)/2,A=e.containerRef?.getBoundingClientRect();if(!A)return;const _=x-A.left,O=k-A.top,U=_-(_-i.x)*(b/i.zoom),Z=O-(O-i.y)*(b/i.zoom);e.kit.setViewport({zoom:b,x:U,y:Z})}else if(o.size===1){const v=t.disableHorizontalPan?0:u.clientX-w.x,y=t.disableVerticalPan?0:u.clientY-w.y,$=e.kit.viewport();e.kit.setViewport({...$,x:$.x+v,y:$.y+y})}}},a=u=>{o.delete(u.pointerId),o.size===0&&(i!==e.kit.viewport()&&e.kit.updateViewport(),window.removeEventListener("pointermove",l),window.removeEventListener("pointerup",a),window.removeEventListener("pointercancel",a),s=0)},c=u=>{if(e.kit.focus())return;u.preventDefault();const w=u.currentTarget.getBoundingClientRect(),v=u.clientX-w.left,y=u.clientY-w.top,$=e.kit.viewport(),g=$.zoom,b=Math.max(t.maxZoom??.1,Math.min(t.minZoom??5,g-u.deltaY*.001)),x=(v-$.x)/g,k=(y-$.y)/g,A=v-x*b,_=y-k*b;e.kit.setViewport({zoom:b,x:A,y:_})},d=()=>{i!==e.kit.viewport()&&(e.kit.updateViewport(),i=e.kit.viewport())},f=()=>{e.containerRef&&(e.kit.container=e.containerRef)},h=u=>{const w=e.kit.selection;if(u.key==="Delete"&&w.length()>0){const v=w.getConnections(),y=w.getNodes();e.kit.setConnections($=>$.filter(g=>!v.includes(g.id)&&!y.includes(g.from.id)&&!y.includes(g.to.id))),e.kit.setNodes($=>$.filter(g=>!y.includes(g.id))),v.length>0&&e.kit.updateConnections(),y.length>0&&e.kit.updateNodes(),w.clear()}};return Se(()=>e.containerRef,()=>!t.disableZoom,"wheel",c),Se(()=>window,()=>!t.disableZoom,"scrollend",d),Se(()=>e.containerRef,()=>!t.disableKeyboardShortcuts,"keydown",h),ce(()=>{f()}),Y(()=>{window.removeEventListener("scrollend",d),window.removeEventListener("pointermove",l),window.removeEventListener("pointerup",a),window.removeEventListener("pointercancel",a)}),{onPointerDown:r}};function ot({start:e,startPos:t,end:n,endPos:i,curve:o=9}){const s=f=>f>0?.5*f:f===0?o*5:o*Math.sqrt(-f),r=(f,h,u)=>f==="left"?[h.x-s(h.x-u.x),h.y]:f==="right"?[h.x+s(u.x-h.x),h.y]:f==="top"?[h.x,h.y-s(h.y-u.y)]:[h.x,h.y+s(u.y-h.y)],[l,a]=r(t,e,n),[c,d]=r(i,n,e);return`M${e.x},${e.y} C${l},${a} ${c},${d} ${n.x},${n.y}`}const Zt=(e,t)=>{let n,i;const o=S(()=>e.kit.selection.getConnections().includes(e.connection.id)),s=S(()=>{const{from:a,to:c}=e.connection,d=t?.getNodeRect(a.id),f=t?.getNodeRect(c.id),h=(u,w)=>{switch(w){case"top":return{x:u.x+u.width/2,y:u.y};case"bottom":return{x:u.x+u.width/2,y:u.y+u.height};case"left":return{x:u.x,y:u.y+u.height/2};case"right":return{x:u.x+u.width,y:u.y+u.height/2}}};return{source:h(d,a.side),target:h(f,c.side)}}),r=S(()=>({x:(s().source.x+s().target.x)/2,y:(s().source.y+s().target.y)/2})),l=S(()=>{const{source:a,target:c}=s(),{from:d,to:f}=e.connection;return ot({start:a,startPos:d.side,end:c,endPos:f.side})});return{connectionRef:n,toolbarRef:i,mid:r,path:l,selected:o}},qt=(e,t,n)=>{const i=c=>{const d=t.kit.selection;c?d.addItem(t.connection.id,"connection"):d.removeItem(t.connection.id,"connection")},o=c=>{t.kit.setConnections(t.index(),"label",c),t.kit.updateConnections()},s=c=>{c.stopPropagation(),i(!0)},r=new AbortController;te(()=>{e.connectionRef&&(e.selected()?(e.connectionRef.focus(),window.addEventListener("mousedown",l,{signal:r.signal}),window.addEventListener("keydown",a,{signal:r.signal})):e.connectionRef.classList.contains("selected")&&e.connectionRef.blur())});const l=c=>{const d=c.target;e.toolbarRef&&e.toolbarRef.contains(d)||e.connectionRef&&!e.connectionRef.contains(d)&&!c.ctrlKey&&(i(!1),window.removeEventListener("mousedown",l),window.removeEventListener("keydown",a))},a=c=>{c.key==="Escape"&&(i(!1),window.removeEventListener("keydown",a))};return Y(()=>{r.abort()}),{setLabel:o,onpointerdown:s}};var Jt=C("<svg stroke=currentColor style=z-index:0;overflow:visible;position:absolute><g style=outline:0><path fill=none style></path><path stroke-width=20 stroke=transparent fill=none>"),Qt=C('<div class=connection-toolbar style="position:absolute;left:calc(var(--mid-x) + var(--left, 0px));top:calc(var(--mid-y) + var(--top, -2em));transform:translate(-50%, -50%)">'),en=C('<span class=connection-label contenteditable=true style="position:absolute;z-index:1000;transform:translate(-50%, -50%)">');const tn=(e,t,n,i)=>[(()=>{var o=Jt(),s=o.firstChild,r=s.firstChild,l=r.nextSibling;o.$$dblclick=()=>t.setLabel("Test"),R(s,"pointerdown",t.onpointerdown);var a=e.connectionRef;return typeof a=="function"?q(a,s):e.connectionRef=s,E(c=>{var d=`connection-svg ${n.connection.class??""}`,f=n.connection.id,h=`connection ${n.connection.class??""}`,u=!!e.selected(),w={...n.connection.style},v=e.path(),y=e.path();return d!==c.e&&P(o,"class",c.e=d),f!==c.t&&P(s,"data-id",c.t=f),h!==c.a&&P(s,"class",c.a=h),u!==c.o&&s.classList.toggle("selected",c.o=u),c.i=pe(s,w,c.i),v!==c.n&&P(r,"d",c.n=v),y!==c.s&&P(l,"d",c.s=y),c},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0}),o})(),m(I,{get when(){return V(()=>!!n.Toolbar)()&&e.selected()},get children(){var o=Qt(),s=e.toolbarRef;return typeof s=="function"?q(s,o):e.toolbarRef=o,p(o,m(Ae,{get component(){return n.Toolbar},get kit(){return n.kit},get connection(){return n.connection},get index(){return n.index}})),E(r=>{var l=e.mid().x+"px",a=e.mid().y+"px";return l!==r.e&&z(o,"--mid-x",r.e=l),a!==r.t&&z(o,"--mid-y",r.t=a),r},{e:void 0,t:void 0}),o}}),m(I,{get when(){return n.connection.label!==void 0},get children(){var o=en();return o.$$keydown=s=>{s.key==="Enter"&&s.currentTarget.blur()},o.addEventListener("blur",s=>{const r=s.currentTarget.innerText.trim().length===0?void 0:s.currentTarget.innerText;t.setLabel(r)}),p(o,()=>n.connection.label),E(s=>{var r=e.mid().x+"px",l=e.mid().y+"px";return r!==s.e&&z(o,"left",s.e=r),l!==s.t&&z(o,"top",s.t=l),s},{e:void 0,t:void 0}),o}})];H(["dblclick","keydown"]);const nn=e=>({getNodeRect:n=>e.kit.nodes.find(i=>i.id===n)}),on=F({create:e=>{const t=nn(e),n=Zt(e,t),i=qt(n,e);return{helper:t,state:n,logic:i,view:(o,s,r,l)=>tn(o,s,r)}}}),me=["left","right","top","bottom"],rn=(e,t)=>{const n=e.kit.activeConnectionDestination(),i=e.kit.activeConnection.from.side;return{path:S(()=>ot({start:n,startPos:i,end:e.kit.activeConnectionDestination(),endPos:e.kit.activeConnection.to?.side??me[me.indexOf(i)^1]??"top"}))}},sn=(e,t,n)=>{const i=o=>{const{x:s,y:r,zoom:l}=t.kit.viewport(),a=t.kit.container?.getBoundingClientRect();a&&t.kit.setActiveConnectionDestination({x:(o.clientX-a.left-s)/l,y:(o.clientY-a.top-r)/l})};return ce(()=>{window.addEventListener("pointermove",i)}),Y(()=>{window.removeEventListener("pointermove",i)}),{}};var ln=C('<svg stroke=currentColor style=z-index:0;overflow:visible;position:absolute><g tabindex=0 class="connection connection-preview"><path fill=none style="stroke-width:var(--connection-width, 2)">');const cn=(e,t,n,i)=>(()=>{var o=ln(),s=o.firstChild,r=s.firstChild;return E(()=>P(r,"d",e.path())),o})(),an=e=>({}),dn=F({create:e=>{const t=an(),n=rn(e),i=sn(n,e);return{helper:t,state:n,logic:i,view:(o,s,r,l)=>cn(o)}}}),un=(e,t)=>{const n=S(()=>e.node.data?.component);let i;const o=S(()=>!!e.node.data?.component&&e.node.data.component in e.components),s=S(()=>"node-toolbar"in e.components),r=S(()=>e.kit.selection.getNodes().includes(e.node.id));return{type:n,nodeDiv:i,hasComponent:o,Toolbar:s,selected:r}},fn=(e,t,n)=>{const i=new AbortController,o=c=>{const d=t.kit.selection;c?d.addItem(t.node.id,"node"):d.removeItem(t.node.id,"node")},s=Oe({onStart:c=>({x:t.node.x,y:t.node.y,clientX:c.clientX,clientY:c.clientY,zoom:t.kit.viewport().zoom,gridSize:t.kit.configs.gridSize}),onMove:(c,d)=>{const f=c.clientX,h=c.clientY,u=we(f,d.clientX,d.zoom,d.gridSize),w=we(h,d.clientY,d.zoom,d.gridSize),v=d.x+u,y=d.y+w;t.kit.setNodes(t.index(),{x:v,y})},onEnd:(c,d)=>{(d.x!==t.node.x||d.y!==t.node.y)&&t.kit.updateNodes()},preventDefault:!0}),r=c=>{o(!0),!(c.button===2||t.kit.configs.disableNodeDrag||t.kit.focus())&&s.onPointerDown(c)};te(gt(e.selected,()=>{e.nodeDiv&&(e.selected()?(e.nodeDiv.focus(),window.addEventListener("pointerdown",l,{signal:i.signal}),window.addEventListener("keydown",a,{signal:i.signal})):e.nodeDiv.classList.contains("selected")&&e.nodeDiv.blur())},{defer:!0}));const l=c=>{const d=c.target;e.nodeDiv&&!e.nodeDiv.contains(d)&&!c.ctrlKey&&(o(!1),window.removeEventListener("pointerdown",l),window.removeEventListener("keydown",a))},a=c=>{c.key==="Escape"&&(o(!1),window.removeEventListener("keydown",a))};return Y(()=>{i.abort()}),{onPointerDown:r}},hn=(e,t)=>({size:S(()=>{if(e?.kit.configs.disableEdgeDrag)return{};const i="calc(var(--node-border-width, 2px) + 10px)";return t?.isCorner?{width:i,height:i,"--cursor":t?.cursor}:{width:t?.single.axis==="y"?"100%":i,height:t?.single.axis==="y"?i:"100%","--cursor":t?.cursor}})}),gn=(e,t,n)=>{const i=(u,w,v)=>Math.max(w,Math.min(u,v)),o=u=>{const{minNodeWidth:w=1,maxNodeWidth:v=1e4}=t.kit.configs;return i(u,w,v)},s=u=>{const{minNodeHeight:w=1,maxNodeHeight:v=1e4}=t.kit.configs;return i(u,w,v)},r=(()=>{switch(t.side){case"top":case"bottom":case"left":case"right":return{[t.side]:"var(--off-v)"};case"tl":return{top:"var(--off-v)",left:"var(--off-v)"};case"tr":return{top:"var(--off-v)",right:"var(--off-v)"};case"bl":return{bottom:"var(--off-v)",left:"var(--off-v)"};case"br":return{bottom:"var(--off-v)",right:"var(--off-v)"}}})(),l=t.side==="tl"?[{axis:"x",sign:-1},{axis:"y",sign:-1}]:t.side==="tr"?[{axis:"x",sign:1},{axis:"y",sign:-1}]:t.side==="bl"?[{axis:"x",sign:-1},{axis:"y",sign:1}]:t.side==="br"?[{axis:"x",sign:1},{axis:"y",sign:1}]:[],a=n?.isCorner?l:[n?.single],c=Oe({onStart:u=>({width:t.node.width,height:t.node.height,x:t.node.x,y:t.node.y,clientX:u.clientX,clientY:u.clientY,vp:t.kit.viewport(),gridSize:t.kit.configs.gridSize}),onMove:(u,w)=>{let{width:v,height:y,x:$,y:g,vp:b,gridSize:x}=w;for(const k of a){const A=b.zoom,O=(k?.axis==="x"?we(u.clientX,w.clientX,A,x):we(u.clientY,w.clientY,A,x))*(k?.sign??1);if(k?.axis==="x"){let U=v+O;const Z=o(U),$e=Z-v;v=Z,(t.side==="left"||t.side==="tl"||t.side==="bl")&&($-=$e)}else{let U=y+O;const Z=s(U),$e=Z-y;y=Z,(t.side==="top"||t.side==="tl"||t.side==="tr")&&(g-=$e)}}t.kit.setNodes(t.index(),{width:v,height:y,x:$,y:g})},onEnd:(u,w)=>{["width","height","x","y"].some(v=>w[v]!==t.node[v])&&t.kit.updateNodes()},stopPropagation:!0,preventDefault:!0,disableSelection:!0});return{onPointerLeave:()=>{const u=t.kit.activeConnection;u.from&&(t.kit.activeConnection={...u,to:{id:void 0,side:u.to?.side}})},onPointerDown:u=>{t.kit.configs.disableEdgeDrag||c.onPointerDown(u)},onPointerEnter:()=>{const{from:u}=t.kit.activeConnection;!u||n?.isCorner||(t.kit.activeConnection={from:u,to:{side:t.side,id:t.node.id}})},positionStyle:r}},vn=(e,t)=>({anchorRef:void 0}),wn=(e,t,n)=>{let i=!1;const o=c=>{if(!t?.kit.activeConnection.from)return;const d=ve(c.clientX,c.clientY,t?.kit.viewport(),t?.kit.container?.getBoundingClientRect());d&&t?.kit.setActiveConnectionDestination(d)},s=()=>{if(!i){a();return}const c=t?.kit;if(c&&c.activeConnection.from){let d=c.activeConnection.to;if(!d?.id&&!c.configs.disableAnchorConnectionCreation){const f=c.activeConnectionDestination(),h=t?.kit.configs.gridSize;if(f){const u=Me(f.x-75,h),w=Me(f.y,h),v=Math.round(150/h),y=Math.round(60/h),$=c.randomId("node"),g={x:u,y:w,width:v*c.configs.gridSize,height:y*c.configs.gridSize,data:{label:"Node",component:"default"},...c.configs.defaultNode,id:$};c.setNodes(k=>[...k,g]),c.updateNodes(!0);const b=c.activeConnection.from.side,x=me[me.indexOf(b)^1];d={id:$,side:d?.side??x}}}if(d?.id&&c.activeConnection.from.id!==d.id){const f={id:c.randomId("connection"),from:c.activeConnection.from,to:d};c.setConnections(h=>[...h,f]),c.updateConnections()}}a()},r=()=>{if(!e.anchorRef)return;const{x:c,y:d,width:f,height:h}=e.anchorRef.getBoundingClientRect();tt(),t&&(t.kit.activeConnection={from:{side:t?.side,id:t?.id}});const u=ve(c+f/2,d+h/2,t?.kit.viewport(),t?.kit.container?.getBoundingClientRect());u&&t?.kit.setActiveConnectionDestination(u)},l=c=>{c.stopPropagation(),c.preventDefault(),c.clientX,c.clientY,i=!0,r(),window.addEventListener("pointermove",o),window.addEventListener("pointerup",s,{once:!0}),window.addEventListener("pointercancel",s,{once:!0})},a=()=>{nt(),t&&(t.kit.setActiveConnectionDestination(null),t.kit.activeConnection={}),window.removeEventListener("pointermove",o),window.removeEventListener("pointerup",s),window.removeEventListener("pointercancel",s)};return{onPointerDown:l}};var mn=C("<div class=node-anchor>");const yn=(e,t,n,i)=>(()=>{var o=mn();R(o,"pointerdown",t.onPointerDown);var s=e.anchorRef;return typeof s=="function"?q(s,o):e.anchorRef=o,o})(),bn=e=>({}),xn=F({create:e=>{const t=bn(),n=vn(),i=wn(n,e);return{helper:t,state:n,logic:i,view:(o,s,r,l)=>yn(o,s)}}});var kn=C("<div class=node-edge>");const pn=(e,t,n,i)=>(()=>{var o=kn();return R(o,"pointerdown",t.onPointerDown),R(o,"pointerleave",t.onPointerLeave),R(o,"pointerenter",t.onPointerEnter),p(o,m(I,{get when(){return V(()=>!i?.isCorner)()&&!n?.kit.configs.disableNodeAnchors},get children(){return m(xn,{get index(){return n?.index},get side(){return n?.side},get kit(){return n?.kit},get id(){return n?.node.id}})}})),E(s=>pe(o,{...e.size(),...t.positionStyle},s)),o})(),$n=e=>{const t=["tl","tr","bl","br"].includes(e?.side),n={top:{axis:"y",sign:-1,cursor:"ns-resize"},bottom:{axis:"y",sign:1,cursor:"ns-resize"},left:{axis:"x",sign:-1,cursor:"ew-resize"},right:{axis:"x",sign:1,cursor:"ew-resize"}}[e?.side],i=t?e?.side==="tl"||e?.side==="br"?"nwse-resize":"nesw-resize":n?.cursor??"default";return{isCorner:t,cursor:i,single:n}},Cn=F({create:e=>{const t=$n(e),n=hn(e,t),i=gn(n,e,t);return{helper:t,state:n,logic:i,view:(o,s,r,l)=>pn(o,s,r,l)}}});var Sn=C('<div class=node-toolbar style="position:absolute;top:var(--top, 0);left:var(--left, calc(100% + 1em))">'),En=C("<span class=node-label contenteditable=true style=top:-2em;left:0;width:var(--size);height:var(--size);display:flex;align-items:center;justify-content:center;outline:none>"),Pn=C("<div class=node-component style=width:100%;height:100%>"),Ln=C("<div>");const Nn=(e,t,n,i)=>(()=>{var o=Ln();R(o,"pointerdown",t.onPointerDown);var s=e.nodeDiv;return typeof s=="function"?q(s,o):e.nodeDiv=o,p(o,m(I,{get when(){return V(()=>!!e.Toolbar())()&&e.selected()},get children(){var r=Sn();return r.$$pointerdown=l=>{console.log("p-down"),l.stopPropagation()},p(r,m(Ae,{get component(){return n.components?.["node-toolbar"]},get kit(){return n.kit},get node(){return n.node},get index(){return n.index}})),r}}),null),p(o,m(I,{get when(){return n.node.data?.label},get children(){var r=En();return r.$$keydown=l=>{l.key==="Escape"&&l.currentTarget.blur()},r.addEventListener("blur",l=>{const a=l.currentTarget.innerText.trim().length===0?void 0:l.currentTarget.innerText;n.kit.setNodes(n.index(),"data","label",a),n.kit.updateNodes()}),p(r,()=>n.node.data?.label),E(l=>{var a=e.type()&&e.hasComponent()?"fit-content":"100%",c=e.type()&&e.hasComponent()?"absolute":"static";return a!==l.e&&z(r,"--size",l.e=a),c!==l.t&&z(r,"position",l.t=c),l},{e:void 0,t:void 0}),r}}),null),p(o,m(I,{get when(){return V(()=>!!(e.type()&&n.components))()&&e.hasComponent()},get children(){var r=Pn();return p(r,m(Ae,{get component(){return n.components[e.type()]},get node(){return n.node},get kit(){return n.kit},get index(){return n.index}})),r}}),null),p(o,m(j,{each:["left","top","right","bottom","tl","tr","br","bl"],children:r=>m(Cn,{get index(){return n.index},side:r,get node(){return n.node},get kit(){return n.kit}})}),null),E(r=>{var l=`node ${n.node.class??""} `,a=!!e.selected(),c=!n.kit.focus(),d=n.node.id,f={transform:`translate(${n.node.x}px, ${n.node.y}px)`,width:`${n.node.width}px`,height:`${n.node.height}px`,...n.node.style};return l!==r.e&&Qe(o,r.e=l),a!==r.t&&o.classList.toggle("selected",r.t=a),c!==r.a&&o.classList.toggle("unfocus",r.a=c),d!==r.o&&P(o,"data-id",r.o=d),r.i=pe(o,f,r.i),r},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0}),o})();H(["pointerdown","keydown"]);const An=e=>({}),Mn=F({create:e=>{const t=An(),n=un(e),i=fn(n,e);return{helper:t,state:n,logic:i,view:(o,s,r,l)=>Nn(o,s,r)}}});var _n=C('<div class=solid-kitx tabindex=0 autofocus style=outline:none><div class=container style="transform-origin:0 0">');const zn=(e,t,n,i)=>{const o=e.Children;return(()=>{var s=_n(),r=s.firstChild;R(s,"pointerdown",t.onPointerDown,!0);var l=e.containerRef;return typeof l=="function"?q(l,s):e.containerRef=s,p(s,m(o,{}),r),p(r,m(j,{get each(){return e.filteredConnections()},children:(a,c)=>m(on,{connection:a,get Toolbar(){return n.components?.["connection-toolbar"]},get kit(){return e.kit},index:c})}),null),p(r,m(I,{get when(){return e.kit.activeConnectionDestination()},get children(){return m(dn,{get kit(){return e.kit}})}}),null),p(r,m(j,{get each(){return e.filteredNodes()},children:(a,c)=>m(Mn,{node:a,index:c,get components(){return n.components},get kit(){return e.kit}})}),null),E(a=>z(r,"transform",`translate(${e.vp().x}px, ${e.vp().y}px) scale(${e.vp().zoom})`)),s})()};H(["pointerdown"]);const Tn=e=>({}),Dn=F({create:e=>{const t=Tn(),n=Gt(e),i=Kt(n,e);return{helper:t,state:n,logic:i,view:(o,s,r,l)=>zn(o,s,r)}}}),On=(e,t)=>{const n=S(()=>e.absoluteGrid??e.kit.configs.gridSize??100),i=S(()=>e.kit.viewport()),o=S(()=>n()*i().zoom),s=S(()=>e.type==="dash"&&n()/(e.dashWidth??8)*i().zoom);return{grid:n,vp:i,dif:o,dashWidth:s}},In=(e,t,n)=>({});var Rn=C("<svg><line stroke=currentColor y1=0 y2=0></svg>",!1,!0,!1),Hn=C("<svg><line stroke=currentColor x1=0 x2=0></svg>",!1,!0,!1),Vn=C("<svg><circle fill=currentColor></svg>",!1,!0,!1),jn=C("<svg class=background-grid style=position:absolute;width:100%;height:100%><pattern id=grid-pattern patternUnits=userSpaceOnUse></pattern><rect x=0 y=0 width=100% height=100% fill=url(#grid-pattern)>");const Bn=(e,t,n,i)=>(()=>{var o=jn(),s=o.firstChild;return p(s,m(De,{get children(){return[m(re,{get when(){return n.type==="dash"},get children(){return[(()=>{var r=Rn();return E(l=>{var a=`${e.dashWidth()}`,c=-e.dashWidth()/2,d=e.grid()*e.vp().zoom;return a!==l.e&&P(r,"stroke-dasharray",l.e=a),c!==l.t&&P(r,"x1",l.t=c),d!==l.a&&P(r,"x2",l.a=d),l},{e:void 0,t:void 0,a:void 0}),r})(),(()=>{var r=Hn();return E(l=>{var a=`${e.dashWidth()}`,c=-e.dashWidth()/2,d=e.grid()*e.vp().zoom;return a!==l.e&&P(r,"stroke-dasharray",l.e=a),c!==l.t&&P(r,"y1",l.t=c),d!==l.a&&P(r,"y2",l.a=d),l},{e:void 0,t:void 0,a:void 0}),r})()]}}),m(re,{get when(){return!n.type||n.type==="dot"},get children(){var r=Vn();return E(l=>{var a=e.vp().zoom,c=e.vp().zoom,d=e.vp().zoom;return a!==l.e&&P(r,"cx",l.e=a),c!==l.t&&P(r,"cy",l.t=c),d!==l.a&&P(r,"r",l.a=d),l},{e:void 0,t:void 0,a:void 0}),r}})]}})),E(r=>{var l=e.vp().x+e.dif()/2,a=e.vp().y+e.dif()/2,c=e.dif(),d=e.dif();return l!==r.e&&P(s,"x",r.e=l),a!==r.t&&P(s,"y",r.t=a),c!==r.a&&P(s,"width",r.a=c),d!==r.o&&P(s,"height",r.o=d),r},{e:void 0,t:void 0,a:void 0,o:void 0}),o})(),Fn=e=>({}),Un=F({create:e=>{const t=Fn(),n=On(e),i=In();return{helper:t,state:n,logic:i,view:(o,s,r,l)=>Bn(o,s,r)}}}),Xn=(e,t)=>({}),Wn=(e,t,n)=>({zoomIn:()=>{const r=t.kit.viewport(),l=Math.min(5,r.zoom+.1);t.kit.setViewport({...r,zoom:l}),t.kit.updateViewport()},zoomOut:()=>{const r=t.kit.viewport();t.kit.setViewport({...r,zoom:Math.max(.1,r.zoom-.1)}),t.kit.updateViewport()},fitView:()=>{if(!t.kit.container||t.kit.nodes.length===0)return;const r=t.kit.nodes;let l=1/0,a=1/0,c=-1/0,d=-1/0;r.forEach(A=>{l=Math.min(l,A.x),a=Math.min(a,A.y),c=Math.max(c,A.x+A.width),d=Math.max(d,A.y+A.height)});const{width:f,height:h}=t.kit.container.getBoundingClientRect(),u=40,w=c-l,v=d-a;if(w<=0||v<=0)return;const y=Math.min((f-u*2)/w,(h-u*2)/v),$=Math.min(y,1),g=l+w/2,b=a+v/2,x=f/2-g*$,k=h/2-b*$;t.kit.setViewport({x,y:k,zoom:$}),t.kit.updateViewport()}});var Yn=C(`<div class=kitx-controls style=right:10px;bottom:10px><button><svg xmlns=http://www.w3.org/2000/svg viewBox="0 0 297 297"fill=currentColor><g><path d="M294.077,251.199l-59.105-59.107l42.167-24.356c3.295-1.903,5.212-5.52,4.938-9.315c-0.274-3.796-2.692-7.101-6.226-8.51
		L87.82,74.905c-3.686-1.472-7.895-0.605-10.702,2.201c-2.807,2.808-3.674,7.016-2.203,10.702l74.994,188.053
		c1.41,3.534,4.715,5.953,8.511,6.227c3.796,0.276,7.414-1.642,9.316-4.938l24.354-42.167l59.101,59.107
		c1.862,1.863,4.39,2.91,7.023,2.91c2.635,0,5.161-1.047,7.023-2.91l28.841-28.845C297.956,261.366,297.956,255.078,294.077,251.199
		z"></path><path d="M43.61,29.552c-3.879-3.876-10.166-3.877-14.047,0c-3.878,3.879-3.878,10.168,0,14.047l22.069,22.069
		c1.939,1.939,4.48,2.909,7.023,2.909c2.541,0,5.083-0.97,7.022-2.909c3.879-3.879,3.879-10.167,0-14.046L43.61,29.552z"></path><path d="M51.089,98.215c0-5.484-4.447-9.932-9.933-9.932H9.946c-5.485,0-9.933,4.447-9.933,9.932c0,5.485,4.447,9.933,9.933,9.933
		h31.21C46.642,108.147,51.089,103.7,51.089,98.215z"></path><path d="M47.063,128.869l-22.072,22.071c-3.878,3.879-3.878,10.168,0,14.046c1.94,1.939,4.482,2.909,7.023,2.909
		c2.541,0,5.084-0.97,7.023-2.909l22.071-22.07c3.879-3.879,3.879-10.168,0-14.047C57.23,124.993,50.944,124.992,47.063,128.869z"></path><path d="M98.222,51.078c5.485,0,9.933-4.447,9.933-9.933V9.932c0-5.485-4.447-9.932-9.933-9.932c-5.484,0-9.932,4.446-9.932,9.932
		v31.214C88.29,46.631,92.737,51.078,98.222,51.078z"></path><path d="M135.894,64.006c2.543,0,5.084-0.97,7.023-2.909l22.068-22.069c3.879-3.879,3.879-10.168,0-14.047
		c-3.879-3.877-10.168-3.877-14.046,0l-22.068,22.07c-3.879,3.879-3.879,10.168,0,14.046
		C130.811,63.036,133.352,64.006,135.894,64.006z"></path></g></svg></button><button class=control-button><svg viewBox="0 0 24 24"id=plus data-name="Flat Line"xmlns=http://www.w3.org/2000/svg stroke=currentColor><path d=M5,12H19M12,5V19 fill=none stroke-linecap=round stroke-linejoin=round stroke-width=2></path></svg></button><button class=control-button><svg viewBox="0 0 24 24"id=minus data-name="Flat Line"xmlns=http://www.w3.org/2000/svg stroke=currentColor><line fill=none stroke-linecap=round stroke-linejoin=round stroke-width=2 x1=19 y1=12 x2=5 y2=12></line></svg></button><button class=control-button><svg viewBox="0 0 24 24"id=maximize-size data-name="Flat Line"xmlns=http://www.w3.org/2000/svg fill=none stroke-linecap=round stroke-linejoin=round stroke-width=2 stroke=currentColor><path d=M9,9,3.29,3.29M15,9l5.71-5.71M9,15,3.29,20.71m17.42,0L15,15></path><path data-name=primary d=M3,8V4A1,1,0,0,1,4,3H8></path><path data-name=primary d=M16,3h4a1,1,0,0,1,1,1V8></path><path data-name=primary d=M8,21H4a1,1,0,0,1-1-1V16></path><path data-name=primary d=M21,16v4a1,1,0,0,1-1,1H16>`);const Gn=(e,t,n,i)=>(()=>{var o=Yn(),s=o.firstChild,r=s.nextSibling,l=r.nextSibling,a=l.nextSibling;return s.$$pointerdown=()=>n.kit.setFocus(c=>!c),R(r,"pointerdown",t.zoomIn,!0),R(l,"pointerdown",t.zoomOut,!0),R(a,"pointerdown",t.fitView,!0),E(()=>s.classList.toggle("on",!!n.kit.focus())),o})();H(["pointerdown"]);const Kn=e=>({}),Zn=F({create:e=>{const t=Kn(),n=Xn(),i=Wn(n,e);return{helper:t,state:n,logic:i,view:(o,s,r,l)=>Gn(o,s,r)}}}),qn=(e,t)=>{const[n,i]=M(!1),[o,s]=M({x:0,y:0}),r=S(()=>{const a=t?.startPos,c=o();return{left:Math.min(a.x,c.x),top:Math.min(a.y,c.y),right:Math.max(a.x,c.x),bottom:Math.max(a.y,c.y),width:Math.abs(a.x-c.x),height:Math.abs(a.y-c.y)}}),l=S(()=>{const a=r(),c=e.kit.viewport();return{left:a.left*c.zoom,top:a.top*c.zoom,width:a.width*c.zoom,height:a.height*c.zoom}});return{isDragging:n,currentPos:o,setCurrentPos:s,setIsDragging:i,rectOnScreen:l,rect:r}},Jn=(e,t,n)=>{function i(){const r=e.rect();if(r.width<5||r.height<5)return;const l=t.kit.container.getBoundingClientRect(),a={nodes:[],connections:[]};t.kit.container.querySelectorAll(".node, .connection").forEach(d=>{const f=d.getBoundingClientRect(),h=t.kit.viewport(),u={left:(f.left-l.left)/h.zoom,top:(f.top-l.top)/h.zoom,right:(f.right-l.left)/h.zoom,bottom:(f.bottom-l.top)/h.zoom};if(!(u.left>r.right||u.right<r.left||u.top>r.bottom||u.bottom<r.top)){const v=d.getAttribute("data-id"),y=d.classList.contains("node");v&&(y?a.nodes.push(v):a.connections.push(v))}}),t.kit.selection.set(a)}const o=Oe({onStart:r=>{if(r.button!==0)return;const l=ve(r.clientX,r.clientY,{...t.kit.viewport(),x:0,y:0},t.kit.container.getBoundingClientRect());if(l)return n&&(n.startPos=l),e.setCurrentPos(l),e.setIsDragging(!0),l},onMove:(r,l)=>{const a=ve(r.clientX,r.clientY,{...t.kit.viewport(),x:0,y:0},t.kit.container.getBoundingClientRect());a&&e.setCurrentPos(a)},onEnd:(r,l)=>{e.setIsDragging(!1),i()},disableSelection:!0}),s=r=>{t.kit.focus()&&o.onPointerDown(r)};return ce(()=>{t.kit.container?.addEventListener("pointerdown",s)}),Y(()=>{t.kit.container?.removeEventListener("pointerdown",s)}),{}};var Qn=C('<div class=kit-selection-rect style="position:absolute;border:1px solid rgb(var(--selection-rgb, 0,120,215));background-color:rgba(var(--selection-rgb, 0,120,215), 0.3)">');const eo=(e,t,n,i)=>m(I,{get when(){return V(()=>!!e.isDragging())()&&n.kit.focus()},get children(){var o=Qn();return E(s=>{var r=`${e.rectOnScreen().left}px`,l=`${e.rectOnScreen().top}px`,a=`${e.rectOnScreen().width}px`,c=`${e.rectOnScreen().height}px`;return r!==s.e&&z(o,"left",s.e=r),l!==s.t&&z(o,"top",s.t=l),a!==s.a&&z(o,"width",s.a=a),c!==s.o&&z(o,"height",s.o=c),s},{e:void 0,t:void 0,a:void 0,o:void 0}),o}}),to=e=>({startPos:{x:0,y:0}}),no=F({create:e=>{const t=to(),n=qn(e,t),i=Jn(n,e,t);return{helper:t,state:n,logic:i,view:(o,s,r,l)=>eo(o,s,r)}}});var oo=C('<button><svg xmlns=http://www.w3.org/2000/svg viewBox="0 0 24 24"stroke=currentColor stroke-width=2 stroke-linecap=round stroke-linejoin=round><path stroke=none d="M0 0h24v24H0z"fill=none></path><path d="M12 5l0 14"></path><path d="M5 12l14 0">'),io=C('<div class=kitx-controls style=--flex-direction:row><button title="Remove Node"><svg xmlns=http://www.w3.org/2000/svg viewBox="0 0 24 24"fill=none stroke=currentColor stroke-width=2 stroke-linecap=round stroke-linejoin=round class="icon icon-tabler icons-tabler-outline icon-tabler-trash"><path stroke=none d="M0 0h24v24H0z"fill=none></path><path d="M4 7l16 0"></path><path d="M10 11l0 6"></path><path d="M14 11l0 6"></path><path d="M5 7l1 12a2 2 0 0 0 2 2h8a2 2 0 0 0 2 -2l1 -12"></path><path d="M9 7v-3a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v3">');const ro=e=>{const t=S(()=>e.node.data?.component==="task-node"),n=()=>{const s=e.node.id;e.kit.setConnections(r=>r.filter(l=>l.from.id!==s&&l.to.id!==s)),e.kit.setNodes(r=>r.filter(l=>l.id!==s)),e.kit.updateNodes()},i=()=>{e.kit.setNodes(e.index(),"data","extra","fields",["new field",...e.node.data?.extra?.fields??[]])},o=()=>{e.kit.setNodes(e.index(),"data","extra","tasks",[{description:"new task",done:!1},...e.node.data?.extra.tasks])};return(()=>{var s=io(),r=s.firstChild;return r.$$pointerdown=n,p(s,m(De,{get children(){return m(re,{get when(){return["fields-node","task-node"].includes(e.node.data?.component)},get children(){var l=oo();return R(l,"pointerdown",t()?o:i,!0),E(()=>P(l,"title",t()?"Add Task":"Add field")),l}})}}),null),s})()};H(["pointerdown"]);var so=C('<div class=kitx-controls style=--flex-direction:row><button><svg xmlns=http://www.w3.org/2000/svg viewBox="0 0 24 24"fill=none stroke=currentColor stroke-width=2 stroke-linecap=round stroke-linejoin=round class="icon icon-tabler icons-tabler-outline icon-tabler-trash"><path stroke=none d="M0 0h24v24H0z"fill=none></path><path d="M4 7l16 0"></path><path d="M10 11l0 6"></path><path d="M14 11l0 6"></path><path d="M5 7l1 12a2 2 0 0 0 2 2h8a2 2 0 0 0 2 -2l1 -12"></path><path d="M9 7v-3a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v3"></path></svg></button><button><svg xmlns=http://www.w3.org/2000/svg viewBox="0 0 24 24"fill=none stroke=currentColor stroke-width=2 stroke-linecap=round stroke-linejoin=round class="icon icon-tabler icons-tabler-outline icon-tabler-palette"><path stroke=none d="M0 0h24v24H0z"fill=none></path><path d="M12 21a9 9 0 0 1 0 -18c4.97 0 9 3.582 9 8c0 1.06 -.474 2.078 -1.318 2.828c-.844 .75 -1.989 1.172 -3.182 1.172h-2.5a2 2 0 0 0 -1 3.75a1.3 1.3 0 0 1 -1 2.25"></path><path d="M8.5 10.5m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0"></path><path d="M12.5 7.5m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0"></path><path d="M16.5 10.5m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0">');const lo=e=>{const t=()=>{const i=document.createElement("input");i.type="color",i.click(),i.addEventListener("input",()=>{e.kit.setConnections(e.index(),"style","stroke",i.value),e.kit.updateConnections()})},n=()=>{e.kit.setConnections(i=>i.filter(o=>o.id!==e.connection.id)),e.kit.updateConnections()};return(()=>{var i=so(),o=i.firstChild,s=o.nextSibling;return o.$$pointerdown=n,s.$$pointerdown=t,i})()};H(["pointerdown"]);const _e=Symbol("store-raw"),ee=Symbol("store-node"),X=Symbol("store-has"),it=Symbol("store-self");function rt(e){let t=e[B];if(!t&&(Object.defineProperty(e,B,{value:t=new Proxy(e,uo)}),!Array.isArray(e))){const n=Object.keys(e),i=Object.getOwnPropertyDescriptors(e);for(let o=0,s=n.length;o<s;o++){const r=n[o];i[r].get&&Object.defineProperty(e,r,{enumerable:i[r].enumerable,get:i[r].get.bind(t)})}}return t}function ye(e){let t;return e!=null&&typeof e=="object"&&(e[B]||!(t=Object.getPrototypeOf(e))||t===Object.prototype||Array.isArray(e))}function G(e,t=new Set){let n,i,o,s;if(n=e!=null&&e[_e])return n;if(!ye(e)||t.has(e))return e;if(Array.isArray(e)){Object.isFrozen(e)?e=e.slice(0):t.add(e);for(let r=0,l=e.length;r<l;r++)o=e[r],(i=G(o,t))!==o&&(e[r]=i)}else{Object.isFrozen(e)?e=Object.assign({},e):t.add(e);const r=Object.keys(e),l=Object.getOwnPropertyDescriptors(e);for(let a=0,c=r.length;a<c;a++)s=r[a],!l[s].get&&(o=e[s],(i=G(o,t))!==o&&(e[s]=i))}return e}function be(e,t){let n=e[t];return n||Object.defineProperty(e,t,{value:n=Object.create(null)}),n}function le(e,t,n){if(e[t])return e[t];const[i,o]=M(n,{equals:!1,internal:!0});return i.$=o,e[t]=i}function co(e,t){const n=Reflect.getOwnPropertyDescriptor(e,t);return!n||n.get||!n.configurable||t===B||t===ee||(delete n.value,delete n.writable,n.get=()=>e[B][t]),n}function st(e){Pe()&&le(be(e,ee),it)()}function ao(e){return st(e),Reflect.ownKeys(e)}const uo={get(e,t,n){if(t===_e)return e;if(t===B)return n;if(t===Ee)return st(e),n;const i=be(e,ee),o=i[t];let s=o?o():e[t];if(t===ee||t===X||t==="__proto__")return s;if(!o){const r=Object.getOwnPropertyDescriptor(e,t);Pe()&&(typeof s!="function"||e.hasOwnProperty(t))&&!(r&&r.get)&&(s=le(i,t,s)())}return ye(s)?rt(s):s},has(e,t){return t===_e||t===B||t===Ee||t===ee||t===X||t==="__proto__"?!0:(Pe()&&le(be(e,X),t)(),t in e)},set(){return!0},deleteProperty(){return!0},ownKeys:ao,getOwnPropertyDescriptor:co};function xe(e,t,n,i=!1){if(!i&&e[t]===n)return;const o=e[t],s=e.length;n===void 0?(delete e[t],e[X]&&e[X][t]&&o!==void 0&&e[X][t].$()):(e[t]=n,e[X]&&e[X][t]&&o===void 0&&e[X][t].$());let r=be(e,ee),l;if((l=le(r,t,o))&&l.$(()=>n),Array.isArray(e)&&e.length!==s){for(let a=e.length;a<s;a++)(l=r[a])&&l.$();(l=le(r,"length",s))&&l.$(e.length)}(l=r[it])&&l.$()}function lt(e,t){const n=Object.keys(t);for(let i=0;i<n.length;i+=1){const o=n[i];xe(e,o,t[o])}}function fo(e,t){if(typeof t=="function"&&(t=t(e)),t=G(t),Array.isArray(t)){if(e===t)return;let n=0,i=t.length;for(;n<i;n++){const o=t[n];e[n]!==o&&xe(e,n,o)}xe(e,"length",i)}else lt(e,t)}function ne(e,t,n=[]){let i,o=e;if(t.length>1){i=t.shift();const r=typeof i,l=Array.isArray(e);if(Array.isArray(i)){for(let a=0;a<i.length;a++)ne(e,[i[a]].concat(t),n);return}else if(l&&r==="function"){for(let a=0;a<e.length;a++)i(e[a],a)&&ne(e,[a].concat(t),n);return}else if(l&&r==="object"){const{from:a=0,to:c=e.length-1,by:d=1}=i;for(let f=a;f<=c;f+=d)ne(e,[f].concat(t),n);return}else if(t.length>1){ne(e[i],t,[i].concat(n));return}o=e[i],n=[i].concat(n)}let s=t[0];typeof s=="function"&&(s=s(o,n),s===o)||i===void 0&&s==null||(s=G(s),i===void 0||ye(o)&&ye(s)&&!Array.isArray(s)?lt(o,s):xe(e,i,s))}function Ue(...[e,t]){const n=G(e||{}),i=Array.isArray(n),o=rt(n);function s(...r){ht(()=>{i&&r.length===1?fo(n,r[0]):ne(n,r)})}return[o,s]}const ho=(e,t)=>{const[n,i]=M(""),[o,s]=M(!1),[r,l]=M(!1);return{selected:n,setSelected:i,settingsVisible:o,setSettingsVisible:s,isNodesVisible:r,setNodesVisible:l}},ct={backgroundType:M(localStorage.backgroundType)},go=(e,t,n)=>{const i=t.kit,o=c=>{c.shiftKey&&c.key===" "&&t.kit.setFocus(d=>!d)},s=()=>{confirm("Are you sure you want to remove everything?")&&(localStorage.removeItem("nodes"),localStorage.removeItem("connections"),localStorage.removeItem("vp"),window.location.reload())},r=()=>{const c={nodes:G(i.nodes),connections:G(i.connections),viewport:i.viewport()},d=JSON.stringify(c,null,2),f=new Blob([d],{type:"application/json"}),h=URL.createObjectURL(f),u=document.createElement("a");u.href=h,u.download="solid-kitx-export.json",u.click(),URL.revokeObjectURL(h)},l=()=>{const c=document.createElement("input");c.type="file",c.accept="application/json",c.onchange=async d=>{const f=d.target.files?.[0];if(f)try{const h=await f.text(),u=JSON.parse(h);if(!u.nodes||!u.connections||!u.viewport){alert("Invalid file format. Missing required fields.");return}i.setNodes(u.nodes),i.setConnections(u.connections),i.setViewport(u.viewport),i.updateNodes(),i.updateConnections(),i.updateViewport(),console.log("Import successful:",u)}catch(h){console.error(h),alert("Failed to read file.")}},c.click()},a=c=>{ct.backgroundType[1](c),localStorage.backgroundType=c};return ce(()=>{window.addEventListener("keydown",o)}),Y(()=>{window.removeEventListener("keydown",o)}),{clearAll:s,exportAll:r,importAll:l,onBackgroundType:a}},vo=`<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor" class="icon icon-tabler icons-tabler-filled icon-tabler-alien"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M12.004 2c4.942 0 8.288 2.503 8.85 6.444a12.884 12.884 0 0 1 -2.163 9.308a11.794 11.794 0 0 1 -3.51 3.356c-1.982 1.19 -4.376 1.19 -6.373 -.008a11.763 11.763 0 0 1 -3.489 -3.34a12.808 12.808 0 0 1 -2.171 -9.306c.564 -3.95 3.91 -6.454 8.856 -6.454zm1.913 14.6a1 1 0 0 0 -1.317 -.517l-.146 .055a1.5 1.5 0 0 1 -1.054 -.055l-.11 -.04a1 1 0 0 0 -.69 1.874a3.5 3.5 0 0 0 2.8 0a1 1 0 0 0 .517 -1.317zm-5.304 -6.39a1 1 0 0 0 -1.32 1.497l2 2l.094 .083a1 1 0 0 0 1.32 -1.497l-2 -2zm8.094 .083a1 1 0 0 0 -1.414 0l-2 2l-.083 .094a1 1 0 0 0 1.497 1.32l2 -2l.083 -.094a1 1 0 0 0 -.083 -1.32z" /></svg>
`,wo=`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" ><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M10.325 4.317c.426 -1.756 2.924 -1.756 3.35 0a1.724 1.724 0 0 0 2.573 1.066c1.543 -.94 3.31 .826 2.37 2.37a1.724 1.724 0 0 0 1.065 2.572c1.756 .426 1.756 2.924 0 3.35a1.724 1.724 0 0 0 -1.066 2.573c.94 1.543 -.826 3.31 -2.37 2.37a1.724 1.724 0 0 0 -2.572 1.065c-.426 1.756 -2.924 1.756 -3.35 0a1.724 1.724 0 0 0 -2.573 -1.066c-1.543 .94 -3.31 -.826 -2.37 -2.37a1.724 1.724 0 0 0 -1.065 -2.572c-1.756 -.426 -1.756 -2.924 0 -3.35a1.724 1.724 0 0 0 1.066 -2.573c-.94 -1.543 .826 -3.31 2.37 -2.37c1 .608 2.296 .07 2.572 -1.065z" /><path d="M9 12a3 3 0 1 0 6 0a3 3 0 0 0 -6 0" /></svg>
`,mo=`
                                <svg
                                        xmlns="http://www.w3.org/2000/svg"
                                        viewBox="0 0 24 24"
                                        stroke="currentColor"
                                        stroke-width="2"
                                        stroke-linecap="round"
                                        stroke-linejoin="round"
                                        class="icon icon-tabler icons-tabler-outline icon-tabler-x"
                                >
                                        <path
                                                stroke="none"
                                                d="M0 0h24v24H0z"
                                                fill="none"
                                        />
                                        <path d="M18 6l-12 12" />
                                        <path d="M6 6l12 12" />
                                </svg>
`;var yo=C('<div style="padding:3rem;text-align:center;color:var(--label-color, #999999)"><p style=margin:0;font-size:1rem>No settings available in this category yet.'),bo=C('<div class=settings-backdrop style="position:fixed;top:0;left:0;width:100%;height:100%;background-color:rgba(0, 0, 0, 0.5);z-index:100;display:flex;justify-content:center;align-items:center"><div class=settings-modal style="background-color:var(--node-bg, #ffffff);border-radius:12px;box-shadow:0 10px 40px rgba(0, 0, 0, 0.3);width:min(900px, 90vw);height:min(500px, 80vh);display:flex;overflow:hidden;color:var(--node-color, #000000)"><div class=settings-sidebar style="width:200px;background-color:var(--controls-bg, #f5f5f5);border-right:1px solid var(--node-outline-color, #e0e0e0);padding:1.5rem 0;display:flex;flex-direction:column;gap:0.5rem"><div style=padding-inline:1.5rem;margin-bottom:1rem><h2 style=margin:0;font-size:1.25rem;font-weight:600>Settings</h2></div></div><div class=settings-content style=flex:1;padding:2rem;overflow-y:auto;display:flex;flex-direction:column;gap:1.5rem><div style=display:flex;justify-content:space-between;align-items:center;margin-bottom:0.5rem><h3 style=margin:0;font-size:1.5rem;font-weight:600;text-transform:capitalize></h3><button class=close-button style=background:transparent;border:none;cursor:pointer;padding:0.5rem;border-radius:6px;display:flex;align-items:center;justify-content:center></button></div><div style=display:flex;flex-direction:column;gap:1rem>'),xo=C('<button class=settings-tab style="border:none;padding:0.75rem 1.5rem;text-align:left;cursor:pointer;font-size:0.95rem;color:var(--node-color, #000000)">'),ko=C('<button class=setting-action-button style="flex-shrink:0;padding:0.5rem 1rem;background-color:var(--node-outline, #1a73e8);color:#ffffff;border:none;border-radius:6px;cursor:pointer;font-size:0.9rem;font-weight:500;white-space:nowrap">'),po=C("<select>"),$o=C('<div class=setting-item style=display:flex;height:10em;gap:1rem;align-items:flex-start><div style=flex:1><h4 style="margin:0 0 0.5rem 0;font-size:1.1rem;font-weight:500"></h4><p style="margin:0;font-size:0.8rem;color:var(--label-color, #666666);line-height:1.5">'),Co=C("<option>");const So=e=>{const[t,n]=M("general"),i=[{id:"general",label:"General"},{id:"data",label:"Data"},{id:"appearance",label:"Appearance"}],o=()=>document.documentElement.classList.contains("dark")?"dark":"light",[s,r]=M(o()),l=()=>{document.documentElement.classList.toggle("dark");const c=o();localStorage.theme=c,r(c)},a={general:[{id:"theme",title:"Theme",description:`Switch between light and dark mode. Current theme: ${s()}`,action:l,type:"button"}],data:[{id:"export",title:"Export Backup",description:"Download a backup file containing all your nodes and connections. Use this to save your work or transfer it to another device.",action:e.logic.exportAll,type:"button"},{id:"import",title:"Import Backup",description:"Load a previously saved backup file to restore your nodes and connections. This will replace your current work.",action:e.logic.importAll,type:"button"},{id:"clear",title:"Clear All Data",description:"Delete all nodes and connections from the canvas. This action cannot be undone. Make sure to export a backup first if you want to keep your work.",action:e.logic.clearAll,type:"button"}],appearance:[{id:"bg-type",title:"Background Type",description:"Change Background type.",action:e.logic.onBackgroundType,type:"options",options:["dot","dash"]}]};return m(I,{get when(){return e.visible},get children(){var c=bo(),d=c.firstChild,f=d.firstChild,h=f.firstChild;h.firstChild;var u=f.nextSibling,w=u.firstChild,v=w.firstChild,y=v.nextSibling,$=w.nextSibling;return c.$$pointerdown=g=>{g.preventDefault(),g.stopPropagation(),e.onClose()},d.$$pointerdown=g=>g.stopPropagation(),p(f,m(j,{each:i,children:g=>(()=>{var b=xo();return b.$$pointerdown=()=>n(g.id),p(b,()=>g.label),E(x=>{var k=t()===g.id,A=t()===g.id?"var(--controls-button-bg, #ffffff)":"transparent",_=t()===g.id?"500":"400";return k!==x.e&&b.classList.toggle("active",x.e=k),A!==x.t&&z(b,"background",x.t=A),_!==x.a&&z(b,"font-weight",x.a=_),x},{e:void 0,t:void 0,a:void 0}),b})()}),null),p(v,t),R(y,"pointerdown",e.onClose,!0),y.innerHTML=mo,p($,m(j,{get each(){return a[t()]},children:g=>(()=>{var b=$o(),x=b.firstChild,k=x.firstChild,A=k.nextSibling;return p(k,()=>g.title),p(A,()=>g.description),p(b,m(De,{get children(){return[m(re,{get when(){return V(()=>!!g.type)()&&["button","toggle"].includes(g.type)},get children(){var _=ko();return _.$$pointerdown=O=>{O.stopPropagation(),g.action()},p(_,(()=>{var O=V(()=>g.id==="theme");return()=>O()?"Toggle":V(()=>g.id==="clear")()?"Clear":g.id==="export"?"Export":"Import"})()),_}}),m(re,{get when(){return V(()=>!!g.type)()&&g.type==="options"},get children(){var _=po();return _.addEventListener("change",O=>{g.action(O.currentTarget.value)}),p(_,m(j,{get each(){return V(()=>g.type==="options")()&&g.options},children:O=>(()=>{var U=Co();return U.value=O,p(U,O),U})()})),_}})]}}),null),b})()}),null),p($,m(I,{get when(){return a[t()].length===0},get children(){var g=yo();return g.firstChild,g}}),null),c}})};H(["pointerdown"]);var Eo=C('<div class=kitx-controls style=top:10px;right:10px><button title=Github></button><hr style=border:0;height:.5em><button title="Expand Settings"></button><hr style=border:0;height:.5em>'),Po=C("<button>"),Lo=C("<div class=node-preview>");const No=(e,t,n,i)=>[(()=>{var o=Eo(),s=o.firstChild,r=s.nextSibling,l=r.nextSibling;return l.nextSibling,o.$$pointerdown=a=>a.stopPropagation(),s.$$pointerdown=()=>window.open("https://github.com/ryusufe/solid-kitx/","_blank"),s.innerHTML=vo,l.$$pointerdown=()=>e.setSettingsVisible(a=>!a),l.innerHTML=wo,p(o,m(j,{get each(){return i?.nodeTypes},children:a=>(()=>{var c=Po();return c.$$click=()=>e.setSelected(d=>d===a.type?"":a.type),E(d=>{var f=a.label,h=a.type===e.selected(),u=a.icon;return f!==d.e&&P(c,"title",d.e=f),h!==d.t&&c.classList.toggle("on",d.t=h),u!==d.a&&(c.innerHTML=d.a=u),d},{e:void 0,t:void 0,a:void 0}),c})()}),null),o})(),m(Ft,{get mount(){return document.getElementById("external")},get children(){return m(So,{get visible(){return e.settingsVisible()},onClose:()=>e.setSettingsVisible(!1),logic:t})}}),m(I,{get when(){return e.selected()},get children(){return m(Ao,{get selected(){return i?.nodeTypes.find(o=>o.type===e.selected())},get setSelected(){return e.setSelected},get kit(){return n.kit}})}})],Ao=({selected:e,setSelected:t,kit:n})=>{const[i,o]=M({x:0,y:0});let s={x:e.defaultWidth/2,y:e.defaultHeight/2};const r=c=>{o({x:c.clientX-s.x,y:c.clientY-s.y})},l=()=>{const c={id:n.randomId("node"),...i(),height:e.defaultHeight,width:e.defaultWidth,data:{label:e.label,component:e.type,extra:e.defaultData}};n.setNodes(d=>[...d,c]),t(""),n.updateNodes(),window.removeEventListener("pointermove",r),window.removeEventListener("keydown",a)},a=c=>{c.key==="Escape"&&(t(""),window.removeEventListener("keydown",a),window.removeEventListener("pointermove",r),window.removeEventListener("pointerup",l))};return ce(()=>{window.addEventListener("pointerup",l,{once:!0}),window.addEventListener("pointermove",r),window.addEventListener("keydown",a),o({x:(window.innerWidth-e.defaultWidth)/2,y:(window.innerHeight-e.defaultHeight)/2})}),(()=>{var c=Lo();return p(c,()=>e.label),E(d=>{var f=e.defaultWidth+"px",h=e.defaultHeight+"px",u=`translate(${i().x}px, ${i().y}px)`;return f!==d.e&&z(c,"width",d.e=f),h!==d.t&&z(c,"height",d.t=h),u!==d.a&&z(c,"transform",d.a=u),d},{e:void 0,t:void 0,a:void 0}),c})()};H(["pointerdown","click"]);const Mo=`
                                <svg
                                        viewBox="0 0 24 24"
                                        fill="none"
                                        stroke="currentColor"
                                        stroke-width="2"
                                        stroke-linecap="round"
                                        stroke-linejoin="round"
                                        style={{ "pointer-events": "none" }}
                                >
                                        <rect
                                                x="3"
                                                y="3"
                                                width="18"
                                                height="18"
                                                rx="2"
                                                ry="2"
                                        />
                                        <line x1="9" y1="3" x2="9" y2="21" />
                                        <line x1="3" y1="9" x2="21" y2="9" />
                                        <line x1="3" y1="15" x2="21" y2="15" />
                                </svg>
`,_o=`
                                <svg
                                        viewBox="0 0 24 24"
                                        fill="none"
                                        stroke="currentColor"
                                        stroke-width="2"
                                        stroke-linecap="round"
                                        stroke-linejoin="round"
                                        style={{ "pointer-events": "none" }}
                                >
                                        <path d="M4 19.5A2.5 2.5 0 0 1 6.5 17H20" />
                                        <path d="M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z" />
                                        <circle cx="12" cy="12" r="2" />
                                        <path d="M12 7v3" />
                                        <path d="M12 14v3" />
                                </svg>
`,zo=`
                                <svg
                                        viewBox="0 0 24 24"
                                        fill="none"
                                        stroke="currentColor"
                                        stroke-width="2"
                                        stroke-linecap="round"
                                        stroke-linejoin="round"
                                        style={{ "pointer-events": "none" }}
                                >
                                        <path d="M9 11l3 3L22 4" />
                                        <path d="M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11" />
                                </svg>
`,To=e=>({nodeTypes:[{type:"fields-node",label:"Fields",description:"A structured set of fields for grouping data.",defaultWidth:250,defaultHeight:160,defaultData:{fields:["field1 : Type","field2"],description:"Enter description here"},icon:Mo},{type:"function-node",label:"Function",description:"Executes a function with inputs and outputs.",defaultWidth:245,defaultHeight:215,defaultData:{inputs:["input1","input2"],outputs:["result"]},icon:_o},{type:"task-node",label:"Tasks",description:"Represents a step or an action in a workflow.",defaultWidth:220,defaultHeight:110,defaultData:{tasks:[{description:"New step",done:!1}]},icon:zo}]}),Do=F({create:e=>{const t=To(),n=ho(),i=go(n,e);return{helper:t,state:n,logic:i,view:(o,s,r,l)=>No(o,s,r,l)}}});var Oo=C("<div class=fields-node><div><textarea></textarea></div><div>"),Io=C("<div style=position:absolute;right:0;height:100%;display:flex;align-items:center;padding-inline:5px;background:#1a73e8;color:white>"),Ro=C("<div class=field-item><div class=field-dot></div><input type=text>");const Ho=e=>{const[t,n]=M(null),i=r=>{e.kit.setNodes(e.index(),"data","extra","description",r)},o=(r,l)=>{l?e.kit.setNodes(e.index(),"data","extra","fields",r,l):e.kit.setNodes(e.index(),"data","extra","fields",e.node.data?.extra?.fields.filter((a,c)=>c!==r))},s=()=>{e.node.data?.extra?.fields?.length,e.kit.setNodes(e.index(),"data","extra","fields",[...e.node.data?.extra?.fields??[],""])};return(()=>{var r=Oo(),l=r.firstChild,a=l.firstChild,c=l.nextSibling;return a.addEventListener("change",()=>e.kit.updateNodes()),a.$$input=d=>i(d.currentTarget.value),p(c,m(j,{get each(){return e.node.data?.extra?.fields||[]},children:(d,f)=>{const[h,u]=M(d),w=S(()=>h().includes(":")&&h().split(":")[1]),v=S(()=>t()===f());let y;return te(()=>{v()&&(y?.focus(),y?.select())}),(()=>{var $=Ro(),g=$.firstChild,b=g.nextSibling;b.addEventListener("change",k=>{o(f(),k.currentTarget.value),e.kit.updateNodes()}),b.$$input=k=>u(k.currentTarget.value),b.$$keydown=k=>{k.key==="Enter"&&s()},b.addEventListener("blur",()=>n(null)),b.addEventListener("focus",()=>n(f()));var x=y;return typeof x=="function"?q(x,b):y=b,p($,m(I,{get when(){return V(()=>!v())()&&w()},get children(){var k=Io();return p(k,()=>d.split(":")[1]),k}}),null),E(()=>b.value=v()?h():h().split(":")[0]),$})()}})),E(()=>a.value=e.node.data?.extra?.description??""),r})()};H(["input","keydown"]);var Vo=C("<div class=function-node><div class=section><div class=section-header>Inputs<button class=btn>+</button></div></div><div class=divider></div><div class=section><div class=section-header>Outputs<button class=btn>+"),jo=C("<div class=input-item><span class=icon></span><input type=text>"),Bo=C("<div class=output-item><span class=icon></span><input type=text>");const Fo=e=>{const t=(r,l)=>{l?e.kit.setNodes(e.index(),"data","extra","inputs",r,l):e.kit.setNodes(e.index(),"data","extra","inputs",e.node.data?.extra?.inputs.filter((a,c)=>c!==r)),e.kit.updateNodes()},n=(r,l)=>{l?e.kit.setNodes(e.index(),"data","extra","outputs",r,l):e.kit.setNodes(e.index(),"data","extra","outputs",e.node.data?.extra?.outputs.filter((a,c)=>c!==r)),e.kit.updateNodes()},i=()=>{s("inputs",["new input",...e.node.data?.extra?.inputs??[]])},o=()=>{s("outputs",["new output",...e.node.data?.extra?.outputs??[]])},s=(r,l)=>{e.kit.setNodes(e.index(),"data","extra",r,l),e.kit.updateNodes()};return(()=>{var r=Vo(),l=r.firstChild,a=l.firstChild,c=a.firstChild,d=c.nextSibling,f=l.nextSibling,h=f.nextSibling,u=h.firstChild,w=u.firstChild,v=w.nextSibling;return d.$$pointerdown=i,p(l,m(j,{get each(){return e.node.data?.extra?.inputs||[]},children:(y,$)=>(()=>{var g=jo(),b=g.firstChild,x=b.nextSibling;return x.addEventListener("change",k=>t($(),k.currentTarget.value)),x.value=y,g})()}),null),v.$$pointerdown=o,p(h,m(j,{get each(){return e.node.data?.extra?.outputs||[]},children:(y,$)=>(()=>{var g=Bo(),b=g.firstChild,x=b.nextSibling;return x.addEventListener("change",k=>n($(),k.currentTarget.value)),x.value=y,g})()}),null),r})()};H(["pointerdown"]);var Uo=C("<div class=task-node><div class=status-badge>"),Xo=C('<svg width=14 height=14 viewBox="0 0 24 24"fill=none stroke=white stroke-width=3 stroke-linecap=round stroke-linejoin=round><polyline points="20 6 9 17 4 12">'),Wo=C("<div class=task-item><div class=checkbox></div><div class=task-content><div><textarea>");const Yo=e=>{const t=S(()=>e.node.data?.extra?.tasks.every(o=>o.done)),n=o=>{e.kit.setNodes(e.index(),"data","extra","tasks",o,"done",s=>!s),e.kit.updateNodes()},i=(o,s)=>{e.kit.setNodes(e.index(),"data","extra","tasks",o,"description",s),e.kit.updateNodes()};return(()=>{var o=Uo(),s=o.firstChild;return p(s,m(I,{get when(){return t()},fallback:" Pending",children:" Completed"})),p(o,m(j,{get each(){return e.node.data?.extra?.tasks},children:(r,l)=>(()=>{var a=Wo(),c=a.firstChild,d=c.nextSibling,f=d.firstChild,h=f.firstChild;return c.$$pointerdown=()=>n(l()),p(c,m(I,{get when(){return r.done},get children(){return Xo()}})),h.addEventListener("change",u=>i(l(),u.currentTarget.value)),E(()=>c.classList.toggle("checked",!!r.done)),E(()=>h.value=r.description),a})()}),null),E(r=>{var l=!!t(),a=!t();return l!==r.e&&s.classList.toggle("completed",r.e=l),a!==r.t&&s.classList.toggle("pending",r.t=a),r},{e:void 0,t:void 0}),o})()};H(["pointerdown"]);var Go=C("<div style=background:#000;width:100vw;height:100vh;display:flex;align-items:center;position:relative><div id=external>");const Ko=()=>{const e=Ue(JSON.parse(localStorage.nodes??"[]")),t=Ue(JSON.parse(localStorage.connections??"[]")),n=M(JSON.parse(localStorage.vp??'{ "x": 0, "y": 0, "zoom": 1 }')),i=r=>{console.log("nodes changed: ",r?.join(", ")),localStorage.nodes=JSON.stringify(G(e[0]))},o=r=>{console.log("connections changed: ",r?.join(", ")),localStorage.connections=JSON.stringify(G(t[0]))},s=()=>{console.log("viewport changed"),localStorage.vp=JSON.stringify(n[0]())};return(()=>{var r=Go(),l=r.firstChild;return p(r,m(Dn,{nodesStore:e,onNodesChange:i,connectionsStore:t,onConnectionsChange:o,viewportSignal:n,onViewportChange:s,gridSize:1,components:{"node-toolbar":ro,"connection-toolbar":lo,"fields-node":Ho,"function-node":Fo,"task-node":Yo},children:a=>[m(Un,{kit:a,get type(){return ct.backgroundType[0]()},absoluteGrid:100}),m(no,{kit:a}),m(Zn,{kit:a}),m(Do,{kit:a})]}),l),r})()};Tt(()=>m(Ko,{}),document.getElementById("root"));
