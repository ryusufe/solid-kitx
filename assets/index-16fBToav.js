(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const i of o)if(i.type==="childList")for(const r of i.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&s(r)}).observe(document,{childList:!0,subtree:!0});function n(o){const i={};return o.integrity&&(i.integrity=o.integrity),o.referrerPolicy&&(i.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?i.credentials="include":o.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(o){if(o.ep)return;o.ep=!0;const i=n(o);fetch(o.href,i)}})();const ut=!1,ft=(e,t)=>e===t,U=Symbol("solid-proxy"),ht=typeof Proxy=="function",Le=Symbol("solid-track"),ve={equals:ft};let Ye=qe;const J=1,we=2,Ke={owned:null,cleanups:null,context:null,owner:null};var A=null;let Ee=null,gt=null,L=null,T=null,K=null,$e=0;function le(e,t){const n=L,s=A,o=e.length===0,i=t===void 0?s:t,r=o?Ke:{owned:null,cleanups:null,context:i?i.context:null,owner:i},l=o?e:()=>e(()=>I(()=>ce(r)));A=r,L=null;try{return te(l,!0)}finally{L=n,A=s}}function M(e,t){t=t?Object.assign({},ve,t):ve;const n={value:e,observers:null,observerSlots:null,comparator:t.equals||void 0},s=o=>(typeof o=="function"&&(o=o(n.value)),Ze(n,o));return[Ge.bind(n),s]}function E(e,t,n){const s=Oe(e,t,!1,J);he(s)}function re(e,t,n){Ye=pt;const s=Oe(e,t,!1,J);(!n||!n.render)&&(s.user=!0),K?K.push(s):he(s)}function S(e,t,n){n=n?Object.assign({},ve,n):ve;const s=Oe(e,t,!0,0);return s.observers=null,s.observerSlots=null,s.comparator=n.equals||void 0,he(s),Ge.bind(s)}function vt(e){return te(e,!1)}function I(e){if(L===null)return e();const t=L;L=null;try{return e()}finally{L=t}}function wt(e,t,n){const s=Array.isArray(e);let o,i=n&&n.defer;return r=>{let l;if(s){l=Array(e.length);for(let c=0;c<e.length;c++)l[c]=e[c]()}else l=e();if(i)return i=!1,r;const a=I(()=>t(l,o,r));return o=l,a}}function fe(e){re(()=>I(e))}function G(e){return A===null||(A.cleanups===null?A.cleanups=[e]:A.cleanups.push(e)),e}function Ae(){return L}function mt(){return A}function yt(e,t){const n=A,s=L;A=e,L=null;try{return te(t,!0)}catch(o){Ie(o)}finally{A=n,L=s}}const[Jo,Qo]=M(!1);function bt(e){const t=S(e),n=S(()=>Ne(t()));return n.toArray=()=>{const s=n();return Array.isArray(s)?s:s!=null?[s]:[]},n}function Ge(){if(this.sources&&this.state)if(this.state===J)he(this);else{const e=T;T=null,te(()=>ye(this),!1),T=e}if(L){const e=this.observers?this.observers.length:0;L.sources?(L.sources.push(this),L.sourceSlots.push(e)):(L.sources=[this],L.sourceSlots=[e]),this.observers?(this.observers.push(L),this.observerSlots.push(L.sources.length-1)):(this.observers=[L],this.observerSlots=[L.sources.length-1])}return this.value}function Ze(e,t,n){let s=e.value;return(!e.comparator||!e.comparator(s,t))&&(e.value=t,e.observers&&e.observers.length&&te(()=>{for(let o=0;o<e.observers.length;o+=1){const i=e.observers[o],r=Ee&&Ee.running;r&&Ee.disposed.has(i),(r?!i.tState:!i.state)&&(i.pure?T.push(i):K.push(i),i.observers&&Je(i)),r||(i.state=J)}if(T.length>1e6)throw T=[],new Error},!1)),t}function he(e){if(!e.fn)return;ce(e);const t=$e;xt(e,e.value,t)}function xt(e,t,n){let s;const o=A,i=L;L=A=e;try{s=e.fn(t)}catch(r){return e.pure&&(e.state=J,e.owned&&e.owned.forEach(ce),e.owned=null),e.updatedAt=n+1,Ie(r)}finally{L=i,A=o}(!e.updatedAt||e.updatedAt<=n)&&(e.updatedAt!=null&&"observers"in e?Ze(e,s):e.value=s,e.updatedAt=n)}function Oe(e,t,n,s=J,o){const i={fn:e,state:s,updatedAt:null,owned:null,sources:null,sourceSlots:null,cleanups:null,value:t,owner:A,context:A?A.context:null,pure:n};return A===null||A!==Ke&&(A.owned?A.owned.push(i):A.owned=[i]),i}function me(e){if(e.state===0)return;if(e.state===we)return ye(e);if(e.suspense&&I(e.suspense.inFallback))return e.suspense.effects.push(e);const t=[e];for(;(e=e.owner)&&(!e.updatedAt||e.updatedAt<$e);)e.state&&t.push(e);for(let n=t.length-1;n>=0;n--)if(e=t[n],e.state===J)he(e);else if(e.state===we){const s=T;T=null,te(()=>ye(e,t[0]),!1),T=s}}function te(e,t){if(T)return e();let n=!1;t||(T=[]),K?n=!0:K=[],$e++;try{const s=e();return kt(n),s}catch(s){n||(K=null),T=null,Ie(s)}}function kt(e){if(T&&(qe(T),T=null),e)return;const t=K;K=null,t.length&&te(()=>Ye(t),!1)}function qe(e){for(let t=0;t<e.length;t++)me(e[t])}function pt(e){let t,n=0;for(t=0;t<e.length;t++){const s=e[t];s.user?e[n++]=s:me(s)}for(t=0;t<n;t++)me(e[t])}function ye(e,t){e.state=0;for(let n=0;n<e.sources.length;n+=1){const s=e.sources[n];if(s.sources){const o=s.state;o===J?s!==t&&(!s.updatedAt||s.updatedAt<$e)&&me(s):o===we&&ye(s,t)}}}function Je(e){for(let t=0;t<e.observers.length;t+=1){const n=e.observers[t];n.state||(n.state=we,n.pure?T.push(n):K.push(n),n.observers&&Je(n))}}function ce(e){let t;if(e.sources)for(;e.sources.length;){const n=e.sources.pop(),s=e.sourceSlots.pop(),o=n.observers;if(o&&o.length){const i=o.pop(),r=n.observerSlots.pop();s<o.length&&(i.sourceSlots[r]=s,o[s]=i,n.observerSlots[s]=r)}}if(e.tOwned){for(t=e.tOwned.length-1;t>=0;t--)ce(e.tOwned[t]);delete e.tOwned}if(e.owned){for(t=e.owned.length-1;t>=0;t--)ce(e.owned[t]);e.owned=null}if(e.cleanups){for(t=e.cleanups.length-1;t>=0;t--)e.cleanups[t]();e.cleanups=null}e.state=0}function $t(e){return e instanceof Error?e:new Error(typeof e=="string"?e:"Unknown error",{cause:e})}function Ie(e,t=A){throw $t(e)}function Ne(e){if(typeof e=="function"&&!e.length)return Ne(e());if(Array.isArray(e)){const t=[];for(let n=0;n<e.length;n++){const s=Ne(e[n]);Array.isArray(s)?t.push.apply(t,s):t.push(s)}return t}return e}const Ct=Symbol("fallback");function Ve(e){for(let t=0;t<e.length;t++)e[t]()}function St(e,t,n={}){let s=[],o=[],i=[],r=0,l=t.length>1?[]:null;return G(()=>Ve(i)),()=>{let a=e()||[],c=a.length,d,u;return a[Le],I(()=>{let f,g,v,m,y,w,x,$,C;if(c===0)r!==0&&(Ve(i),i=[],s=[],o=[],r=0,l&&(l=[])),n.fallback&&(s=[Ct],o[0]=le(N=>(i[0]=N,n.fallback())),r=1);else if(r===0){for(o=new Array(c),u=0;u<c;u++)s[u]=a[u],o[u]=le(h);r=c}else{for(v=new Array(c),m=new Array(c),l&&(y=new Array(c)),w=0,x=Math.min(r,c);w<x&&s[w]===a[w];w++);for(x=r-1,$=c-1;x>=w&&$>=w&&s[x]===a[$];x--,$--)v[$]=o[x],m[$]=i[x],l&&(y[$]=l[x]);for(f=new Map,g=new Array($+1),u=$;u>=w;u--)C=a[u],d=f.get(C),g[u]=d===void 0?-1:d,f.set(C,u);for(d=w;d<=x;d++)C=s[d],u=f.get(C),u!==void 0&&u!==-1?(v[u]=o[d],m[u]=i[d],l&&(y[u]=l[d]),u=g[u],f.set(C,u)):i[d]();for(u=w;u<c;u++)u in v?(o[u]=v[u],i[u]=m[u],l&&(l[u]=y[u],l[u](u))):o[u]=le(h);o=o.slice(0,r=c),s=a.slice(0)}return o});function h(f){if(i[u]=f,l){const[g,v]=M(u);return l[u]=v,t(a[u],g)}return t(a[u])}}}function b(e,t){return I(()=>e(t||{}))}function ge(){return!0}const je={get(e,t,n){return t===U?n:e.get(t)},has(e,t){return t===U?!0:e.has(t)},set:ge,deleteProperty:ge,getOwnPropertyDescriptor(e,t){return{configurable:!0,enumerable:!0,get(){return e.get(t)},set:ge,deleteProperty:ge}},ownKeys(e){return e.keys()}};function Qe(e,...t){const n=t.length;if(ht&&U in e){const o=n>1?t.flat():t[0],i=t.map(r=>new Proxy({get(l){return r.includes(l)?e[l]:void 0},has(l){return r.includes(l)&&l in e},keys(){return r.filter(l=>l in e)}},je));return i.push(new Proxy({get(r){return o.includes(r)?void 0:e[r]},has(r){return o.includes(r)?!1:r in e},keys(){return Object.keys(e).filter(r=>!o.includes(r))}},je)),i}const s=[];for(let o=0;o<=n;o++)s[o]={};for(const o of Object.getOwnPropertyNames(e)){let i=n;for(let a=0;a<t.length;a++)if(t[a].includes(o)){i=a;break}const r=Object.getOwnPropertyDescriptor(e,o);!r.get&&!r.set&&r.enumerable&&r.writable&&r.configurable?s[i][o]=r.value:Object.defineProperty(s[i],o,r)}return s}const et=e=>`Stale read from <${e}>.`;function F(e){const t="fallback"in e&&{fallback:()=>e.fallback};return S(St(()=>e.each,e.children,t||void 0))}function O(e){const t=e.keyed,n=S(()=>e.when,void 0,void 0),s=t?n:S(n,void 0,{equals:(o,i)=>!o==!i});return S(()=>{const o=s();if(o){const i=e.children;return typeof i=="function"&&i.length>0?I(()=>i(t?o:()=>{if(!I(s))throw et("Show");return n()})):i}return e.fallback},void 0,void 0)}function Re(e){const t=bt(()=>e.children),n=S(()=>{const s=t(),o=Array.isArray(s)?s:[s];let i=()=>{};for(let r=0;r<o.length;r++){const l=r,a=o[r],c=i,d=S(()=>c()?void 0:a.when,void 0,void 0),u=a.keyed?d:S(d,void 0,{equals:(h,f)=>!h==!f});i=()=>c()||(u()?[l,d,a]:void 0)}return i});return S(()=>{const s=n()();if(!s)return e.fallback;const[o,i,r]=s,l=r.children;return typeof l=="function"&&l.length>0?I(()=>l(r.keyed?i():()=>{if(I(n)()?.[0]!==o)throw et("Match");return i()})):l},void 0,void 0)}function ae(e){return e}const Et=["allowfullscreen","async","alpha","autofocus","autoplay","checked","controls","default","disabled","formnovalidate","hidden","indeterminate","inert","ismap","loop","multiple","muted","nomodule","novalidate","open","playsinline","readonly","required","reversed","seamless","selected","adauctionheaders","browsingtopics","credentialless","defaultchecked","defaultmuted","defaultselected","defer","disablepictureinpicture","disableremoteplayback","preservespitch","shadowrootclonable","shadowrootcustomelementregistry","shadowrootdelegatesfocus","shadowrootserializable","sharedstoragewritable"],Pt=new Set(["className","value","readOnly","noValidate","formNoValidate","isMap","noModule","playsInline","adAuctionHeaders","allowFullscreen","browsingTopics","defaultChecked","defaultMuted","defaultSelected","disablePictureInPicture","disableRemotePlayback","preservesPitch","shadowRootClonable","shadowRootCustomElementRegistry","shadowRootDelegatesFocus","shadowRootSerializable","sharedStorageWritable",...Et]),Lt=new Set(["innerHTML","textContent","innerText","children"]),At=Object.assign(Object.create(null),{className:"class",htmlFor:"for"}),Nt=Object.assign(Object.create(null),{class:"className",novalidate:{$:"noValidate",FORM:1},formnovalidate:{$:"formNoValidate",BUTTON:1,INPUT:1},ismap:{$:"isMap",IMG:1},nomodule:{$:"noModule",SCRIPT:1},playsinline:{$:"playsInline",VIDEO:1},readonly:{$:"readOnly",INPUT:1,TEXTAREA:1},adauctionheaders:{$:"adAuctionHeaders",IFRAME:1},allowfullscreen:{$:"allowFullscreen",IFRAME:1},browsingtopics:{$:"browsingTopics",IMG:1},defaultchecked:{$:"defaultChecked",INPUT:1},defaultmuted:{$:"defaultMuted",AUDIO:1,VIDEO:1},defaultselected:{$:"defaultSelected",OPTION:1},disablepictureinpicture:{$:"disablePictureInPicture",VIDEO:1},disableremoteplayback:{$:"disableRemotePlayback",AUDIO:1,VIDEO:1},preservespitch:{$:"preservesPitch",AUDIO:1,VIDEO:1},shadowrootclonable:{$:"shadowRootClonable",TEMPLATE:1},shadowrootdelegatesfocus:{$:"shadowRootDelegatesFocus",TEMPLATE:1},shadowrootserializable:{$:"shadowRootSerializable",TEMPLATE:1},sharedstoragewritable:{$:"sharedStorageWritable",IFRAME:1,IMG:1}});function Mt(e,t){const n=Nt[e];return typeof n=="object"?n[t]?n.$:void 0:n}const _t=new Set(["beforeinput","click","dblclick","contextmenu","focusin","focusout","input","keydown","keyup","mousedown","mousemove","mouseout","mouseover","mouseup","pointerdown","pointermove","pointerout","pointerover","pointerup","touchend","touchmove","touchstart"]),zt=new Set(["altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignObject","g","glyph","glyphRef","hkern","image","line","linearGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","set","stop","svg","switch","symbol","text","textPath","tref","tspan","use","view","vkern"]),Tt={xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace"},B=e=>S(()=>e());function Dt(e,t,n){let s=n.length,o=t.length,i=s,r=0,l=0,a=t[o-1].nextSibling,c=null;for(;r<o||l<i;){if(t[r]===n[l]){r++,l++;continue}for(;t[o-1]===n[i-1];)o--,i--;if(o===r){const d=i<s?l?n[l-1].nextSibling:n[i-l]:a;for(;l<i;)e.insertBefore(n[l++],d)}else if(i===l)for(;r<o;)(!c||!c.has(t[r]))&&t[r].remove(),r++;else if(t[r]===n[i-1]&&n[l]===t[o-1]){const d=t[--o].nextSibling;e.insertBefore(n[l++],t[r++].nextSibling),e.insertBefore(n[--i],d),t[o]=n[i]}else{if(!c){c=new Map;let u=l;for(;u<i;)c.set(n[u],u++)}const d=c.get(t[r]);if(d!=null)if(l<d&&d<i){let u=r,h=1,f;for(;++u<o&&u<i&&!((f=c.get(t[u]))==null||f!==d+h);)h++;if(h>d-l){const g=t[r];for(;l<d;)e.insertBefore(n[l++],g)}else e.replaceChild(n[l++],t[r++])}else r++;else t[r++].remove()}}}const Be="_$DX_DELEGATE";function Ot(e,t,n,s={}){let o;return le(i=>{o=i,t===document?e():k(t,e(),t.firstChild?null:void 0,n)},s.owner),()=>{o(),t.textContent=""}}function p(e,t,n,s){let o;const i=()=>{const l=s?document.createElementNS("http://www.w3.org/1998/Math/MathML","template"):document.createElement("template");return l.innerHTML=e,n?l.content.firstChild.firstChild:s?l.firstChild:l.content.firstChild},r=t?()=>I(()=>document.importNode(o||(o=i()),!0)):()=>(o||(o=i())).cloneNode(!0);return r.cloneNode=r,r}function j(e,t=window.document){const n=t[Be]||(t[Be]=new Set);for(let s=0,o=e.length;s<o;s++){const i=e[s];n.has(i)||(n.add(i),t.addEventListener(i,Ft))}}function P(e,t,n){n==null?e.removeAttribute(t):e.setAttribute(t,n)}function It(e,t,n,s){s==null?e.removeAttributeNS(t,n):e.setAttributeNS(t,n,s)}function Rt(e,t,n){n?e.setAttribute(t,""):e.removeAttribute(t)}function tt(e,t){t==null?e.removeAttribute("class"):e.className=t}function R(e,t,n,s){if(s)Array.isArray(n)?(e[`$$${t}`]=n[0],e[`$$${t}Data`]=n[1]):e[`$$${t}`]=n;else if(Array.isArray(n)){const o=n[0];e.addEventListener(t,n[0]=i=>o.call(e,n[1],i))}else e.addEventListener(t,n,typeof n!="function"&&n)}function Ht(e,t,n={}){const s=Object.keys(t||{}),o=Object.keys(n);let i,r;for(i=0,r=o.length;i<r;i++){const l=o[i];!l||l==="undefined"||t[l]||(Fe(e,l,!1),delete n[l])}for(i=0,r=s.length;i<r;i++){const l=s[i],a=!!t[l];!l||l==="undefined"||n[l]===a||!a||(Fe(e,l,!0),n[l]=a)}return n}function Ce(e,t,n){if(!t)return n?P(e,"style"):t;const s=e.style;if(typeof t=="string")return s.cssText=t;typeof n=="string"&&(s.cssText=n=void 0),n||(n={}),t||(t={});let o,i;for(i in n)t[i]==null&&s.removeProperty(i),delete n[i];for(i in t)o=t[i],o!==n[i]&&(s.setProperty(i,o),n[i]=o);return n}function z(e,t,n){n!=null?e.style.setProperty(t,n):e.style.removeProperty(t)}function Vt(e,t={},n,s){const o={};return E(()=>o.children=de(e,t.children,o.children)),E(()=>typeof t.ref=="function"&&ee(t.ref,e)),E(()=>jt(e,t,n,!0,o,!0)),o}function ee(e,t,n){return I(()=>e(t,n))}function k(e,t,n,s){if(n!==void 0&&!s&&(s=[]),typeof t!="function")return de(e,t,s,n);E(o=>de(e,t(),o,n),s)}function jt(e,t,n,s,o={},i=!1){t||(t={});for(const r in o)if(!(r in t)){if(r==="children")continue;o[r]=Ue(e,r,null,o[r],n,i,t)}for(const r in t){if(r==="children")continue;const l=t[r];o[r]=Ue(e,r,l,o[r],n,i,t)}}function Bt(e){return e.toLowerCase().replace(/-([a-z])/g,(t,n)=>n.toUpperCase())}function Fe(e,t,n){const s=t.trim().split(/\s+/);for(let o=0,i=s.length;o<i;o++)e.classList.toggle(s[o],n)}function Ue(e,t,n,s,o,i,r){let l,a,c,d,u;if(t==="style")return Ce(e,n,s);if(t==="classList")return Ht(e,n,s);if(n===s)return s;if(t==="ref")i||n(e);else if(t.slice(0,3)==="on:"){const h=t.slice(3);s&&e.removeEventListener(h,s,typeof s!="function"&&s),n&&e.addEventListener(h,n,typeof n!="function"&&n)}else if(t.slice(0,10)==="oncapture:"){const h=t.slice(10);s&&e.removeEventListener(h,s,!0),n&&e.addEventListener(h,n,!0)}else if(t.slice(0,2)==="on"){const h=t.slice(2).toLowerCase(),f=_t.has(h);if(!f&&s){const g=Array.isArray(s)?s[0]:s;e.removeEventListener(h,g)}(f||n)&&(R(e,h,n,f),f&&j([h]))}else if(t.slice(0,5)==="attr:")P(e,t.slice(5),n);else if(t.slice(0,5)==="bool:")Rt(e,t.slice(5),n);else if((u=t.slice(0,5)==="prop:")||(c=Lt.has(t))||!o&&((d=Mt(t,e.tagName))||(a=Pt.has(t)))||(l=e.nodeName.includes("-")||"is"in r))u&&(t=t.slice(5),a=!0),t==="class"||t==="className"?tt(e,n):l&&!a&&!c?e[Bt(t)]=n:e[d||t]=n;else{const h=o&&t.indexOf(":")>-1&&Tt[t.split(":")[0]];h?It(e,h,t,n):P(e,At[t]||t,n)}return n}function Ft(e){let t=e.target;const n=`$$${e.type}`,s=e.target,o=e.currentTarget,i=a=>Object.defineProperty(e,"target",{configurable:!0,value:a}),r=()=>{const a=t[n];if(a&&!t.disabled){const c=t[`${n}Data`];if(c!==void 0?a.call(t,c,e):a.call(t,e),e.cancelBubble)return}return t.host&&typeof t.host!="string"&&!t.host._$host&&t.contains(e.target)&&i(t.host),!0},l=()=>{for(;r()&&(t=t._$host||t.parentNode||t.host););};if(Object.defineProperty(e,"currentTarget",{configurable:!0,get(){return t||document}}),e.composedPath){const a=e.composedPath();i(a[0]);for(let c=0;c<a.length-2&&(t=a[c],!!r());c++){if(t._$host){t=t._$host,l();break}if(t.parentNode===o)break}}else l();i(s)}function de(e,t,n,s,o){for(;typeof n=="function";)n=n();if(t===n)return n;const i=typeof t,r=s!==void 0;if(e=r&&n[0]&&n[0].parentNode||e,i==="string"||i==="number"){if(i==="number"&&(t=t.toString(),t===n))return n;if(r){let l=n[0];l&&l.nodeType===3?l.data!==t&&(l.data=t):l=document.createTextNode(t),n=ne(e,n,s,l)}else n!==""&&typeof n=="string"?n=e.firstChild.data=t:n=e.textContent=t}else if(t==null||i==="boolean")n=ne(e,n,s);else{if(i==="function")return E(()=>{let l=t();for(;typeof l=="function";)l=l();n=de(e,l,n,s)}),()=>n;if(Array.isArray(t)){const l=[],a=n&&Array.isArray(n);if(Me(l,t,n,o))return E(()=>n=de(e,l,n,s,!0)),()=>n;if(l.length===0){if(n=ne(e,n,s),r)return n}else a?n.length===0?Xe(e,l,s):Dt(e,n,l):(n&&ne(e),Xe(e,l));n=l}else if(t.nodeType){if(Array.isArray(n)){if(r)return n=ne(e,n,s,t);ne(e,n,null,t)}else n==null||n===""||!e.firstChild?e.appendChild(t):e.replaceChild(t,e.firstChild);n=t}}return n}function Me(e,t,n,s){let o=!1;for(let i=0,r=t.length;i<r;i++){let l=t[i],a=n&&n[e.length],c;if(!(l==null||l===!0||l===!1))if((c=typeof l)=="object"&&l.nodeType)e.push(l);else if(Array.isArray(l))o=Me(e,l,a)||o;else if(c==="function")if(s){for(;typeof l=="function";)l=l();o=Me(e,Array.isArray(l)?l:[l],Array.isArray(a)?a:[a])||o}else e.push(l),o=!0;else{const d=String(l);a&&a.nodeType===3&&a.data===d?e.push(a):e.push(document.createTextNode(d))}}return o}function Xe(e,t,n=null){for(let s=0,o=t.length;s<o;s++)e.insertBefore(t[s],n)}function ne(e,t,n,s){if(n===void 0)return e.textContent="";const o=s||document.createTextNode("");if(t.length){let i=!1;for(let r=t.length-1;r>=0;r--){const l=t[r];if(o!==l){const a=l.parentNode===e;!i&&!r?a?e.replaceChild(o,l):e.insertBefore(o,n):a&&l.remove()}else i=!0}}else e.insertBefore(o,n);return[o]}const Ut="http://www.w3.org/2000/svg";function nt(e,t=!1,n=void 0){return t?document.createElementNS(Ut,e):document.createElement(e,{is:n})}function Xt(e){const{useShadow:t}=e,n=document.createTextNode(""),s=()=>e.mount||document.body,o=mt();let i;return re(()=>{i||(i=yt(o,()=>S(()=>e.children)));const r=s();if(r instanceof HTMLHeadElement){const[l,a]=M(!1),c=()=>a(!0);le(d=>k(r,()=>l()?d():i(),null)),G(c)}else{const l=nt(e.isSVG?"g":"div",e.isSVG),a=t&&l.attachShadow?l.attachShadow({mode:"open"}):l;Object.defineProperty(l,"_$host",{get(){return n.parentNode},configurable:!0}),k(a,i),r.appendChild(l),e.ref&&e.ref(l),G(()=>r.removeChild(l))}},void 0,{render:!0}),n}function Wt(e,t){const n=S(e);return S(()=>{const s=n();switch(typeof s){case"function":return I(()=>s(t));case"string":const o=zt.has(s),i=nt(s,o,I(()=>t.is));return Vt(i,t,o),i}})}function _e(e){const[,t]=Qe(e,["component"]);return Wt(()=>e.component,t)}const X=e=>t=>{const{helper:n,state:s,logic:o,view:i}=e.create(t);return i(s,o,t,n)},ze=Symbol("store-raw"),ie=Symbol("store-node"),Y=Symbol("store-has"),ot=Symbol("store-self");function it(e){let t=e[U];if(!t&&(Object.defineProperty(e,U,{value:t=new Proxy(e,Gt)}),!Array.isArray(e))){const n=Object.keys(e),s=Object.getOwnPropertyDescriptors(e);for(let o=0,i=n.length;o<i;o++){const r=n[o];s[r].get&&Object.defineProperty(e,r,{enumerable:s[r].enumerable,get:s[r].get.bind(t)})}}return t}function Z(e){let t;return e!=null&&typeof e=="object"&&(e[U]||!(t=Object.getPrototypeOf(e))||t===Object.prototype||Array.isArray(e))}function V(e,t=new Set){let n,s,o,i;if(n=e!=null&&e[ze])return n;if(!Z(e)||t.has(e))return e;if(Array.isArray(e)){Object.isFrozen(e)?e=e.slice(0):t.add(e);for(let r=0,l=e.length;r<l;r++)o=e[r],(s=V(o,t))!==o&&(e[r]=s)}else{Object.isFrozen(e)?e=Object.assign({},e):t.add(e);const r=Object.keys(e),l=Object.getOwnPropertyDescriptors(e);for(let a=0,c=r.length;a<c;a++)i=r[a],!l[i].get&&(o=e[i],(s=V(o,t))!==o&&(e[i]=s))}return e}function be(e,t){let n=e[t];return n||Object.defineProperty(e,t,{value:n=Object.create(null)}),n}function ue(e,t,n){if(e[t])return e[t];const[s,o]=M(n,{equals:!1,internal:!0});return s.$=o,e[t]=s}function Yt(e,t){const n=Reflect.getOwnPropertyDescriptor(e,t);return!n||n.get||!n.configurable||t===U||t===ie||(delete n.value,delete n.writable,n.get=()=>e[U][t]),n}function rt(e){Ae()&&ue(be(e,ie),ot)()}function Kt(e){return rt(e),Reflect.ownKeys(e)}const Gt={get(e,t,n){if(t===ze)return e;if(t===U)return n;if(t===Le)return rt(e),n;const s=be(e,ie),o=s[t];let i=o?o():e[t];if(t===ie||t===Y||t==="__proto__")return i;if(!o){const r=Object.getOwnPropertyDescriptor(e,t);Ae()&&(typeof i!="function"||e.hasOwnProperty(t))&&!(r&&r.get)&&(i=ue(s,t,i)())}return Z(i)?it(i):i},has(e,t){return t===ze||t===U||t===Le||t===ie||t===Y||t==="__proto__"?!0:(Ae()&&ue(be(e,Y),t)(),t in e)},set(){return!0},deleteProperty(){return!0},ownKeys:Kt,getOwnPropertyDescriptor:Yt};function H(e,t,n,s=!1){if(!s&&e[t]===n)return;const o=e[t],i=e.length;n===void 0?(delete e[t],e[Y]&&e[Y][t]&&o!==void 0&&e[Y][t].$()):(e[t]=n,e[Y]&&e[Y][t]&&o===void 0&&e[Y][t].$());let r=be(e,ie),l;if((l=ue(r,t,o))&&l.$(()=>n),Array.isArray(e)&&e.length!==i){for(let a=e.length;a<i;a++)(l=r[a])&&l.$();(l=ue(r,"length",i))&&l.$(e.length)}(l=r[ot])&&l.$()}function st(e,t){const n=Object.keys(t);for(let s=0;s<n.length;s+=1){const o=n[s];H(e,o,t[o])}}function Zt(e,t){if(typeof t=="function"&&(t=t(e)),t=V(t),Array.isArray(t)){if(e===t)return;let n=0,s=t.length;for(;n<s;n++){const o=t[n];e[n]!==o&&H(e,n,o)}H(e,"length",s)}else st(e,t)}function se(e,t,n=[]){let s,o=e;if(t.length>1){s=t.shift();const r=typeof s,l=Array.isArray(e);if(Array.isArray(s)){for(let a=0;a<s.length;a++)se(e,[s[a]].concat(t),n);return}else if(l&&r==="function"){for(let a=0;a<e.length;a++)s(e[a],a)&&se(e,[a].concat(t),n);return}else if(l&&r==="object"){const{from:a=0,to:c=e.length-1,by:d=1}=s;for(let u=a;u<=c;u+=d)se(e,[u].concat(t),n);return}else if(t.length>1){se(e[s],t,[s].concat(n));return}o=e[s],n=[s].concat(n)}let i=t[0];typeof i=="function"&&(i=i(o,n),i===o)||s===void 0&&i==null||(i=V(i),s===void 0||Z(o)&&Z(i)&&!Array.isArray(i)?st(o,i):H(e,s,i))}function We(...[e,t]){const n=V(e||{}),s=Array.isArray(n),o=it(n);function i(...r){vt(()=>{s&&r.length===1?Zt(n,r[0]):se(n,r)})}return[o,i]}const Te=Symbol("store-root");function oe(e,t,n,s,o){const i=t[n];if(e===i)return;const r=Array.isArray(e);if(n!==Te&&(!Z(e)||!Z(i)||r!==Array.isArray(i)||o&&e[o]!==i[o])){H(t,n,e);return}if(r){if(e.length&&i.length&&(!s||o&&e[0]&&e[0][o]!=null)){let c,d,u,h,f,g,v,m;for(u=0,h=Math.min(i.length,e.length);u<h&&(i[u]===e[u]||o&&i[u]&&e[u]&&i[u][o]&&i[u][o]===e[u][o]);u++)oe(e[u],i,u,s,o);const y=new Array(e.length),w=new Map;for(h=i.length-1,f=e.length-1;h>=u&&f>=u&&(i[h]===e[f]||o&&i[h]&&e[f]&&i[h][o]&&i[h][o]===e[f][o]);h--,f--)y[f]=i[h];if(u>f||u>h){for(d=u;d<=f;d++)H(i,d,e[d]);for(;d<e.length;d++)H(i,d,y[d]),oe(e[d],i,d,s,o);i.length>e.length&&H(i,"length",e.length);return}for(v=new Array(f+1),d=f;d>=u;d--)g=e[d],m=o&&g?g[o]:g,c=w.get(m),v[d]=c===void 0?-1:c,w.set(m,d);for(c=u;c<=h;c++)g=i[c],m=o&&g?g[o]:g,d=w.get(m),d!==void 0&&d!==-1&&(y[d]=i[c],d=v[d],w.set(m,d));for(d=u;d<e.length;d++)d in y?(H(i,d,y[d]),oe(e[d],i,d,s,o)):H(i,d,e[d])}else for(let c=0,d=e.length;c<d;c++)oe(e[c],i,c,s,o);i.length>e.length&&H(i,"length",e.length);return}const l=Object.keys(e);for(let c=0,d=l.length;c<d;c++)oe(e[l[c]],i,l[c],s,o);const a=Object.keys(i);for(let c=0,d=a.length;c<d;c++)e[a[c]]===void 0&&H(i,a[c],void 0)}function q(e,t={}){const{merge:n,key:s="id"}=t,o=V(e);return i=>{if(!Z(i)||!Z(o))return o;const r=oe(o,{[Te]:i},Te,n,s);return r===void 0?i:r}}const qt=["disableZoom","minZoom","maxZoom","disableNodeDrag","disableEdgeDrag","gridSize","minNodeWidth","maxNodeWidth","minNodeHeight","maxNodeHeight","defaultNode","disableNodeAnchors","disableAnchorConnectionCreation","disableKeyboardShortcuts","disableHorizontalPan","disableVerticalPan"];function Jt(){const[e,t]=M({nodes:[],connections:[]});return{getConnections:()=>e().connections,getNodes:()=>e().nodes,get:e,set:t,getMerged:()=>[...e().nodes,...e().connections],setConnections:u=>t({...e(),connections:u}),setNodes:u=>t({...e(),nodes:u}),addItem:(u,h)=>{t(h==="node"?f=>({...f,nodes:[...f.nodes,u]}):f=>({...f,connections:[...f.connections,u]}))},removeItem:(u,h)=>{t(h==="node"?f=>({...f,nodes:f.nodes.filter(g=>g!==u)}):f=>({...f,connections:f.connections.filter(g=>g!==u)}))},length:()=>e().nodes.length+e().connections.length,clear:()=>t({nodes:[],connections:[]})}}const Qt=e=>{const[t,n]=e.nodesStore,[s,o]=e.connectionsStore,[i,r]=e.viewportSignal,[l,a]=M(!1),c=Jt(),[d,u]=M(null),h=()=>e.onViewportChange?.(i()),f=y=>y+"-"+Math.random().toString(36).substring(2,10),g=y=>{e.onNodesChange(V(t))},v=y=>{e.onConnectionsChange(V(s))},[m]=Qe(e,qt);return{nodes:t,setNodes:n,connections:s,setConnections:o,viewport:i,setViewport:r,focus:l,setFocus:a,selection:c,activeConnectionDestination:d,setActiveConnectionDestination:u,activeConnection:{},container:null,updateNodes:g,updateConnections:v,updateViewport:h,randomId:f,configs:m}},en=(e,t)=>{let n;const s=Qt(e),o=()=>{const r=e.children;return typeof r=="function"?r(s):r},i=S(()=>s.viewport());return{kit:s,containerRef:n,Children:o,vp:i}},De=(e,t)=>Math.round(e/t)*t,xe=(e,t,n,s)=>s?{x:(e-s.left-n.x)/n.zoom,y:(t-s.top-n.y)/n.zoom}:null,ke=(e,t,n,s)=>{const o=(e-t)/n;return s?De(o,s):o},lt=()=>{document.documentElement.style.userSelect="none"},ct=()=>{document.documentElement.style.userSelect="auto"},He=e=>{let t=!1,n,s=null,o=null,i=null;const r=c=>{!t||n===void 0||c.pointerId!==s||(e.preventDefault&&c.preventDefault(),e.onMove(c,n))},l=c=>{!t||c.pointerId!==s||(t=!1,e.preventDefault&&c.preventDefault(),e.onEnd&&n!==void 0&&e.onEnd(c,n),e.disableSelection&&ct(),i?.abort(),i=null,o&&o.hasPointerCapture(c.pointerId)&&o.releasePointerCapture(c.pointerId),s=null,o=null)};return{onPointerDown:c=>{if(t)return;const d=e.onStart?.(c);if(d===void 0)return;e.stopPropagation&&c.stopPropagation(),e.preventDefault&&c.preventDefault(),t=!0,n=d,s=c.pointerId,e.disableSelection&&lt(),i=new AbortController;const u=c.currentTarget;u&&u.setPointerCapture&&(u.setPointerCapture(c.pointerId),o=u),window.addEventListener("pointermove",r,{signal:i.signal}),window.addEventListener("pointerup",l,{signal:i.signal}),window.addEventListener("pointercancel",l,{signal:i.signal})}}};function Pe(e,t,n,s){re(()=>{const o=e();o&&(t()?o.addEventListener(n,s):o.removeEventListener(n,s))})}const tn=(e,t,n)=>{let s={x:0,y:0,zoom:1};const o=new Map;let i=0;const r=f=>{if(!e.kit.focus()&&!f.target.closest(".node")){if(o.set(f.pointerId,{x:f.clientX,y:f.clientY}),o.size===1&&(s=e.kit.viewport()),o.size===2){const[g,v]=Array.from(o.values());g&&v&&(i=Math.hypot(g.x-v.x,g.y-v.y))}window.addEventListener("pointermove",l),window.addEventListener("pointerup",a),window.addEventListener("pointercancel",a)}},l=f=>{if(!o.has(f.pointerId)||t.disableHorizontalPan&&t.disableVerticalPan)return;const g=o.get(f.pointerId);if(g){if(o.set(f.pointerId,{x:f.clientX,y:f.clientY}),o.size===2&&i>0){f.preventDefault();const[v,m]=Array.from(o.values());if(!v||!m)return;const w=Math.hypot(v.x-m.x,v.y-m.y)/i,x=Math.max(.1,Math.min(5,s.zoom*w)),$=(v.x+m.x)/2,C=(v.y+m.y)/2,N=e.containerRef?.getBoundingClientRect();if(!N)return;const _=$-N.left,D=C-N.top,W=_-(_-s.x)*(x/s.zoom),Q=D-(D-s.y)*(x/s.zoom);e.kit.setViewport({zoom:x,x:W,y:Q})}else if(o.size===1){const v=t.disableHorizontalPan?0:f.clientX-g.x,m=t.disableVerticalPan?0:f.clientY-g.y,y=e.kit.viewport();e.kit.setViewport({...y,x:y.x+v,y:y.y+m})}}},a=f=>{o.delete(f.pointerId),o.size===0&&(s!==e.kit.viewport()&&e.kit.updateViewport(),window.removeEventListener("pointermove",l),window.removeEventListener("pointerup",a),window.removeEventListener("pointercancel",a),i=0)},c=f=>{if(e.kit.focus())return;f.preventDefault();const g=f.currentTarget.getBoundingClientRect(),v=f.clientX-g.left,m=f.clientY-g.top,y=e.kit.viewport(),w=y.zoom,x=Math.max(t.maxZoom??.1,Math.min(t.minZoom??5,w-f.deltaY*.001)),$=(v-y.x)/w,C=(m-y.y)/w,N=v-$*x,_=m-C*x;e.kit.setViewport({zoom:x,x:N,y:_})},d=()=>{s!==e.kit.viewport()&&(e.kit.updateViewport(),s=e.kit.viewport())},u=()=>{e.containerRef&&(e.kit.container=e.containerRef)},h=f=>{const g=e.kit.selection;if(f.key==="Delete"&&g.length()>0){const v=g.getConnections(),m=g.getNodes();e.kit.setConnections(q(e.kit.connections.filter(y=>!v.includes(y.id)&&!m.includes(y.from.id)&&!m.includes(y.to.id)))),e.kit.setNodes(q(e.kit.nodes.filter(y=>!m.includes(y.id)))),v.length>0&&e.kit.updateConnections(),m.length>0&&e.kit.updateNodes(),g.clear()}};return Pe(()=>e.containerRef,()=>!t.disableZoom,"wheel",c),Pe(()=>window,()=>!t.disableZoom,"scrollend",d),Pe(()=>e.containerRef,()=>!t.disableKeyboardShortcuts,"keydown",h),fe(()=>{u()}),G(()=>{window.removeEventListener("scrollend",d),window.removeEventListener("pointermove",l),window.removeEventListener("pointerup",a),window.removeEventListener("pointercancel",a)}),{onPointerDown:r}};function at({start:e,startPos:t,end:n,endPos:s,curve:o=9}){const i=u=>u>0?.5*u:u===0?o*5:o*Math.sqrt(-u),r=(u,h,f)=>u==="left"?[h.x-i(h.x-f.x),h.y]:u==="right"?[h.x+i(f.x-h.x),h.y]:u==="top"?[h.x,h.y-i(h.y-f.y)]:[h.x,h.y+i(f.y-h.y)],[l,a]=r(t,e,n),[c,d]=r(s,n,e);return`M${e.x},${e.y} C${l},${a} ${c},${d} ${n.x},${n.y}`}const nn=(e,t)=>{let n,s;const o=S(()=>e.kit.selection.getConnections().includes(e.connection.id)),i=S(()=>{const{from:a,to:c}=e.connection,d=t?.getNodeRect(a.id),u=t?.getNodeRect(c.id),h=(f,g)=>{switch(g){case"top":return{x:f.x+f.width/2,y:f.y};case"bottom":return{x:f.x+f.width/2,y:f.y+f.height};case"left":return{x:f.x,y:f.y+f.height/2};case"right":return{x:f.x+f.width,y:f.y+f.height/2}}};return{source:h(d,a.side),target:h(u,c.side)}}),r=S(()=>({x:(i().source.x+i().target.x)/2,y:(i().source.y+i().target.y)/2})),l=S(()=>{const{source:a,target:c}=i(),{from:d,to:u}=e.connection;return at({start:a,startPos:d.side,end:c,endPos:u.side})});return{connectionRef:n,toolbarRef:s,mid:r,path:l,selected:o}},on=(e,t,n)=>{const s=c=>{const d=t.kit.selection;c?d.addItem(t.connection.id,"connection"):d.removeItem(t.connection.id,"connection")},o=c=>{t.kit.setConnections(d=>d.id===t.connection.id,"label",c),t.kit.updateConnections()},i=c=>{c.stopPropagation(),s(!0)},r=new AbortController;re(()=>{e.connectionRef&&(e.selected()?(e.connectionRef.focus(),window.addEventListener("mousedown",l,{signal:r.signal}),window.addEventListener("keydown",a,{signal:r.signal})):e.connectionRef.classList.contains("selected")&&e.connectionRef.blur())});const l=c=>{const d=c.target;e.toolbarRef&&e.toolbarRef.contains(d)||e.connectionRef&&!e.connectionRef.contains(d)&&!c.ctrlKey&&(s(!1),window.removeEventListener("mousedown",l),window.removeEventListener("keydown",a))},a=c=>{c.key==="Escape"&&(s(!1),window.removeEventListener("keydown",a))};return G(()=>{r.abort()}),{setLabel:o,onpointerdown:i}};var rn=p("<svg stroke=currentColor style=z-index:0;overflow:visible;position:absolute><g style=outline:0><path fill=none style></path><path stroke-width=20 stroke=transparent fill=none>"),sn=p('<div class=connection-toolbar style="position:absolute;left:calc(var(--mid-x) + var(--left, 0px));top:calc(var(--mid-y) + var(--top, -2em));transform:translate(-50%, -50%)">'),ln=p('<span class=connection-label contenteditable=true style="position:absolute;z-index:1000;transform:translate(-50%, -50%)">');const cn=(e,t,n,s)=>[(()=>{var o=rn(),i=o.firstChild,r=i.firstChild,l=r.nextSibling;o.$$dblclick=()=>t.setLabel("Test"),R(i,"pointerdown",t.onpointerdown);var a=e.connectionRef;return typeof a=="function"?ee(a,i):e.connectionRef=i,E(c=>{var d=`connection-svg ${n.connection.class??""}`,u=n.connection.id,h=`connection ${n.connection.class??""}`,f=!!e.selected(),g={...n.connection.style},v=e.path(),m=e.path();return d!==c.e&&P(o,"class",c.e=d),u!==c.t&&P(i,"data-id",c.t=u),h!==c.a&&P(i,"class",c.a=h),f!==c.o&&i.classList.toggle("selected",c.o=f),c.i=Ce(i,g,c.i),v!==c.n&&P(r,"d",c.n=v),m!==c.s&&P(l,"d",c.s=m),c},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0}),o})(),b(O,{get when(){return B(()=>!!n.Toolbar)()&&e.selected()},get children(){var o=sn(),i=e.toolbarRef;return typeof i=="function"?ee(i,o):e.toolbarRef=o,k(o,b(_e,{get component(){return n.Toolbar},get kit(){return n.kit},get connection(){return n.connection}})),E(r=>{var l=e.mid().x+"px",a=e.mid().y+"px";return l!==r.e&&z(o,"--mid-x",r.e=l),a!==r.t&&z(o,"--mid-y",r.t=a),r},{e:void 0,t:void 0}),o}}),b(O,{get when(){return n.connection.label!==void 0},get children(){var o=ln();return o.$$keydown=i=>{i.key==="Enter"&&i.currentTarget.blur()},o.addEventListener("blur",i=>{const r=i.currentTarget.innerText.trim().length===0?void 0:i.currentTarget.innerText;t.setLabel(r)}),k(o,()=>n.connection.label),E(i=>{var r=e.mid().x+"px",l=e.mid().y+"px";return r!==i.e&&z(o,"left",i.e=r),l!==i.t&&z(o,"top",i.t=l),i},{e:void 0,t:void 0}),o}})];j(["dblclick","keydown"]);const an=e=>({getNodeRect:n=>e.kit.nodes.find(s=>s.id===n)}),dn=X({create:e=>{const t=an(e),n=nn(e,t),s=on(n,e);return{helper:t,state:n,logic:s,view:(o,i,r,l)=>cn(o,i,r)}}}),pe=["left","right","top","bottom"],un=(e,t)=>{const n=e.kit.activeConnectionDestination(),s=e.kit.activeConnection.from.side;return{path:S(()=>at({start:n,startPos:s,end:e.kit.activeConnectionDestination(),endPos:e.kit.activeConnection.to?.side??pe[pe.indexOf(s)^1]??"top"}))}},fn=(e,t,n)=>{const s=o=>{const{x:i,y:r,zoom:l}=t.kit.viewport(),a=t.kit.container?.getBoundingClientRect();a&&t.kit.setActiveConnectionDestination({x:(o.clientX-a.left-i)/l,y:(o.clientY-a.top-r)/l})};return fe(()=>{window.addEventListener("pointermove",s)}),G(()=>{window.removeEventListener("pointermove",s)}),{}};var hn=p('<svg stroke=currentColor style=z-index:0;overflow:visible;position:absolute><g tabindex=0 class="connection connection-preview"><path fill=none style="stroke-width:var(--connection-width, 2)">');const gn=(e,t,n,s)=>(()=>{var o=hn(),i=o.firstChild,r=i.firstChild;return E(()=>P(r,"d",e.path())),o})(),vn=e=>({}),wn=X({create:e=>{const t=vn(),n=un(e),s=fn(n,e);return{helper:t,state:n,logic:s,view:(o,i,r,l)=>gn(o)}}}),mn=(e,t)=>{const n=S(()=>e.node.data?.component);let s;const o=S(()=>!!e.node.data?.component&&e.node.data.component in e.components),i=S(()=>"node-toolbar"in e.components),r=S(()=>e.kit.selection.getNodes().includes(e.node.id));return{type:n,nodeDiv:s,hasComponent:o,Toolbar:i,selected:r}},yn=(e,t,n)=>{const s=new AbortController,o=c=>{const d=t.kit.selection;c?d.addItem(t.node.id,"node"):d.removeItem(t.node.id,"node")},i=He({onStart:c=>({x:t.node.x,y:t.node.y,clientX:c.clientX,clientY:c.clientY,zoom:t.kit.viewport().zoom,gridSize:t.kit.configs.gridSize}),onMove:(c,d)=>{const u=c.clientX,h=c.clientY,f=ke(u,d.clientX,d.zoom,d.gridSize),g=ke(h,d.clientY,d.zoom,d.gridSize),v=d.x+f,m=d.y+g;t.kit.setNodes(y=>y.id===t.node.id,{x:v,y:m})},onEnd:(c,d)=>{(d.x!==t.node.x||d.y!==t.node.y)&&t.kit.updateNodes()},preventDefault:!0}),r=c=>{o(!0),!(c.button===2||t.kit.configs.disableNodeDrag||t.kit.focus())&&i.onPointerDown(c)};re(wt(e.selected,()=>{e.nodeDiv&&(e.selected()?(e.nodeDiv.focus(),window.addEventListener("pointerdown",l,{signal:s.signal}),window.addEventListener("keydown",a,{signal:s.signal})):e.nodeDiv.classList.contains("selected")&&e.nodeDiv.blur())},{defer:!0}));const l=c=>{const d=c.target;e.nodeDiv&&!e.nodeDiv.contains(d)&&!c.ctrlKey&&(o(!1),window.removeEventListener("pointerdown",l),window.removeEventListener("keydown",a))},a=c=>{c.key==="Escape"&&(o(!1),window.removeEventListener("keydown",a))};return G(()=>{s.abort()}),{onPointerDown:r}},bn=(e,t)=>({size:S(()=>{if(e?.kit.configs.disableEdgeDrag)return{};const s="calc(var(--node-border-width, 2px) + 10px)";return t?.isCorner?{width:s,height:s,"--cursor":t?.cursor}:{width:t?.single.axis==="y"?"100%":s,height:t?.single.axis==="y"?s:"100%","--cursor":t?.cursor}})}),xn=(e,t,n)=>{const s=(f,g,v)=>Math.max(g,Math.min(f,v)),o=f=>{const{minNodeWidth:g=1,maxNodeWidth:v=1e4}=t.kit.configs;return s(f,g,v)},i=f=>{const{minNodeHeight:g=1,maxNodeHeight:v=1e4}=t.kit.configs;return s(f,g,v)},r=(()=>{switch(t.side){case"top":case"bottom":case"left":case"right":return{[t.side]:"var(--off-v)"};case"tl":return{top:"var(--off-v)",left:"var(--off-v)"};case"tr":return{top:"var(--off-v)",right:"var(--off-v)"};case"bl":return{bottom:"var(--off-v)",left:"var(--off-v)"};case"br":return{bottom:"var(--off-v)",right:"var(--off-v)"}}})(),l=t.side==="tl"?[{axis:"x",sign:-1},{axis:"y",sign:-1}]:t.side==="tr"?[{axis:"x",sign:1},{axis:"y",sign:-1}]:t.side==="bl"?[{axis:"x",sign:-1},{axis:"y",sign:1}]:t.side==="br"?[{axis:"x",sign:1},{axis:"y",sign:1}]:[],a=n?.isCorner?l:[n?.single],c=He({onStart:f=>({width:t.node.width,height:t.node.height,x:t.node.x,y:t.node.y,clientX:f.clientX,clientY:f.clientY,vp:t.kit.viewport(),gridSize:t.kit.configs.gridSize}),onMove:(f,g)=>{let{width:v,height:m,x:y,y:w,vp:x,gridSize:$}=g;for(const C of a){const N=x.zoom,D=(C?.axis==="x"?ke(f.clientX,g.clientX,N,$):ke(f.clientY,g.clientY,N,$))*(C?.sign??1);if(C?.axis==="x"){let W=v+D;const Q=o(W),Se=Q-v;v=Q,(t.side==="left"||t.side==="tl"||t.side==="bl")&&(y-=Se)}else{let W=m+D;const Q=i(W),Se=Q-m;m=Q,(t.side==="top"||t.side==="tl"||t.side==="tr")&&(w-=Se)}}t.kit.setNodes(C=>C.id===t.node.id,{width:v,height:m,x:y,y:w})},onEnd:(f,g)=>{["width","height","x","y"].some(v=>g[v]!==t.node[v])&&t.kit.updateNodes()},stopPropagation:!0,preventDefault:!0,disableSelection:!0});return{onPointerLeave:()=>{const f=t.kit.activeConnection;f.from&&(t.kit.activeConnection={...f,to:{id:void 0,side:f.to?.side}})},onPointerDown:f=>{t.kit.configs.disableEdgeDrag||c.onPointerDown(f)},onPointerEnter:()=>{const{from:f}=t.kit.activeConnection;!f||n?.isCorner||(t.kit.activeConnection={from:f,to:{side:t.side,id:t.node.id}})},positionStyle:r}},kn=(e,t)=>({anchorRef:void 0}),pn=(e,t,n)=>{let s=!1;const o=c=>{if(!t?.kit.activeConnection.from)return;const d=xe(c.clientX,c.clientY,t?.kit.viewport(),t?.kit.container?.getBoundingClientRect());d&&t?.kit.setActiveConnectionDestination(d)},i=()=>{if(!s){a();return}const c=t?.kit;if(c&&c.activeConnection.from){let d=c.activeConnection.to;if(!d?.id&&!c.configs.disableAnchorConnectionCreation){const u=c.activeConnectionDestination(),h=t?.kit.configs.gridSize;if(u){const f=De(u.x-75,h),g=De(u.y,h),v=Math.round(150/h),m=Math.round(60/h),y=c.randomId("node"),w={x:f,y:g,width:v*c.configs.gridSize,height:m*c.configs.gridSize,data:{label:"Node",component:"default"},...c.configs.defaultNode,id:y};c.setNodes(q([...c.nodes,w])),c.updateNodes(!0);const x=c.activeConnection.from.side,$=pe[pe.indexOf(x)^1];d={id:y,side:d?.side??$}}}if(d?.id&&c.activeConnection.from.id!==d.id){const u={id:c.randomId("connection"),from:c.activeConnection.from,to:d};c.setConnections(q([...c.connections,u])),c.updateConnections()}}a()},r=()=>{if(!e.anchorRef)return;const{x:c,y:d,width:u,height:h}=e.anchorRef.getBoundingClientRect();lt(),t&&(t.kit.activeConnection={from:{side:t?.side,id:t?.id}});const f=xe(c+u/2,d+h/2,t?.kit.viewport(),t?.kit.container?.getBoundingClientRect());f&&t?.kit.setActiveConnectionDestination(f)},l=c=>{c.stopPropagation(),c.preventDefault(),c.clientX,c.clientY,s=!0,r(),window.addEventListener("pointermove",o),window.addEventListener("pointerup",i,{once:!0}),window.addEventListener("pointercancel",i,{once:!0})},a=()=>{ct(),t&&(t.kit.setActiveConnectionDestination(null),t.kit.activeConnection={}),window.removeEventListener("pointermove",o),window.removeEventListener("pointerup",i),window.removeEventListener("pointercancel",i)};return{onPointerDown:l}};var $n=p("<div class=node-anchor>");const Cn=(e,t,n,s)=>(()=>{var o=$n();R(o,"pointerdown",t.onPointerDown);var i=e.anchorRef;return typeof i=="function"?ee(i,o):e.anchorRef=o,o})(),Sn=e=>({}),En=X({create:e=>{const t=Sn(),n=kn(),s=pn(n,e);return{helper:t,state:n,logic:s,view:(o,i,r,l)=>Cn(o,i)}}});var Pn=p("<div class=node-edge>");const Ln=(e,t,n,s)=>(()=>{var o=Pn();return R(o,"pointerdown",t.onPointerDown),R(o,"pointerleave",t.onPointerLeave),R(o,"pointerenter",t.onPointerEnter),k(o,b(O,{get when(){return B(()=>!s?.isCorner)()&&!n?.kit.configs.disableNodeAnchors},get children(){return b(En,{get side(){return n?.side},get kit(){return n?.kit},get id(){return n?.node.id}})}})),E(i=>Ce(o,{...e.size(),...t.positionStyle},i)),o})(),An=e=>{const t=["tl","tr","bl","br"].includes(e?.side),n={top:{axis:"y",sign:-1,cursor:"ns-resize"},bottom:{axis:"y",sign:1,cursor:"ns-resize"},left:{axis:"x",sign:-1,cursor:"ew-resize"},right:{axis:"x",sign:1,cursor:"ew-resize"}}[e?.side],s=t?e?.side==="tl"||e?.side==="br"?"nwse-resize":"nesw-resize":n?.cursor??"default";return{isCorner:t,cursor:s,single:n}},Nn=X({create:e=>{const t=An(e),n=bn(e,t),s=xn(n,e,t);return{helper:t,state:n,logic:s,view:(o,i,r,l)=>Ln(o,i,r,l)}}});var Mn=p('<div class=node-toolbar style="position:absolute;top:var(--top, 0);left:var(--left, calc(100% + 1em))">'),_n=p("<span class=node-label contenteditable=true style=top:-2em;left:0;width:var(--size);height:var(--size);display:flex;align-items:center;justify-content:center;outline:none>"),zn=p("<div class=node-component style=width:100%;height:100%>"),Tn=p("<div>");const Dn=(e,t,n,s)=>(()=>{var o=Tn();R(o,"pointerdown",t.onPointerDown);var i=e.nodeDiv;return typeof i=="function"?ee(i,o):e.nodeDiv=o,k(o,b(O,{get when(){return B(()=>!!e.Toolbar())()&&e.selected()},get children(){var r=Mn();return r.$$pointerdown=l=>{console.log("p-down"),l.stopPropagation()},k(r,b(_e,{get component(){return n.components?.["node-toolbar"]},get kit(){return n.kit},get node(){return n.node}})),r}}),null),k(o,b(O,{get when(){return n.node.data?.label},get children(){var r=_n();return r.$$keydown=l=>{l.key==="Escape"&&l.currentTarget.blur()},r.addEventListener("blur",l=>{const a=l.currentTarget.innerText.trim().length===0?void 0:l.currentTarget.innerText;n.kit.setNodes(c=>c.id===n.node.id,"data","label",a),n.kit.updateNodes()}),k(r,()=>n.node.data?.label),E(l=>{var a=e.type()&&e.hasComponent()?"fit-content":"100%",c=e.type()&&e.hasComponent()?"absolute":"static";return a!==l.e&&z(r,"--size",l.e=a),c!==l.t&&z(r,"position",l.t=c),l},{e:void 0,t:void 0}),r}}),null),k(o,b(O,{get when(){return B(()=>!!(e.type()&&n.components))()&&e.hasComponent()},get children(){var r=zn();return k(r,b(_e,{get component(){return n.components[e.type()]},get node(){return n.node},get kit(){return n.kit}})),r}}),null),k(o,b(F,{each:["left","top","right","bottom","tl","tr","br","bl"],children:r=>b(Nn,{side:r,get node(){return n.node},get kit(){return n.kit}})}),null),E(r=>{var l=`node ${n.node.class??""} `,a=!!e.selected(),c=!n.kit.focus(),d=n.node.id,u={transform:`translate(${n.node.x}px, ${n.node.y}px)`,width:`${n.node.width}px`,height:`${n.node.height}px`,...n.node.style};return l!==r.e&&tt(o,r.e=l),a!==r.t&&o.classList.toggle("selected",r.t=a),c!==r.a&&o.classList.toggle("unfocus",r.a=c),d!==r.o&&P(o,"data-id",r.o=d),r.i=Ce(o,u,r.i),r},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0}),o})();j(["pointerdown","keydown"]);const On=e=>({}),In=X({create:e=>{const t=On(),n=mn(e),s=yn(n,e);return{helper:t,state:n,logic:s,view:(o,i,r,l)=>Dn(o,i,r)}}});var Rn=p('<div class=solid-kitx tabindex=0 autofocus style=outline:none><div class=container style="transform-origin:0 0">');const Hn=(e,t,n,s)=>{const o=e.Children;return(()=>{var i=Rn(),r=i.firstChild;R(i,"pointerdown",t.onPointerDown,!0);var l=e.containerRef;return typeof l=="function"?ee(l,i):e.containerRef=i,k(i,b(o,{}),r),k(r,b(F,{get each(){return e.kit.connections},children:a=>b(dn,{connection:a,get Toolbar(){return n.components?.["connection-toolbar"]},get kit(){return e.kit}})}),null),k(r,b(O,{get when(){return e.kit.activeConnectionDestination()},get children(){return b(wn,{get kit(){return e.kit}})}}),null),k(r,b(F,{get each(){return e.kit.nodes},children:a=>b(In,{node:a,get components(){return n.components},get kit(){return e.kit}})}),null),E(a=>z(r,"transform",`translate(${e.vp().x}px, ${e.vp().y}px) scale(${e.vp().zoom})`)),i})()};j(["pointerdown"]);const Vn=e=>({}),jn=X({create:e=>{const t=Vn(),n=en(e),s=tn(n,e);return{helper:t,state:n,logic:s,view:(o,i,r,l)=>Hn(o,i,r)}}}),Bn=(e,t)=>{const n=S(()=>e.absoluteGrid??e.kit.configs.gridSize??100),s=S(()=>e.kit.viewport()),o=S(()=>n()*s().zoom),i=S(()=>e.type==="dash"&&n()/(e.dashWidth??8)*s().zoom);return{grid:n,vp:s,dif:o,dashWidth:i}},Fn=(e,t,n)=>({});var Un=p("<svg><line stroke=currentColor y1=0 y2=0></svg>",!1,!0,!1),Xn=p("<svg><line stroke=currentColor x1=0 x2=0></svg>",!1,!0,!1),Wn=p("<svg><circle fill=currentColor></svg>",!1,!0,!1),Yn=p("<svg class=background-grid style=position:absolute;width:100%;height:100%><pattern id=grid-pattern patternUnits=userSpaceOnUse></pattern><rect x=0 y=0 width=100% height=100% fill=url(#grid-pattern)>");const Kn=(e,t,n,s)=>(()=>{var o=Yn(),i=o.firstChild;return k(i,b(Re,{get children(){return[b(ae,{get when(){return n.type==="dash"},get children(){return[(()=>{var r=Un();return E(l=>{var a=`${e.dashWidth()}`,c=-e.dashWidth()/2,d=e.grid()*e.vp().zoom;return a!==l.e&&P(r,"stroke-dasharray",l.e=a),c!==l.t&&P(r,"x1",l.t=c),d!==l.a&&P(r,"x2",l.a=d),l},{e:void 0,t:void 0,a:void 0}),r})(),(()=>{var r=Xn();return E(l=>{var a=`${e.dashWidth()}`,c=-e.dashWidth()/2,d=e.grid()*e.vp().zoom;return a!==l.e&&P(r,"stroke-dasharray",l.e=a),c!==l.t&&P(r,"y1",l.t=c),d!==l.a&&P(r,"y2",l.a=d),l},{e:void 0,t:void 0,a:void 0}),r})()]}}),b(ae,{get when(){return!n.type||n.type==="dot"},get children(){var r=Wn();return E(l=>{var a=e.vp().zoom,c=e.vp().zoom,d=e.vp().zoom;return a!==l.e&&P(r,"cx",l.e=a),c!==l.t&&P(r,"cy",l.t=c),d!==l.a&&P(r,"r",l.a=d),l},{e:void 0,t:void 0,a:void 0}),r}})]}})),E(r=>{var l=e.vp().x+e.dif()/2,a=e.vp().y+e.dif()/2,c=e.dif(),d=e.dif();return l!==r.e&&P(i,"x",r.e=l),a!==r.t&&P(i,"y",r.t=a),c!==r.a&&P(i,"width",r.a=c),d!==r.o&&P(i,"height",r.o=d),r},{e:void 0,t:void 0,a:void 0,o:void 0}),o})(),Gn=e=>({}),Zn=X({create:e=>{const t=Gn(),n=Bn(e),s=Fn();return{helper:t,state:n,logic:s,view:(o,i,r,l)=>Kn(o,i,r)}}}),qn=(e,t)=>({}),Jn=(e,t,n)=>({zoomIn:()=>{const r=t.kit.viewport(),l=Math.min(5,r.zoom+.1);t.kit.setViewport({...r,zoom:l}),t.kit.updateViewport()},zoomOut:()=>{const r=t.kit.viewport();t.kit.setViewport({...r,zoom:Math.max(.1,r.zoom-.1)}),t.kit.updateViewport()},fitView:()=>{if(!t.kit.container||t.kit.nodes.length===0)return;const r=t.kit.nodes;let l=1/0,a=1/0,c=-1/0,d=-1/0;r.forEach(N=>{l=Math.min(l,N.x),a=Math.min(a,N.y),c=Math.max(c,N.x+N.width),d=Math.max(d,N.y+N.height)});const{width:u,height:h}=t.kit.container.getBoundingClientRect(),f=40,g=c-l,v=d-a;if(g<=0||v<=0)return;const m=Math.min((u-f*2)/g,(h-f*2)/v),y=Math.min(m,1),w=l+g/2,x=a+v/2,$=u/2-w*y,C=h/2-x*y;t.kit.setViewport({x:$,y:C,zoom:y}),t.kit.updateViewport()}});var Qn=p(`<div class=kitx-controls style=right:10px;bottom:10px><button><svg xmlns=http://www.w3.org/2000/svg viewBox="0 0 297 297"fill=currentColor><g><path d="M294.077,251.199l-59.105-59.107l42.167-24.356c3.295-1.903,5.212-5.52,4.938-9.315c-0.274-3.796-2.692-7.101-6.226-8.51
		L87.82,74.905c-3.686-1.472-7.895-0.605-10.702,2.201c-2.807,2.808-3.674,7.016-2.203,10.702l74.994,188.053
		c1.41,3.534,4.715,5.953,8.511,6.227c3.796,0.276,7.414-1.642,9.316-4.938l24.354-42.167l59.101,59.107
		c1.862,1.863,4.39,2.91,7.023,2.91c2.635,0,5.161-1.047,7.023-2.91l28.841-28.845C297.956,261.366,297.956,255.078,294.077,251.199
		z"></path><path d="M43.61,29.552c-3.879-3.876-10.166-3.877-14.047,0c-3.878,3.879-3.878,10.168,0,14.047l22.069,22.069
		c1.939,1.939,4.48,2.909,7.023,2.909c2.541,0,5.083-0.97,7.022-2.909c3.879-3.879,3.879-10.167,0-14.046L43.61,29.552z"></path><path d="M51.089,98.215c0-5.484-4.447-9.932-9.933-9.932H9.946c-5.485,0-9.933,4.447-9.933,9.932c0,5.485,4.447,9.933,9.933,9.933
		h31.21C46.642,108.147,51.089,103.7,51.089,98.215z"></path><path d="M47.063,128.869l-22.072,22.071c-3.878,3.879-3.878,10.168,0,14.046c1.94,1.939,4.482,2.909,7.023,2.909
		c2.541,0,5.084-0.97,7.023-2.909l22.071-22.07c3.879-3.879,3.879-10.168,0-14.047C57.23,124.993,50.944,124.992,47.063,128.869z"></path><path d="M98.222,51.078c5.485,0,9.933-4.447,9.933-9.933V9.932c0-5.485-4.447-9.932-9.933-9.932c-5.484,0-9.932,4.446-9.932,9.932
		v31.214C88.29,46.631,92.737,51.078,98.222,51.078z"></path><path d="M135.894,64.006c2.543,0,5.084-0.97,7.023-2.909l22.068-22.069c3.879-3.879,3.879-10.168,0-14.047
		c-3.879-3.877-10.168-3.877-14.046,0l-22.068,22.07c-3.879,3.879-3.879,10.168,0,14.046
		C130.811,63.036,133.352,64.006,135.894,64.006z"></path></g></svg></button><button class=control-button><svg viewBox="0 0 24 24"id=plus data-name="Flat Line"xmlns=http://www.w3.org/2000/svg stroke=currentColor><path d=M5,12H19M12,5V19 fill=none stroke-linecap=round stroke-linejoin=round stroke-width=2></path></svg></button><button class=control-button><svg viewBox="0 0 24 24"id=minus data-name="Flat Line"xmlns=http://www.w3.org/2000/svg stroke=currentColor><line fill=none stroke-linecap=round stroke-linejoin=round stroke-width=2 x1=19 y1=12 x2=5 y2=12></line></svg></button><button class=control-button><svg viewBox="0 0 24 24"id=maximize-size data-name="Flat Line"xmlns=http://www.w3.org/2000/svg fill=none stroke-linecap=round stroke-linejoin=round stroke-width=2 stroke=currentColor><path d=M9,9,3.29,3.29M15,9l5.71-5.71M9,15,3.29,20.71m17.42,0L15,15></path><path data-name=primary d=M3,8V4A1,1,0,0,1,4,3H8></path><path data-name=primary d=M16,3h4a1,1,0,0,1,1,1V8></path><path data-name=primary d=M8,21H4a1,1,0,0,1-1-1V16></path><path data-name=primary d=M21,16v4a1,1,0,0,1-1,1H16>`);const eo=(e,t,n,s)=>(()=>{var o=Qn(),i=o.firstChild,r=i.nextSibling,l=r.nextSibling,a=l.nextSibling;return i.$$pointerdown=()=>n.kit.setFocus(c=>!c),R(r,"pointerdown",t.zoomIn,!0),R(l,"pointerdown",t.zoomOut,!0),R(a,"pointerdown",t.fitView,!0),E(()=>i.classList.toggle("on",!!n.kit.focus())),o})();j(["pointerdown"]);const to=e=>({}),no=X({create:e=>{const t=to(),n=qn(),s=Jn(n,e);return{helper:t,state:n,logic:s,view:(o,i,r,l)=>eo(o,i,r)}}}),oo=(e,t)=>{const[n,s]=M(!1),[o,i]=M({x:0,y:0}),r=S(()=>{const a=t?.startPos,c=o();return{left:Math.min(a.x,c.x),top:Math.min(a.y,c.y),right:Math.max(a.x,c.x),bottom:Math.max(a.y,c.y),width:Math.abs(a.x-c.x),height:Math.abs(a.y-c.y)}}),l=S(()=>{const a=r(),c=e.kit.viewport();return{left:a.left*c.zoom,top:a.top*c.zoom,width:a.width*c.zoom,height:a.height*c.zoom}});return{isDragging:n,currentPos:o,setCurrentPos:i,setIsDragging:s,rectOnScreen:l,rect:r}},io=(e,t,n)=>{function s(){const r=e.rect();if(r.width<5||r.height<5)return;const l=t.kit.container.getBoundingClientRect(),a={nodes:[],connections:[]};t.kit.container.querySelectorAll(".node, .connection").forEach(d=>{const u=d.getBoundingClientRect(),h=t.kit.viewport(),f={left:(u.left-l.left)/h.zoom,top:(u.top-l.top)/h.zoom,right:(u.right-l.left)/h.zoom,bottom:(u.bottom-l.top)/h.zoom};if(!(f.left>r.right||f.right<r.left||f.top>r.bottom||f.bottom<r.top)){const v=d.getAttribute("data-id"),m=d.classList.contains("node");v&&(m?a.nodes.push(v):a.connections.push(v))}}),t.kit.selection.set(a)}const o=He({onStart:r=>{if(r.button!==0)return;const l=xe(r.clientX,r.clientY,{...t.kit.viewport(),x:0,y:0},t.kit.container.getBoundingClientRect());if(l)return n&&(n.startPos=l),e.setCurrentPos(l),e.setIsDragging(!0),l},onMove:(r,l)=>{const a=xe(r.clientX,r.clientY,{...t.kit.viewport(),x:0,y:0},t.kit.container.getBoundingClientRect());a&&e.setCurrentPos(a)},onEnd:(r,l)=>{e.setIsDragging(!1),s()},disableSelection:!0}),i=r=>{t.kit.focus()&&o.onPointerDown(r)};return fe(()=>{t.kit.container?.addEventListener("pointerdown",i)}),G(()=>{t.kit.container?.removeEventListener("pointerdown",i)}),{}};var ro=p('<div class=kit-selection-rect style="position:absolute;border:1px solid rgb(var(--selection-rgb, 0,120,215));background-color:rgba(var(--selection-rgb, 0,120,215), 0.3)">');const so=(e,t,n,s)=>b(O,{get when(){return B(()=>!!e.isDragging())()&&n.kit.focus()},get children(){var o=ro();return E(i=>{var r=`${e.rectOnScreen().left}px`,l=`${e.rectOnScreen().top}px`,a=`${e.rectOnScreen().width}px`,c=`${e.rectOnScreen().height}px`;return r!==i.e&&z(o,"left",i.e=r),l!==i.t&&z(o,"top",i.t=l),a!==i.a&&z(o,"width",i.a=a),c!==i.o&&z(o,"height",i.o=c),i},{e:void 0,t:void 0,a:void 0,o:void 0}),o}}),lo=e=>({startPos:{x:0,y:0}}),co=X({create:e=>{const t=lo(),n=oo(e,t),s=io(n,e,t);return{helper:t,state:n,logic:s,view:(o,i,r,l)=>so(o,i,r)}}});var ao=p('<button><svg xmlns=http://www.w3.org/2000/svg viewBox="0 0 24 24"stroke=currentColor stroke-width=2 stroke-linecap=round stroke-linejoin=round><path stroke=none d="M0 0h24v24H0z"fill=none></path><path d="M12 5l0 14"></path><path d="M5 12l14 0">'),uo=p('<div class=kitx-controls style=--flex-direction:row><button title="Remove Node"><svg xmlns=http://www.w3.org/2000/svg viewBox="0 0 24 24"fill=none stroke=currentColor stroke-width=2 stroke-linecap=round stroke-linejoin=round class="icon icon-tabler icons-tabler-outline icon-tabler-trash"><path stroke=none d="M0 0h24v24H0z"fill=none></path><path d="M4 7l16 0"></path><path d="M10 11l0 6"></path><path d="M14 11l0 6"></path><path d="M5 7l1 12a2 2 0 0 0 2 2h8a2 2 0 0 0 2 -2l1 -12"></path><path d="M9 7v-3a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v3">');const fo=e=>{const t=S(()=>e.node.data?.component==="task-node"),n=()=>{const i=e.node.id;e.kit.setConnections(q(e.kit.connections.filter(r=>r.from.id!==i&&r.to.id!==i))),e.kit.setNodes(q(e.kit.nodes.filter(r=>r.id!==i))),e.kit.updateNodes()},s=()=>{e.kit.setNodes(i=>i.id===e.node.id,"data","extra","fields",["new field",...e.node.data?.extra?.fields??[]])},o=()=>{e.kit.setNodes(i=>i.id===e.node.id,"data","extra","tasks",[{description:"new task",done:!1},...e.node.data?.extra.tasks])};return(()=>{var i=uo(),r=i.firstChild;return r.$$pointerdown=n,k(i,b(Re,{get children(){return b(ae,{get when(){return["fields-node","task-node"].includes(e.node.data?.component)},get children(){var l=ao();return R(l,"pointerdown",t()?o:s,!0),E(()=>P(l,"title",t()?"Add Task":"Add field")),l}})}}),null),i})()};j(["pointerdown"]);var ho=p('<div class=kitx-controls style=--flex-direction:row><button><svg xmlns=http://www.w3.org/2000/svg viewBox="0 0 24 24"fill=none stroke=currentColor stroke-width=2 stroke-linecap=round stroke-linejoin=round class="icon icon-tabler icons-tabler-outline icon-tabler-trash"><path stroke=none d="M0 0h24v24H0z"fill=none></path><path d="M4 7l16 0"></path><path d="M10 11l0 6"></path><path d="M14 11l0 6"></path><path d="M5 7l1 12a2 2 0 0 0 2 2h8a2 2 0 0 0 2 -2l1 -12"></path><path d="M9 7v-3a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v3"></path></svg></button><button><svg xmlns=http://www.w3.org/2000/svg viewBox="0 0 24 24"fill=none stroke=currentColor stroke-width=2 stroke-linecap=round stroke-linejoin=round class="icon icon-tabler icons-tabler-outline icon-tabler-palette"><path stroke=none d="M0 0h24v24H0z"fill=none></path><path d="M12 21a9 9 0 0 1 0 -18c4.97 0 9 3.582 9 8c0 1.06 -.474 2.078 -1.318 2.828c-.844 .75 -1.989 1.172 -3.182 1.172h-2.5a2 2 0 0 0 -1 3.75a1.3 1.3 0 0 1 -1 2.25"></path><path d="M8.5 10.5m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0"></path><path d="M12.5 7.5m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0"></path><path d="M16.5 10.5m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0">');const go=e=>{const t=()=>{const s=document.createElement("input");s.type="color",s.click(),s.addEventListener("input",()=>{e.kit.setConnections(q(e.kit.connections.map(o=>o.id===e.connection.id?{...o,style:{...o.style,stroke:s.value}}:o))),e.kit.updateConnections()})},n=()=>{e.kit.setConnections(q(e.kit.connections.filter(s=>s.id!==e.connection.id))),e.kit.updateConnections()};return(()=>{var s=ho(),o=s.firstChild,i=o.nextSibling;return o.$$pointerdown=n,i.$$pointerdown=t,s})()};j(["pointerdown"]);const vo=(e,t)=>{const[n,s]=M(""),[o,i]=M(!1),[r,l]=M(!1);return{selected:n,setSelected:s,settingsVisible:o,setSettingsVisible:i,isNodesVisible:r,setNodesVisible:l}},dt={backgroundType:M(localStorage.backgroundType)},wo=(e,t,n)=>{const s=t.kit,o=c=>{c.shiftKey&&c.key===" "&&t.kit.setFocus(d=>!d)},i=()=>{confirm("Are you sure you want to remove everything?")&&(localStorage.removeItem("nodes"),localStorage.removeItem("connections"),localStorage.removeItem("vp"),window.location.reload())},r=()=>{const c={nodes:V(s.nodes),connections:V(s.connections),viewport:s.viewport()},d=JSON.stringify(c,null,2),u=new Blob([d],{type:"application/json"}),h=URL.createObjectURL(u),f=document.createElement("a");f.href=h,f.download="solid-kitx-export.json",f.click(),URL.revokeObjectURL(h)},l=()=>{const c=document.createElement("input");c.type="file",c.accept="application/json",c.onchange=async d=>{const u=d.target.files?.[0];if(u)try{const h=await u.text(),f=JSON.parse(h);if(!f.nodes||!f.connections||!f.viewport){alert("Invalid file format. Missing required fields.");return}s.setNodes(f.nodes),s.setConnections(f.connections),s.setViewport(f.viewport),s.updateNodes(),s.updateConnections(),s.updateViewport(),console.log("Import successful:",f)}catch(h){console.error(h),alert("Failed to read file.")}},c.click()},a=c=>{dt.backgroundType[1](c),localStorage.backgroundType=c};return fe(()=>{window.addEventListener("keydown",o)}),G(()=>{window.removeEventListener("keydown",o)}),{clearAll:i,exportAll:r,importAll:l,onBackgroundType:a}},mo=`<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor" class="icon icon-tabler icons-tabler-filled icon-tabler-alien"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M12.004 2c4.942 0 8.288 2.503 8.85 6.444a12.884 12.884 0 0 1 -2.163 9.308a11.794 11.794 0 0 1 -3.51 3.356c-1.982 1.19 -4.376 1.19 -6.373 -.008a11.763 11.763 0 0 1 -3.489 -3.34a12.808 12.808 0 0 1 -2.171 -9.306c.564 -3.95 3.91 -6.454 8.856 -6.454zm1.913 14.6a1 1 0 0 0 -1.317 -.517l-.146 .055a1.5 1.5 0 0 1 -1.054 -.055l-.11 -.04a1 1 0 0 0 -.69 1.874a3.5 3.5 0 0 0 2.8 0a1 1 0 0 0 .517 -1.317zm-5.304 -6.39a1 1 0 0 0 -1.32 1.497l2 2l.094 .083a1 1 0 0 0 1.32 -1.497l-2 -2zm8.094 .083a1 1 0 0 0 -1.414 0l-2 2l-.083 .094a1 1 0 0 0 1.497 1.32l2 -2l.083 -.094a1 1 0 0 0 -.083 -1.32z" /></svg>
`,yo=`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" ><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M10.325 4.317c.426 -1.756 2.924 -1.756 3.35 0a1.724 1.724 0 0 0 2.573 1.066c1.543 -.94 3.31 .826 2.37 2.37a1.724 1.724 0 0 0 1.065 2.572c1.756 .426 1.756 2.924 0 3.35a1.724 1.724 0 0 0 -1.066 2.573c.94 1.543 -.826 3.31 -2.37 2.37a1.724 1.724 0 0 0 -2.572 1.065c-.426 1.756 -2.924 1.756 -3.35 0a1.724 1.724 0 0 0 -2.573 -1.066c-1.543 .94 -3.31 -.826 -2.37 -2.37a1.724 1.724 0 0 0 -1.065 -2.572c-1.756 -.426 -1.756 -2.924 0 -3.35a1.724 1.724 0 0 0 1.066 -2.573c-.94 -1.543 .826 -3.31 2.37 -2.37c1 .608 2.296 .07 2.572 -1.065z" /><path d="M9 12a3 3 0 1 0 6 0a3 3 0 0 0 -6 0" /></svg>
`,bo=`
                                <svg
                                        xmlns="http://www.w3.org/2000/svg"
                                        viewBox="0 0 24 24"
                                        stroke="currentColor"
                                        stroke-width="2"
                                        stroke-linecap="round"
                                        stroke-linejoin="round"
                                        class="icon icon-tabler icons-tabler-outline icon-tabler-x"
                                >
                                        <path
                                                stroke="none"
                                                d="M0 0h24v24H0z"
                                                fill="none"
                                        />
                                        <path d="M18 6l-12 12" />
                                        <path d="M6 6l12 12" />
                                </svg>
`;var xo=p('<div style="padding:3rem;text-align:center;color:var(--label-color, #999999)"><p style=margin:0;font-size:1rem>No settings available in this category yet.'),ko=p('<div class=settings-backdrop style="position:fixed;top:0;left:0;width:100%;height:100%;background-color:rgba(0, 0, 0, 0.5);z-index:100;display:flex;justify-content:center;align-items:center"><div class=settings-modal style="background-color:var(--node-bg, #ffffff);border-radius:12px;box-shadow:0 10px 40px rgba(0, 0, 0, 0.3);width:min(900px, 90vw);height:min(500px, 80vh);display:flex;overflow:hidden;color:var(--node-color, #000000)"><div class=settings-sidebar style="width:200px;background-color:var(--controls-bg, #f5f5f5);border-right:1px solid var(--node-outline-color, #e0e0e0);padding:1.5rem 0;display:flex;flex-direction:column;gap:0.5rem"><div style=padding-inline:1.5rem;margin-bottom:1rem><h2 style=margin:0;font-size:1.25rem;font-weight:600>Settings</h2></div></div><div class=settings-content style=flex:1;padding:2rem;overflow-y:auto;display:flex;flex-direction:column;gap:1.5rem><div style=display:flex;justify-content:space-between;align-items:center;margin-bottom:0.5rem><h3 style=margin:0;font-size:1.5rem;font-weight:600;text-transform:capitalize></h3><button class=close-button style=background:transparent;border:none;cursor:pointer;padding:0.5rem;border-radius:6px;display:flex;align-items:center;justify-content:center></button></div><div style=display:flex;flex-direction:column;gap:1rem>'),po=p('<button class=settings-tab style="border:none;padding:0.75rem 1.5rem;text-align:left;cursor:pointer;font-size:0.95rem;color:var(--node-color, #000000)">'),$o=p('<button class=setting-action-button style="flex-shrink:0;padding:0.5rem 1rem;background-color:var(--node-outline, #1a73e8);color:#ffffff;border:none;border-radius:6px;cursor:pointer;font-size:0.9rem;font-weight:500;white-space:nowrap">'),Co=p("<select>"),So=p('<div class=setting-item style=display:flex;height:10em;gap:1rem;align-items:flex-start><div style=flex:1><h4 style="margin:0 0 0.5rem 0;font-size:1.1rem;font-weight:500"></h4><p style="margin:0;font-size:0.8rem;color:var(--label-color, #666666);line-height:1.5">'),Eo=p("<option>");const Po=e=>{const[t,n]=M("general"),s=[{id:"general",label:"General"},{id:"data",label:"Data"},{id:"appearance",label:"Appearance"}],o=()=>document.documentElement.classList.contains("dark")?"dark":"light",[i,r]=M(o()),l=()=>{document.documentElement.classList.toggle("dark");const c=o();localStorage.theme=c,r(c)},a={general:[{id:"theme",title:"Theme",description:`Switch between light and dark mode. Current theme: ${i()}`,action:l,type:"button"}],data:[{id:"export",title:"Export Backup",description:"Download a backup file containing all your nodes and connections. Use this to save your work or transfer it to another device.",action:e.logic.exportAll,type:"button"},{id:"import",title:"Import Backup",description:"Load a previously saved backup file to restore your nodes and connections. This will replace your current work.",action:e.logic.importAll,type:"button"},{id:"clear",title:"Clear All Data",description:"Delete all nodes and connections from the canvas. This action cannot be undone. Make sure to export a backup first if you want to keep your work.",action:e.logic.clearAll,type:"button"}],appearance:[{id:"bg-type",title:"Background Type",description:"Change Background type.",action:e.logic.onBackgroundType,type:"options",options:["dot","dash"]}]};return b(O,{get when(){return e.visible},get children(){var c=ko(),d=c.firstChild,u=d.firstChild,h=u.firstChild;h.firstChild;var f=u.nextSibling,g=f.firstChild,v=g.firstChild,m=v.nextSibling,y=g.nextSibling;return c.$$pointerdown=w=>{w.preventDefault(),w.stopPropagation(),e.onClose()},d.$$pointerdown=w=>w.stopPropagation(),k(u,b(F,{each:s,children:w=>(()=>{var x=po();return x.$$pointerdown=()=>n(w.id),k(x,()=>w.label),E($=>{var C=t()===w.id,N=t()===w.id?"var(--controls-button-bg, #ffffff)":"transparent",_=t()===w.id?"500":"400";return C!==$.e&&x.classList.toggle("active",$.e=C),N!==$.t&&z(x,"background",$.t=N),_!==$.a&&z(x,"font-weight",$.a=_),$},{e:void 0,t:void 0,a:void 0}),x})()}),null),k(v,t),R(m,"pointerdown",e.onClose,!0),m.innerHTML=bo,k(y,b(F,{get each(){return a[t()]},children:w=>(()=>{var x=So(),$=x.firstChild,C=$.firstChild,N=C.nextSibling;return k(C,()=>w.title),k(N,()=>w.description),k(x,b(Re,{get children(){return[b(ae,{get when(){return B(()=>!!w.type)()&&["button","toggle"].includes(w.type)},get children(){var _=$o();return _.$$pointerdown=D=>{D.stopPropagation(),w.action()},k(_,(()=>{var D=B(()=>w.id==="theme");return()=>D()?"Toggle":B(()=>w.id==="clear")()?"Clear":w.id==="export"?"Export":"Import"})()),_}}),b(ae,{get when(){return B(()=>!!w.type)()&&w.type==="options"},get children(){var _=Co();return _.addEventListener("change",D=>{w.action(D.currentTarget.value)}),k(_,b(F,{get each(){return B(()=>w.type==="options")()&&w.options},children:D=>(()=>{var W=Eo();return W.value=D,k(W,D),W})()})),_}})]}}),null),x})()}),null),k(y,b(O,{get when(){return a[t()].length===0},get children(){var w=xo();return w.firstChild,w}}),null),c}})};j(["pointerdown"]);var Lo=p('<div class=kitx-controls style=top:10px;right:10px><button title=Github></button><hr style=border:0;height:.5em><button title="Expand Settings"></button><hr style=border:0;height:.5em>'),Ao=p("<button>"),No=p("<div class=node-preview>");const Mo=(e,t,n,s)=>[(()=>{var o=Lo(),i=o.firstChild,r=i.nextSibling,l=r.nextSibling;return l.nextSibling,o.$$pointerdown=a=>a.stopPropagation(),i.$$pointerdown=()=>window.open("https://github.com/ryusufe/solid-kitx/","_blank"),i.innerHTML=mo,l.$$pointerdown=()=>e.setSettingsVisible(a=>!a),l.innerHTML=yo,k(o,b(F,{get each(){return s?.nodeTypes},children:a=>(()=>{var c=Ao();return c.$$click=()=>e.setSelected(d=>d===a.type?"":a.type),E(d=>{var u=a.label,h=a.type===e.selected(),f=a.icon;return u!==d.e&&P(c,"title",d.e=u),h!==d.t&&c.classList.toggle("on",d.t=h),f!==d.a&&(c.innerHTML=d.a=f),d},{e:void 0,t:void 0,a:void 0}),c})()}),null),o})(),b(Xt,{get mount(){return document.getElementById("external")},get children(){return b(Po,{get visible(){return e.settingsVisible()},onClose:()=>e.setSettingsVisible(!1),logic:t})}}),b(O,{get when(){return e.selected()},get children(){return b(_o,{get selected(){return s?.nodeTypes.find(o=>o.type===e.selected())},get setSelected(){return e.setSelected},get kit(){return n.kit}})}})],_o=({selected:e,setSelected:t,kit:n})=>{const[s,o]=M({x:0,y:0});let i={x:e.defaultWidth/2,y:e.defaultHeight/2};const r=c=>{o({x:c.clientX-i.x,y:c.clientY-i.y})},l=()=>{const c={id:n.randomId("node"),...s(),height:e.defaultHeight,width:e.defaultWidth,data:{label:e.label,component:e.type,extra:e.defaultData}};n.setNodes(d=>[...d,c]),t(""),n.updateNodes(),window.removeEventListener("pointermove",r),window.removeEventListener("keydown",a)},a=c=>{c.key==="Escape"&&(t(""),window.removeEventListener("keydown",a),window.removeEventListener("pointermove",r),window.removeEventListener("pointerup",l))};return fe(()=>{window.addEventListener("pointerup",l,{once:!0}),window.addEventListener("pointermove",r),window.addEventListener("keydown",a),o({x:(window.innerWidth-e.defaultWidth)/2,y:(window.innerHeight-e.defaultHeight)/2})}),(()=>{var c=No();return k(c,()=>e.label),E(d=>{var u=e.defaultWidth+"px",h=e.defaultHeight+"px",f=`translate(${s().x}px, ${s().y}px)`;return u!==d.e&&z(c,"width",d.e=u),h!==d.t&&z(c,"height",d.t=h),f!==d.a&&z(c,"transform",d.a=f),d},{e:void 0,t:void 0,a:void 0}),c})()};j(["pointerdown","click"]);const zo=`
                                <svg
                                        viewBox="0 0 24 24"
                                        fill="none"
                                        stroke="currentColor"
                                        stroke-width="2"
                                        stroke-linecap="round"
                                        stroke-linejoin="round"
                                        style={{ "pointer-events": "none" }}
                                >
                                        <rect
                                                x="3"
                                                y="3"
                                                width="18"
                                                height="18"
                                                rx="2"
                                                ry="2"
                                        />
                                        <line x1="9" y1="3" x2="9" y2="21" />
                                        <line x1="3" y1="9" x2="21" y2="9" />
                                        <line x1="3" y1="15" x2="21" y2="15" />
                                </svg>
`,To=`
                                <svg
                                        viewBox="0 0 24 24"
                                        fill="none"
                                        stroke="currentColor"
                                        stroke-width="2"
                                        stroke-linecap="round"
                                        stroke-linejoin="round"
                                        style={{ "pointer-events": "none" }}
                                >
                                        <path d="M4 19.5A2.5 2.5 0 0 1 6.5 17H20" />
                                        <path d="M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z" />
                                        <circle cx="12" cy="12" r="2" />
                                        <path d="M12 7v3" />
                                        <path d="M12 14v3" />
                                </svg>
`,Do=`
                                <svg
                                        viewBox="0 0 24 24"
                                        fill="none"
                                        stroke="currentColor"
                                        stroke-width="2"
                                        stroke-linecap="round"
                                        stroke-linejoin="round"
                                        style={{ "pointer-events": "none" }}
                                >
                                        <path d="M9 11l3 3L22 4" />
                                        <path d="M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11" />
                                </svg>
`,Oo=e=>({nodeTypes:[{type:"fields-node",label:"Fields",description:"A structured set of fields for grouping data.",defaultWidth:250,defaultHeight:160,defaultData:{fields:["field1 : Type","field2"],description:"Enter description here"},icon:zo},{type:"function-node",label:"Function",description:"Executes a function with inputs and outputs.",defaultWidth:245,defaultHeight:215,defaultData:{inputs:["input1","input2"],outputs:["result"]},icon:To},{type:"task-node",label:"Tasks",description:"Represents a step or an action in a workflow.",defaultWidth:220,defaultHeight:110,defaultData:{tasks:[{description:"New step",done:!1}]},icon:Do}]}),Io=X({create:e=>{const t=Oo(),n=vo(),s=wo(n,e);return{helper:t,state:n,logic:s,view:(o,i,r,l)=>Mo(o,i,r,l)}}});var Ro=p("<div class=fields-node><div><textarea></textarea></div><div>"),Ho=p("<div style=position:absolute;right:0;height:100%;display:flex;align-items:center;padding-inline:5px;background:#1a73e8;color:white>"),Vo=p("<div class=field-item><div class=field-dot></div><input type=text>");const jo=e=>{const[t,n]=M(null),s=r=>{e.kit.setNodes(l=>l.id===e.node.id,"data","extra","description",r)},o=(r,l)=>{l?e.kit.setNodes(a=>a.id===e.node.id,"data","extra","fields",r,l):e.kit.setNodes(a=>a.id===e.node.id,"data","extra","fields",e.node.data?.extra?.fields.filter((a,c)=>c!==r))},i=()=>{e.node.data?.extra?.fields?.length,e.kit.setNodes(r=>r.id===e.node.id,"data","extra","fields",[...e.node.data?.extra?.fields??[],""])};return(()=>{var r=Ro(),l=r.firstChild,a=l.firstChild,c=l.nextSibling;return a.addEventListener("change",()=>e.kit.updateNodes()),a.$$input=d=>s(d.currentTarget.value),k(c,b(F,{get each(){return e.node.data?.extra?.fields||[]},children:(d,u)=>{const[h,f]=M(d),g=S(()=>h().includes(":")&&h().split(":")[1]),v=S(()=>t()===u());let m;return re(()=>{v()&&(m?.focus(),m?.select())}),(()=>{var y=Vo(),w=y.firstChild,x=w.nextSibling;x.addEventListener("change",C=>{o(u(),C.currentTarget.value),e.kit.updateNodes()}),x.$$input=C=>f(C.currentTarget.value),x.$$keydown=C=>{C.key==="Enter"&&i()},x.addEventListener("blur",()=>n(null)),x.addEventListener("focus",()=>n(u()));var $=m;return typeof $=="function"?ee($,x):m=x,k(y,b(O,{get when(){return B(()=>!v())()&&g()},get children(){var C=Ho();return k(C,()=>d.split(":")[1]),C}}),null),E(()=>x.value=v()?h():h().split(":")[0]),y})()}})),E(()=>a.value=e.node.data?.extra?.description??""),r})()};j(["input","keydown"]);var Bo=p("<div class=function-node><div class=section><div class=section-header>Inputs<button class=btn>+</button></div></div><div class=divider></div><div class=section><div class=section-header>Outputs<button class=btn>+"),Fo=p("<div class=input-item><span class=icon></span><input type=text>"),Uo=p("<div class=output-item><span class=icon></span><input type=text>");const Xo=e=>{const t=(r,l)=>{l?e.kit.setNodes(a=>a.id===e.node.id,"data","extra","inputs",r,l):e.kit.setNodes(a=>a.id===e.node.id,"data","extra","inputs",e.node.data?.extra?.inputs.filter((a,c)=>c!==r)),e.kit.updateNodes()},n=(r,l)=>{l?e.kit.setNodes(a=>a.id===e.node.id,"data","extra","outputs",r,l):e.kit.setNodes(a=>a.id===e.node.id,"data","extra","outputs",e.node.data?.extra?.outputs.filter((a,c)=>c!==r)),e.kit.updateNodes()},s=()=>{i("inputs",["new input",...e.node.data?.extra?.inputs??[]])},o=()=>{i("outputs",["new output",...e.node.data?.extra?.outputs??[]])},i=(r,l)=>{e.kit.setNodes(a=>a.id===e.node.id,"data","extra",r,l),e.kit.updateNodes()};return(()=>{var r=Bo(),l=r.firstChild,a=l.firstChild,c=a.firstChild,d=c.nextSibling,u=l.nextSibling,h=u.nextSibling,f=h.firstChild,g=f.firstChild,v=g.nextSibling;return d.$$pointerdown=s,k(l,b(F,{get each(){return e.node.data?.extra?.inputs||[]},children:(m,y)=>(()=>{var w=Fo(),x=w.firstChild,$=x.nextSibling;return $.addEventListener("change",C=>t(y(),C.currentTarget.value)),$.value=m,w})()}),null),v.$$pointerdown=o,k(h,b(F,{get each(){return e.node.data?.extra?.outputs||[]},children:(m,y)=>(()=>{var w=Uo(),x=w.firstChild,$=x.nextSibling;return $.addEventListener("change",C=>n(y(),C.currentTarget.value)),$.value=m,w})()}),null),r})()};j(["pointerdown"]);var Wo=p("<div class=task-node><div class=status-badge>"),Yo=p('<svg width=14 height=14 viewBox="0 0 24 24"fill=none stroke=white stroke-width=3 stroke-linecap=round stroke-linejoin=round><polyline points="20 6 9 17 4 12">'),Ko=p("<div class=task-item><div class=checkbox></div><div class=task-content><div><textarea>");const Go=e=>{const t=S(()=>e.node.data?.extra?.tasks.every(o=>o.done)),n=o=>{e.kit.setNodes(i=>i.id===e.node.id,"data","extra","tasks",o,"done",i=>!i),e.kit.updateNodes()},s=(o,i)=>{e.kit.setNodes(r=>r.id===e.node.id,"data","extra","tasks",o,"description",i),e.kit.updateNodes()};return(()=>{var o=Wo(),i=o.firstChild;return k(i,b(O,{get when(){return t()},fallback:" Pending",children:" Completed"})),k(o,b(F,{get each(){return e.node.data?.extra?.tasks},children:(r,l)=>(()=>{var a=Ko(),c=a.firstChild,d=c.nextSibling,u=d.firstChild,h=u.firstChild;return c.$$pointerdown=()=>n(l()),k(c,b(O,{get when(){return r.done},get children(){return Yo()}})),h.addEventListener("change",f=>s(l(),f.currentTarget.value)),E(()=>c.classList.toggle("checked",!!r.done)),E(()=>h.value=r.description),a})()}),null),E(r=>{var l=!!t(),a=!t();return l!==r.e&&i.classList.toggle("completed",r.e=l),a!==r.t&&i.classList.toggle("pending",r.t=a),r},{e:void 0,t:void 0}),o})()};j(["pointerdown"]);var Zo=p("<div style=background:#000;width:100vw;height:100vh;display:flex;align-items:center;position:relative><div id=external>");const qo=()=>{const e=We(JSON.parse(localStorage.nodes??"[]")),t=We(JSON.parse(localStorage.connections??"[]")),n=M(JSON.parse(localStorage.vp??'{ "x": 0, "y": 0, "zoom": 1 }')),s=()=>{console.log("nodes changed"),localStorage.nodes=JSON.stringify(V(e[0]))},o=()=>{console.log("connections changed"),localStorage.connections=JSON.stringify(V(t[0]))},i=()=>{console.log("viewport changed"),localStorage.vp=JSON.stringify(n[0]())};return(()=>{var r=Zo(),l=r.firstChild;return k(r,b(jn,{nodesStore:e,onNodesChange:s,connectionsStore:t,onConnectionsChange:o,viewportSignal:n,onViewportChange:i,components:{"node-toolbar":fo,"connection-toolbar":go,"fields-node":jo,"function-node":Xo,"task-node":Go},children:a=>[b(Zn,{kit:a,get type(){return dt.backgroundType[0]()}}),b(co,{kit:a}),b(no,{kit:a}),b(Io,{kit:a})]}),l),r})()};Ot(()=>b(qo,{}),document.getElementById("root"));
