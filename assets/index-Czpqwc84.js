(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const i of o)if(i.type==="childList")for(const s of i.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function n(o){const i={};return o.integrity&&(i.integrity=o.integrity),o.referrerPolicy&&(i.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?i.credentials="include":o.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(o){if(o.ep)return;o.ep=!0;const i=n(o);fetch(o.href,i)}})();const at=!1,dt=(e,t)=>e===t,j=Symbol("solid-proxy"),ut=typeof Proxy=="function",Pe=Symbol("solid-track"),ge={equals:dt};let Xe=Ge;const Y=1,ve=2,We={owned:null,cleanups:null,context:null,owner:null};var M=null;let Se=null,ft=null,A=null,L=null,F=null,pe=0;function he(e,t){const n=A,r=M,o=e.length===0,i=t===void 0?r:t,s=o?We:{owned:null,cleanups:null,context:i?i.context:null,owner:i},l=o?e:()=>e(()=>O(()=>re(s)));M=s,A=null;try{return ee(l,!0)}finally{A=n,M=r}}function I(e,t){t=t?Object.assign({},ge,t):ge;const n={value:e,observers:null,observerSlots:null,comparator:t.equals||void 0},r=o=>(typeof o=="function"&&(o=o(n.value)),Ke(n,o));return[Ye.bind(n),r]}function C(e,t,n){const r=Ie(e,t,!1,Y);ue(r)}function ae(e,t,n){Xe=yt;const r=Ie(e,t,!1,Y);r.user=!0,F?F.push(r):ue(r)}function x(e,t,n){n=n?Object.assign({},ge,n):ge;const r=Ie(e,t,!0,0);return r.observers=null,r.observerSlots=null,r.comparator=n.equals||void 0,ue(r),Ye.bind(r)}function ht(e){return ee(e,!1)}function O(e){if(A===null)return e();const t=A;A=null;try{return e()}finally{A=t}}function gt(e,t,n){const r=Array.isArray(e);let o,i=n&&n.defer;return s=>{let l;if(r){l=Array(e.length);for(let c=0;c<e.length;c++)l[c]=e[c]()}else l=e();if(i)return i=!1,s;const a=O(()=>t(l,o,s));return o=l,a}}function de(e){ae(()=>O(e))}function Z(e){return M===null||(M.cleanups===null?M.cleanups=[e]:M.cleanups.push(e)),e}function Ae(){return A}const[Ro,Ho]=I(!1);function vt(e){const t=x(e),n=x(()=>Me(t()));return n.toArray=()=>{const r=n();return Array.isArray(r)?r:r!=null?[r]:[]},n}function Ye(){if(this.sources&&this.state)if(this.state===Y)ue(this);else{const e=L;L=null,ee(()=>me(this),!1),L=e}if(A){const e=this.observers?this.observers.length:0;A.sources?(A.sources.push(this),A.sourceSlots.push(e)):(A.sources=[this],A.sourceSlots=[e]),this.observers?(this.observers.push(A),this.observerSlots.push(A.sources.length-1)):(this.observers=[A],this.observerSlots=[A.sources.length-1])}return this.value}function Ke(e,t,n){let r=e.value;return(!e.comparator||!e.comparator(r,t))&&(e.value=t,e.observers&&e.observers.length&&ee(()=>{for(let o=0;o<e.observers.length;o+=1){const i=e.observers[o],s=Se&&Se.running;s&&Se.disposed.has(i),(s?!i.tState:!i.state)&&(i.pure?L.push(i):F.push(i),i.observers&&Ze(i)),s||(i.state=Y)}if(L.length>1e6)throw L=[],new Error},!1)),t}function ue(e){if(!e.fn)return;re(e);const t=pe;wt(e,e.value,t)}function wt(e,t,n){let r;const o=M,i=A;A=M=e;try{r=e.fn(t)}catch(s){return e.pure&&(e.state=Y,e.owned&&e.owned.forEach(re),e.owned=null),e.updatedAt=n+1,qe(s)}finally{A=i,M=o}(!e.updatedAt||e.updatedAt<=n)&&(e.updatedAt!=null&&"observers"in e?Ke(e,r):e.value=r,e.updatedAt=n)}function Ie(e,t,n,r=Y,o){const i={fn:e,state:r,updatedAt:null,owned:null,sources:null,sourceSlots:null,cleanups:null,value:t,owner:M,context:M?M.context:null,pure:n};return M===null||M!==We&&(M.owned?M.owned.push(i):M.owned=[i]),i}function we(e){if(e.state===0)return;if(e.state===ve)return me(e);if(e.suspense&&O(e.suspense.inFallback))return e.suspense.effects.push(e);const t=[e];for(;(e=e.owner)&&(!e.updatedAt||e.updatedAt<pe);)e.state&&t.push(e);for(let n=t.length-1;n>=0;n--)if(e=t[n],e.state===Y)ue(e);else if(e.state===ve){const r=L;L=null,ee(()=>me(e,t[0]),!1),L=r}}function ee(e,t){if(L)return e();let n=!1;t||(L=[]),F?n=!0:F=[],pe++;try{const r=e();return mt(n),r}catch(r){n||(F=null),L=null,qe(r)}}function mt(e){if(L&&(Ge(L),L=null),e)return;const t=F;F=null,t.length&&ee(()=>Xe(t),!1)}function Ge(e){for(let t=0;t<e.length;t++)we(e[t])}function yt(e){let t,n=0;for(t=0;t<e.length;t++){const r=e[t];r.user?e[n++]=r:we(r)}for(t=0;t<n;t++)we(e[t])}function me(e,t){e.state=0;for(let n=0;n<e.sources.length;n+=1){const r=e.sources[n];if(r.sources){const o=r.state;o===Y?r!==t&&(!r.updatedAt||r.updatedAt<pe)&&we(r):o===ve&&me(r,t)}}}function Ze(e){for(let t=0;t<e.observers.length;t+=1){const n=e.observers[t];n.state||(n.state=ve,n.pure?L.push(n):F.push(n),n.observers&&Ze(n))}}function re(e){let t;if(e.sources)for(;e.sources.length;){const n=e.sources.pop(),r=e.sourceSlots.pop(),o=n.observers;if(o&&o.length){const i=o.pop(),s=n.observerSlots.pop();r<o.length&&(i.sourceSlots[s]=r,o[r]=i,n.observerSlots[r]=s)}}if(e.tOwned){for(t=e.tOwned.length-1;t>=0;t--)re(e.tOwned[t]);delete e.tOwned}if(e.owned){for(t=e.owned.length-1;t>=0;t--)re(e.owned[t]);e.owned=null}if(e.cleanups){for(t=e.cleanups.length-1;t>=0;t--)e.cleanups[t]();e.cleanups=null}e.state=0}function bt(e){return e instanceof Error?e:new Error(typeof e=="string"?e:"Unknown error",{cause:e})}function qe(e,t=M){throw bt(e)}function Me(e){if(typeof e=="function"&&!e.length)return Me(e());if(Array.isArray(e)){const t=[];for(let n=0;n<e.length;n++){const r=Me(e[n]);Array.isArray(r)?t.push.apply(t,r):t.push(r)}return t}return e}const kt=Symbol("fallback");function Re(e){for(let t=0;t<e.length;t++)e[t]()}function xt(e,t,n={}){let r=[],o=[],i=[],s=0,l=t.length>1?[]:null;return Z(()=>Re(i)),()=>{let a=e()||[],c=a.length,d,u;return a[Pe],O(()=>{let f,g,v,w,m,k,p,S,P;if(c===0)s!==0&&(Re(i),i=[],r=[],o=[],s=0,l&&(l=[])),n.fallback&&(r=[kt],o[0]=he(N=>(i[0]=N,n.fallback())),s=1);else if(s===0){for(o=new Array(c),u=0;u<c;u++)r[u]=a[u],o[u]=he(h);s=c}else{for(v=new Array(c),w=new Array(c),l&&(m=new Array(c)),k=0,p=Math.min(s,c);k<p&&r[k]===a[k];k++);for(p=s-1,S=c-1;p>=k&&S>=k&&r[p]===a[S];p--,S--)v[S]=o[p],w[S]=i[p],l&&(m[S]=l[p]);for(f=new Map,g=new Array(S+1),u=S;u>=k;u--)P=a[u],d=f.get(P),g[u]=d===void 0?-1:d,f.set(P,u);for(d=k;d<=p;d++)P=r[d],u=f.get(P),u!==void 0&&u!==-1?(v[u]=o[d],w[u]=i[d],l&&(m[u]=l[d]),u=g[u],f.set(P,u)):i[d]();for(u=k;u<c;u++)u in v?(o[u]=v[u],i[u]=w[u],l&&(l[u]=m[u],l[u](u))):o[u]=he(h);o=o.slice(0,s=c),r=a.slice(0)}return o});function h(f){if(i[u]=f,l){const[g,v]=I(u);return l[u]=v,t(a[u],g)}return t(a[u])}}}function y(e,t){return O(()=>e(t||{}))}function fe(){return!0}const He={get(e,t,n){return t===j?n:e.get(t)},has(e,t){return t===j?!0:e.has(t)},set:fe,deleteProperty:fe,getOwnPropertyDescriptor(e,t){return{configurable:!0,enumerable:!0,get(){return e.get(t)},set:fe,deleteProperty:fe}},ownKeys(e){return e.keys()}};function Je(e,...t){const n=t.length;if(ut&&j in e){const o=n>1?t.flat():t[0],i=t.map(s=>new Proxy({get(l){return s.includes(l)?e[l]:void 0},has(l){return s.includes(l)&&l in e},keys(){return s.filter(l=>l in e)}},He));return i.push(new Proxy({get(s){return o.includes(s)?void 0:e[s]},has(s){return o.includes(s)?!1:s in e},keys(){return Object.keys(e).filter(s=>!o.includes(s))}},He)),i}const r=[];for(let o=0;o<=n;o++)r[o]={};for(const o of Object.getOwnPropertyNames(e)){let i=n;for(let a=0;a<t.length;a++)if(t[a].includes(o)){i=a;break}const s=Object.getOwnPropertyDescriptor(e,o);!s.get&&!s.set&&s.enumerable&&s.writable&&s.configurable?r[i][o]=s.value:Object.defineProperty(r[i],o,s)}return r}const Qe=e=>`Stale read from <${e}>.`;function U(e){const t="fallback"in e&&{fallback:()=>e.fallback};return x(xt(()=>e.each,e.children,t||void 0))}function R(e){const t=e.keyed,n=x(()=>e.when,void 0,void 0),r=t?n:x(n,void 0,{equals:(o,i)=>!o==!i});return x(()=>{const o=r();if(o){const i=e.children;return typeof i=="function"&&i.length>0?O(()=>i(t?o:()=>{if(!O(r))throw Qe("Show");return n()})):i}return e.fallback},void 0,void 0)}function et(e){const t=vt(()=>e.children),n=x(()=>{const r=t(),o=Array.isArray(r)?r:[r];let i=()=>{};for(let s=0;s<o.length;s++){const l=s,a=o[s],c=i,d=x(()=>c()?void 0:a.when,void 0,void 0),u=a.keyed?d:x(d,void 0,{equals:(h,f)=>!h==!f});i=()=>c()||(u()?[l,d,a]:void 0)}return i});return x(()=>{const r=n()();if(!r)return e.fallback;const[o,i,s]=r,l=s.children;return typeof l=="function"&&l.length>0?O(()=>l(s.keyed?i():()=>{if(O(n)()?.[0]!==o)throw Qe("Match");return i()})):l},void 0,void 0)}function Ne(e){return e}const pt=["allowfullscreen","async","alpha","autofocus","autoplay","checked","controls","default","disabled","formnovalidate","hidden","indeterminate","inert","ismap","loop","multiple","muted","nomodule","novalidate","open","playsinline","readonly","required","reversed","seamless","selected","adauctionheaders","browsingtopics","credentialless","defaultchecked","defaultmuted","defaultselected","defer","disablepictureinpicture","disableremoteplayback","preservespitch","shadowrootclonable","shadowrootcustomelementregistry","shadowrootdelegatesfocus","shadowrootserializable","sharedstoragewritable"],$t=new Set(["className","value","readOnly","noValidate","formNoValidate","isMap","noModule","playsInline","adAuctionHeaders","allowFullscreen","browsingTopics","defaultChecked","defaultMuted","defaultSelected","disablePictureInPicture","disableRemotePlayback","preservesPitch","shadowRootClonable","shadowRootCustomElementRegistry","shadowRootDelegatesFocus","shadowRootSerializable","sharedStorageWritable",...pt]),Ct=new Set(["innerHTML","textContent","innerText","children"]),St=Object.assign(Object.create(null),{className:"class",htmlFor:"for"}),Et=Object.assign(Object.create(null),{class:"className",novalidate:{$:"noValidate",FORM:1},formnovalidate:{$:"formNoValidate",BUTTON:1,INPUT:1},ismap:{$:"isMap",IMG:1},nomodule:{$:"noModule",SCRIPT:1},playsinline:{$:"playsInline",VIDEO:1},readonly:{$:"readOnly",INPUT:1,TEXTAREA:1},adauctionheaders:{$:"adAuctionHeaders",IFRAME:1},allowfullscreen:{$:"allowFullscreen",IFRAME:1},browsingtopics:{$:"browsingTopics",IMG:1},defaultchecked:{$:"defaultChecked",INPUT:1},defaultmuted:{$:"defaultMuted",AUDIO:1,VIDEO:1},defaultselected:{$:"defaultSelected",OPTION:1},disablepictureinpicture:{$:"disablePictureInPicture",VIDEO:1},disableremoteplayback:{$:"disableRemotePlayback",AUDIO:1,VIDEO:1},preservespitch:{$:"preservesPitch",AUDIO:1,VIDEO:1},shadowrootclonable:{$:"shadowRootClonable",TEMPLATE:1},shadowrootdelegatesfocus:{$:"shadowRootDelegatesFocus",TEMPLATE:1},shadowrootserializable:{$:"shadowRootSerializable",TEMPLATE:1},sharedstoragewritable:{$:"sharedStorageWritable",IFRAME:1,IMG:1}});function Pt(e,t){const n=Et[e];return typeof n=="object"?n[t]?n.$:void 0:n}const At=new Set(["beforeinput","click","dblclick","contextmenu","focusin","focusout","input","keydown","keyup","mousedown","mousemove","mouseout","mouseover","mouseup","pointerdown","pointermove","pointerout","pointerover","pointerup","touchend","touchmove","touchstart"]),Mt=new Set(["altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignObject","g","glyph","glyphRef","hkern","image","line","linearGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","set","stop","svg","switch","symbol","text","textPath","tref","tspan","use","view","vkern"]),Nt={xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace"},se=e=>x(()=>e());function Lt(e,t,n){let r=n.length,o=t.length,i=r,s=0,l=0,a=t[o-1].nextSibling,c=null;for(;s<o||l<i;){if(t[s]===n[l]){s++,l++;continue}for(;t[o-1]===n[i-1];)o--,i--;if(o===s){const d=i<r?l?n[l-1].nextSibling:n[i-l]:a;for(;l<i;)e.insertBefore(n[l++],d)}else if(i===l)for(;s<o;)(!c||!c.has(t[s]))&&t[s].remove(),s++;else if(t[s]===n[i-1]&&n[l]===t[o-1]){const d=t[--o].nextSibling;e.insertBefore(n[l++],t[s++].nextSibling),e.insertBefore(n[--i],d),t[o]=n[i]}else{if(!c){c=new Map;let u=l;for(;u<i;)c.set(n[u],u++)}const d=c.get(t[s]);if(d!=null)if(l<d&&d<i){let u=s,h=1,f;for(;++u<o&&u<i&&!((f=c.get(t[u]))==null||f!==d+h);)h++;if(h>d-l){const g=t[s];for(;l<d;)e.insertBefore(n[l++],g)}else e.replaceChild(n[l++],t[s++])}else s++;else t[s++].remove()}}}const je="_$DX_DELEGATE";function Dt(e,t,n,r={}){let o;return he(i=>{o=i,t===document?e():$(t,e(),t.firstChild?null:void 0,n)},r.owner),()=>{o(),t.textContent=""}}function b(e,t,n,r){let o;const i=()=>{const l=r?document.createElementNS("http://www.w3.org/1998/Math/MathML","template"):document.createElement("template");return l.innerHTML=e,n?l.content.firstChild.firstChild:r?l.firstChild:l.content.firstChild},s=t?()=>O(()=>document.importNode(o||(o=i()),!0)):()=>(o||(o=i())).cloneNode(!0);return s.cloneNode=s,s}function H(e,t=window.document){const n=t[je]||(t[je]=new Set);for(let r=0,o=e.length;r<o;r++){const i=e[r];n.has(i)||(n.add(i),t.addEventListener(i,Ht))}}function E(e,t,n){n==null?e.removeAttribute(t):e.setAttribute(t,n)}function zt(e,t,n,r){r==null?e.removeAttributeNS(t,n):e.setAttributeNS(t,n,r)}function Ot(e,t,n){n?e.setAttribute(t,""):e.removeAttribute(t)}function tt(e,t){t==null?e.removeAttribute("class"):e.className=t}function D(e,t,n,r){if(r)Array.isArray(n)?(e[`$$${t}`]=n[0],e[`$$${t}Data`]=n[1]):e[`$$${t}`]=n;else if(Array.isArray(n)){const o=n[0];e.addEventListener(t,n[0]=i=>o.call(e,n[1],i))}else e.addEventListener(t,n,typeof n!="function"&&n)}function _t(e,t,n={}){const r=Object.keys(t||{}),o=Object.keys(n);let i,s;for(i=0,s=o.length;i<s;i++){const l=o[i];!l||l==="undefined"||t[l]||(Be(e,l,!1),delete n[l])}for(i=0,s=r.length;i<s;i++){const l=r[i],a=!!t[l];!l||l==="undefined"||n[l]===a||!a||(Be(e,l,!0),n[l]=a)}return n}function $e(e,t,n){if(!t)return n?E(e,"style"):t;const r=e.style;if(typeof t=="string")return r.cssText=t;typeof n=="string"&&(r.cssText=n=void 0),n||(n={}),t||(t={});let o,i;for(i in n)t[i]==null&&r.removeProperty(i),delete n[i];for(i in t)o=t[i],o!==n[i]&&(r.setProperty(i,o),n[i]=o);return n}function z(e,t,n){n!=null?e.style.setProperty(t,n):e.style.removeProperty(t)}function It(e,t={},n,r){const o={};return C(()=>o.children=le(e,t.children,o.children)),C(()=>typeof t.ref=="function"&&G(t.ref,e)),C(()=>Tt(e,t,n,!0,o,!0)),o}function G(e,t,n){return O(()=>e(t,n))}function $(e,t,n,r){if(n!==void 0&&!r&&(r=[]),typeof t!="function")return le(e,t,r,n);C(o=>le(e,t(),o,n),r)}function Tt(e,t,n,r,o={},i=!1){t||(t={});for(const s in o)if(!(s in t)){if(s==="children")continue;o[s]=Ve(e,s,null,o[s],n,i,t)}for(const s in t){if(s==="children")continue;const l=t[s];o[s]=Ve(e,s,l,o[s],n,i,t)}}function Rt(e){return e.toLowerCase().replace(/-([a-z])/g,(t,n)=>n.toUpperCase())}function Be(e,t,n){const r=t.trim().split(/\s+/);for(let o=0,i=r.length;o<i;o++)e.classList.toggle(r[o],n)}function Ve(e,t,n,r,o,i,s){let l,a,c,d,u;if(t==="style")return $e(e,n,r);if(t==="classList")return _t(e,n,r);if(n===r)return r;if(t==="ref")i||n(e);else if(t.slice(0,3)==="on:"){const h=t.slice(3);r&&e.removeEventListener(h,r,typeof r!="function"&&r),n&&e.addEventListener(h,n,typeof n!="function"&&n)}else if(t.slice(0,10)==="oncapture:"){const h=t.slice(10);r&&e.removeEventListener(h,r,!0),n&&e.addEventListener(h,n,!0)}else if(t.slice(0,2)==="on"){const h=t.slice(2).toLowerCase(),f=At.has(h);if(!f&&r){const g=Array.isArray(r)?r[0]:r;e.removeEventListener(h,g)}(f||n)&&(D(e,h,n,f),f&&H([h]))}else if(t.slice(0,5)==="attr:")E(e,t.slice(5),n);else if(t.slice(0,5)==="bool:")Ot(e,t.slice(5),n);else if((u=t.slice(0,5)==="prop:")||(c=Ct.has(t))||!o&&((d=Pt(t,e.tagName))||(a=$t.has(t)))||(l=e.nodeName.includes("-")||"is"in s))u&&(t=t.slice(5),a=!0),t==="class"||t==="className"?tt(e,n):l&&!a&&!c?e[Rt(t)]=n:e[d||t]=n;else{const h=o&&t.indexOf(":")>-1&&Nt[t.split(":")[0]];h?zt(e,h,t,n):E(e,St[t]||t,n)}return n}function Ht(e){let t=e.target;const n=`$$${e.type}`,r=e.target,o=e.currentTarget,i=a=>Object.defineProperty(e,"target",{configurable:!0,value:a}),s=()=>{const a=t[n];if(a&&!t.disabled){const c=t[`${n}Data`];if(c!==void 0?a.call(t,c,e):a.call(t,e),e.cancelBubble)return}return t.host&&typeof t.host!="string"&&!t.host._$host&&t.contains(e.target)&&i(t.host),!0},l=()=>{for(;s()&&(t=t._$host||t.parentNode||t.host););};if(Object.defineProperty(e,"currentTarget",{configurable:!0,get(){return t||document}}),e.composedPath){const a=e.composedPath();i(a[0]);for(let c=0;c<a.length-2&&(t=a[c],!!s());c++){if(t._$host){t=t._$host,l();break}if(t.parentNode===o)break}}else l();i(r)}function le(e,t,n,r,o){for(;typeof n=="function";)n=n();if(t===n)return n;const i=typeof t,s=r!==void 0;if(e=s&&n[0]&&n[0].parentNode||e,i==="string"||i==="number"){if(i==="number"&&(t=t.toString(),t===n))return n;if(s){let l=n[0];l&&l.nodeType===3?l.data!==t&&(l.data=t):l=document.createTextNode(t),n=q(e,n,r,l)}else n!==""&&typeof n=="string"?n=e.firstChild.data=t:n=e.textContent=t}else if(t==null||i==="boolean")n=q(e,n,r);else{if(i==="function")return C(()=>{let l=t();for(;typeof l=="function";)l=l();n=le(e,l,n,r)}),()=>n;if(Array.isArray(t)){const l=[],a=n&&Array.isArray(n);if(Le(l,t,n,o))return C(()=>n=le(e,l,n,r,!0)),()=>n;if(l.length===0){if(n=q(e,n,r),s)return n}else a?n.length===0?Fe(e,l,r):Lt(e,n,l):(n&&q(e),Fe(e,l));n=l}else if(t.nodeType){if(Array.isArray(n)){if(s)return n=q(e,n,r,t);q(e,n,null,t)}else n==null||n===""||!e.firstChild?e.appendChild(t):e.replaceChild(t,e.firstChild);n=t}}return n}function Le(e,t,n,r){let o=!1;for(let i=0,s=t.length;i<s;i++){let l=t[i],a=n&&n[e.length],c;if(!(l==null||l===!0||l===!1))if((c=typeof l)=="object"&&l.nodeType)e.push(l);else if(Array.isArray(l))o=Le(e,l,a)||o;else if(c==="function")if(r){for(;typeof l=="function";)l=l();o=Le(e,Array.isArray(l)?l:[l],Array.isArray(a)?a:[a])||o}else e.push(l),o=!0;else{const d=String(l);a&&a.nodeType===3&&a.data===d?e.push(a):e.push(document.createTextNode(d))}}return o}function Fe(e,t,n=null){for(let r=0,o=t.length;r<o;r++)e.insertBefore(t[r],n)}function q(e,t,n,r){if(n===void 0)return e.textContent="";const o=r||document.createTextNode("");if(t.length){let i=!1;for(let s=t.length-1;s>=0;s--){const l=t[s];if(o!==l){const a=l.parentNode===e;!i&&!s?a?e.replaceChild(o,l):e.insertBefore(o,n):a&&l.remove()}else i=!0}}else e.insertBefore(o,n);return[o]}const jt="http://www.w3.org/2000/svg";function Bt(e,t=!1,n=void 0){return t?document.createElementNS(jt,e):document.createElement(e,{is:n})}function Vt(e,t){const n=x(e);return x(()=>{const r=n();switch(typeof r){case"function":return O(()=>r(t));case"string":const o=Mt.has(r),i=Bt(r,o,O(()=>t.is));return It(i,t,o),i}})}function De(e){const[,t]=Je(e,["component"]);return Vt(()=>e.component,t)}const B=e=>t=>{const{helper:n,state:r,logic:o,view:i}=e.create(t);return i(r,o,t,n)},ze=Symbol("store-raw"),Q=Symbol("store-node"),V=Symbol("store-has"),nt=Symbol("store-self");function ot(e){let t=e[j];if(!t&&(Object.defineProperty(e,j,{value:t=new Proxy(e,Xt)}),!Array.isArray(e))){const n=Object.keys(e),r=Object.getOwnPropertyDescriptors(e);for(let o=0,i=n.length;o<i;o++){const s=n[o];r[s].get&&Object.defineProperty(e,s,{enumerable:r[s].enumerable,get:r[s].get.bind(t)})}}return t}function X(e){let t;return e!=null&&typeof e=="object"&&(e[j]||!(t=Object.getPrototypeOf(e))||t===Object.prototype||Array.isArray(e))}function T(e,t=new Set){let n,r,o,i;if(n=e!=null&&e[ze])return n;if(!X(e)||t.has(e))return e;if(Array.isArray(e)){Object.isFrozen(e)?e=e.slice(0):t.add(e);for(let s=0,l=e.length;s<l;s++)o=e[s],(r=T(o,t))!==o&&(e[s]=r)}else{Object.isFrozen(e)?e=Object.assign({},e):t.add(e);const s=Object.keys(e),l=Object.getOwnPropertyDescriptors(e);for(let a=0,c=s.length;a<c;a++)i=s[a],!l[i].get&&(o=e[i],(r=T(o,t))!==o&&(e[i]=r))}return e}function ye(e,t){let n=e[t];return n||Object.defineProperty(e,t,{value:n=Object.create(null)}),n}function ce(e,t,n){if(e[t])return e[t];const[r,o]=I(n,{equals:!1,internal:!0});return r.$=o,e[t]=r}function Ft(e,t){const n=Reflect.getOwnPropertyDescriptor(e,t);return!n||n.get||!n.configurable||t===j||t===Q||(delete n.value,delete n.writable,n.get=()=>e[j][t]),n}function it(e){Ae()&&ce(ye(e,Q),nt)()}function Ut(e){return it(e),Reflect.ownKeys(e)}const Xt={get(e,t,n){if(t===ze)return e;if(t===j)return n;if(t===Pe)return it(e),n;const r=ye(e,Q),o=r[t];let i=o?o():e[t];if(t===Q||t===V||t==="__proto__")return i;if(!o){const s=Object.getOwnPropertyDescriptor(e,t);Ae()&&(typeof i!="function"||e.hasOwnProperty(t))&&!(s&&s.get)&&(i=ce(r,t,i)())}return X(i)?ot(i):i},has(e,t){return t===ze||t===j||t===Pe||t===Q||t===V||t==="__proto__"?!0:(Ae()&&ce(ye(e,V),t)(),t in e)},set(){return!0},deleteProperty(){return!0},ownKeys:Ut,getOwnPropertyDescriptor:Ft};function _(e,t,n,r=!1){if(!r&&e[t]===n)return;const o=e[t],i=e.length;n===void 0?(delete e[t],e[V]&&e[V][t]&&o!==void 0&&e[V][t].$()):(e[t]=n,e[V]&&e[V][t]&&o===void 0&&e[V][t].$());let s=ye(e,Q),l;if((l=ce(s,t,o))&&l.$(()=>n),Array.isArray(e)&&e.length!==i){for(let a=e.length;a<i;a++)(l=s[a])&&l.$();(l=ce(s,"length",i))&&l.$(e.length)}(l=s[nt])&&l.$()}function rt(e,t){const n=Object.keys(t);for(let r=0;r<n.length;r+=1){const o=n[r];_(e,o,t[o])}}function Wt(e,t){if(typeof t=="function"&&(t=t(e)),t=T(t),Array.isArray(t)){if(e===t)return;let n=0,r=t.length;for(;n<r;n++){const o=t[n];e[n]!==o&&_(e,n,o)}_(e,"length",r)}else rt(e,t)}function ie(e,t,n=[]){let r,o=e;if(t.length>1){r=t.shift();const s=typeof r,l=Array.isArray(e);if(Array.isArray(r)){for(let a=0;a<r.length;a++)ie(e,[r[a]].concat(t),n);return}else if(l&&s==="function"){for(let a=0;a<e.length;a++)r(e[a],a)&&ie(e,[a].concat(t),n);return}else if(l&&s==="object"){const{from:a=0,to:c=e.length-1,by:d=1}=r;for(let u=a;u<=c;u+=d)ie(e,[u].concat(t),n);return}else if(t.length>1){ie(e[r],t,[r].concat(n));return}o=e[r],n=[r].concat(n)}let i=t[0];typeof i=="function"&&(i=i(o,n),i===o)||r===void 0&&i==null||(i=T(i),r===void 0||X(o)&&X(i)&&!Array.isArray(i)?rt(o,i):_(e,r,i))}function Ue(...[e,t]){const n=T(e||{}),r=Array.isArray(n),o=ot(n);function i(...s){ht(()=>{r&&s.length===1?Wt(n,s[0]):ie(n,s)})}return[o,i]}const Oe=Symbol("store-root");function J(e,t,n,r,o){const i=t[n];if(e===i)return;const s=Array.isArray(e);if(n!==Oe&&(!X(e)||!X(i)||s!==Array.isArray(i)||o&&e[o]!==i[o])){_(t,n,e);return}if(s){if(e.length&&i.length&&(!r||o&&e[0]&&e[0][o]!=null)){let c,d,u,h,f,g,v,w;for(u=0,h=Math.min(i.length,e.length);u<h&&(i[u]===e[u]||o&&i[u]&&e[u]&&i[u][o]&&i[u][o]===e[u][o]);u++)J(e[u],i,u,r,o);const m=new Array(e.length),k=new Map;for(h=i.length-1,f=e.length-1;h>=u&&f>=u&&(i[h]===e[f]||o&&i[h]&&e[f]&&i[h][o]&&i[h][o]===e[f][o]);h--,f--)m[f]=i[h];if(u>f||u>h){for(d=u;d<=f;d++)_(i,d,e[d]);for(;d<e.length;d++)_(i,d,m[d]),J(e[d],i,d,r,o);i.length>e.length&&_(i,"length",e.length);return}for(v=new Array(f+1),d=f;d>=u;d--)g=e[d],w=o&&g?g[o]:g,c=k.get(w),v[d]=c===void 0?-1:c,k.set(w,d);for(c=u;c<=h;c++)g=i[c],w=o&&g?g[o]:g,d=k.get(w),d!==void 0&&d!==-1&&(m[d]=i[c],d=v[d],k.set(w,d));for(d=u;d<e.length;d++)d in m?(_(i,d,m[d]),J(e[d],i,d,r,o)):_(i,d,e[d])}else for(let c=0,d=e.length;c<d;c++)J(e[c],i,c,r,o);i.length>e.length&&_(i,"length",e.length);return}const l=Object.keys(e);for(let c=0,d=l.length;c<d;c++)J(e[l[c]],i,l[c],r,o);const a=Object.keys(i);for(let c=0,d=a.length;c<d;c++)e[a[c]]===void 0&&_(i,a[c],void 0)}function W(e,t={}){const{merge:n,key:r="id"}=t,o=T(e);return i=>{if(!X(i)||!X(o))return o;const s=J(o,{[Oe]:i},Oe,n,r);return s===void 0?i:s}}const Yt=["disableZoom","minZoom","maxZoom","disableNodeDrag","disableEdgeDrag","gridSize","minNodeWidth","maxNodeWidth","minNodeHeight","maxNodeHeight","defaultNode","disableNodeAnchors","disableAnchorConnectionCreation","disableKeyboardShortcuts","disableHorizontalPan","disableVerticalPan"];function Kt(){const[e,t]=I({nodes:[],connections:[]});return{getConnections:()=>e().connections,getNodes:()=>e().nodes,get:e,set:t,getMerged:()=>[...e().nodes,...e().connections],setConnections:u=>t({...e(),connections:u}),setNodes:u=>t({...e(),nodes:u}),addItem:(u,h)=>{t(h==="node"?f=>({...f,nodes:[...f.nodes,u]}):f=>({...f,connections:[...f.connections,u]}))},removeItem:(u,h)=>{t(h==="node"?f=>({...f,nodes:f.nodes.filter(g=>g!==u)}):f=>({...f,connections:f.connections.filter(g=>g!==u)}))},length:()=>e().nodes.length+e().connections.length,clear:()=>t({nodes:[],connections:[]})}}const Gt=e=>{const[t,n]=e.nodesStore,[r,o]=e.connectionsStore,[i,s]=e.viewportSignal,[l,a]=I(!1),c=Kt(),[d,u]=I(null),h=()=>e.onViewportChange?.(i()),f=m=>m+"-"+Math.random().toString(36).substring(2,10),g=m=>{e.onNodesChange(T(t))},v=m=>{e.onConnectionsChange(T(r))},[w]=Je(e,Yt);return{nodes:t,setNodes:n,connections:r,setConnections:o,viewport:i,setViewport:s,focus:l,setFocus:a,selection:c,activeConnectionDestination:d,setActiveConnectionDestination:u,activeConnection:{},container:null,updateNodes:g,updateConnections:v,updateViewport:h,randomId:f,configs:w}},Zt=(e,t)=>{let n;const r=Gt(e),o=()=>{const s=e.children;return typeof s=="function"?s(r):s},i=x(()=>r.viewport());return{kit:r,containerRef:n,Children:o,vp:i}},_e=(e,t)=>Math.round(e/t)*t,be=(e,t,n,r)=>r?{x:(e-r.left-n.x)/n.zoom,y:(t-r.top-n.y)/n.zoom}:null,ke=(e,t,n,r)=>{const o=(e-t)/n;return r?_e(o,r):o},st=()=>{document.documentElement.style.userSelect="none"},lt=()=>{document.documentElement.style.userSelect="auto"},Te=e=>{let t=!1,n,r=null,o=null,i=null;const s=c=>{!t||n===void 0||c.pointerId!==r||(e.preventDefault&&c.preventDefault(),e.onMove(c,n))},l=c=>{!t||c.pointerId!==r||(t=!1,e.preventDefault&&c.preventDefault(),e.onEnd&&n!==void 0&&e.onEnd(c,n),e.disableSelection&&lt(),i?.abort(),i=null,o&&o.hasPointerCapture(c.pointerId)&&o.releasePointerCapture(c.pointerId),r=null,o=null)};return{onPointerDown:c=>{if(t)return;const d=e.onStart?.(c);if(d===void 0)return;e.stopPropagation&&c.stopPropagation(),e.preventDefault&&c.preventDefault(),t=!0,n=d,r=c.pointerId,e.disableSelection&&st(),i=new AbortController;const u=c.currentTarget;u&&u.setPointerCapture&&(u.setPointerCapture(c.pointerId),o=u),window.addEventListener("pointermove",s,{signal:i.signal}),window.addEventListener("pointerup",l,{signal:i.signal}),window.addEventListener("pointercancel",l,{signal:i.signal})}}};function Ee(e,t,n,r){ae(()=>{const o=e();o&&(t()?o.addEventListener(n,r):o.removeEventListener(n,r))})}const qt=(e,t,n)=>{let r={x:0,y:0,zoom:1};const o=new Map;let i=0;const s=f=>{if(!e.kit.focus()&&!f.target.closest(".node")){if(o.set(f.pointerId,{x:f.clientX,y:f.clientY}),o.size===1&&(r=e.kit.viewport()),o.size===2){const[g,v]=Array.from(o.values());g&&v&&(i=Math.hypot(g.x-v.x,g.y-v.y))}window.addEventListener("pointermove",l),window.addEventListener("pointerup",a),window.addEventListener("pointercancel",a)}},l=f=>{if(!o.has(f.pointerId)||t.disableHorizontalPan&&t.disableVerticalPan)return;const g=o.get(f.pointerId);if(g){if(o.set(f.pointerId,{x:f.clientX,y:f.clientY}),o.size===2&&i>0){f.preventDefault();const[v,w]=Array.from(o.values());if(!v||!w)return;const k=Math.hypot(v.x-w.x,v.y-w.y)/i,p=Math.max(.1,Math.min(5,r.zoom*k)),S=(v.x+w.x)/2,P=(v.y+w.y)/2,N=e.containerRef?.getBoundingClientRect();if(!N)return;const te=S-N.left,ne=P-N.top,oe=te-(te-r.x)*(p/r.zoom),K=ne-(ne-r.y)*(p/r.zoom);e.kit.setViewport({zoom:p,x:oe,y:K})}else if(o.size===1){const v=t.disableHorizontalPan?0:f.clientX-g.x,w=t.disableVerticalPan?0:f.clientY-g.y,m=e.kit.viewport();e.kit.setViewport({...m,x:m.x+v,y:m.y+w})}}},a=f=>{o.delete(f.pointerId),o.size===0&&(r!==e.kit.viewport()&&e.kit.updateViewport(),window.removeEventListener("pointermove",l),window.removeEventListener("pointerup",a),window.removeEventListener("pointercancel",a),i=0)},c=f=>{if(e.kit.focus())return;f.preventDefault();const g=f.currentTarget.getBoundingClientRect(),v=f.clientX-g.left,w=f.clientY-g.top,m=e.kit.viewport(),k=m.zoom,p=Math.max(t.maxZoom??.1,Math.min(t.minZoom??5,k-f.deltaY*.001)),S=(v-m.x)/k,P=(w-m.y)/k,N=v-S*p,te=w-P*p;e.kit.setViewport({zoom:p,x:N,y:te})},d=()=>{r!==e.kit.viewport()&&(e.kit.updateViewport(),r=e.kit.viewport())},u=()=>{e.containerRef&&(e.kit.container=e.containerRef)},h=f=>{const g=e.kit.selection;if(f.key==="Delete"&&g.length()>0){const v=g.getConnections(),w=g.getNodes();e.kit.setConnections(W(e.kit.connections.filter(m=>!v.includes(m.id)&&!w.includes(m.from.id)&&!w.includes(m.to.id)))),e.kit.setNodes(W(e.kit.nodes.filter(m=>!w.includes(m.id)))),v.length>0&&e.kit.updateConnections(),w.length>0&&e.kit.updateNodes(),g.clear()}};return Ee(()=>e.containerRef,()=>!t.disableZoom,"wheel",c),Ee(()=>window,()=>!t.disableZoom,"scrollend",d),Ee(()=>e.containerRef,()=>!t.disableKeyboardShortcuts,"keydown",h),de(()=>{u()}),Z(()=>{window.removeEventListener("scrollend",d),window.removeEventListener("pointermove",l),window.removeEventListener("pointerup",a),window.removeEventListener("pointercancel",a)}),{onPointerDown:s}};function ct({start:e,startPos:t,end:n,endPos:r,curve:o=9}){const i=u=>u>0?.5*u:u===0?o*5:o*Math.sqrt(-u),s=(u,h,f)=>u==="left"?[h.x-i(h.x-f.x),h.y]:u==="right"?[h.x+i(f.x-h.x),h.y]:u==="top"?[h.x,h.y-i(h.y-f.y)]:[h.x,h.y+i(f.y-h.y)],[l,a]=s(t,e,n),[c,d]=s(r,n,e);return`M${e.x},${e.y} C${l},${a} ${c},${d} ${n.x},${n.y}`}const Jt=(e,t)=>{let n,r;const o=x(()=>e.kit.selection.getConnections().includes(e.connection.id)),i=x(()=>{const{from:a,to:c}=e.connection,d=t?.getNodeRect(a.id),u=t?.getNodeRect(c.id),h=(f,g)=>{switch(g){case"top":return{x:f.x+f.width/2,y:f.y};case"bottom":return{x:f.x+f.width/2,y:f.y+f.height};case"left":return{x:f.x,y:f.y+f.height/2};case"right":return{x:f.x+f.width,y:f.y+f.height/2}}};return{source:h(d,a.side),target:h(u,c.side)}}),s=x(()=>({x:(i().source.x+i().target.x)/2,y:(i().source.y+i().target.y)/2})),l=x(()=>{const{source:a,target:c}=i(),{from:d,to:u}=e.connection;return ct({start:a,startPos:d.side,end:c,endPos:u.side})});return{connectionRef:n,toolbarRef:r,mid:s,path:l,selected:o}},Qt=(e,t,n)=>{const r=c=>{const d=t.kit.selection;c?d.addItem(t.connection.id,"connection"):d.removeItem(t.connection.id,"connection")},o=c=>{t.kit.setConnections(d=>d.id===t.connection.id,"label",c),t.kit.updateConnections()},i=c=>{c.stopPropagation(),r(!0)},s=new AbortController;ae(()=>{e.connectionRef&&(e.selected()?(e.connectionRef.focus(),window.addEventListener("mousedown",l,{signal:s.signal}),window.addEventListener("keydown",a,{signal:s.signal})):e.connectionRef.classList.contains("selected")&&e.connectionRef.blur())});const l=c=>{const d=c.target;e.toolbarRef&&e.toolbarRef.contains(d)||e.connectionRef&&!e.connectionRef.contains(d)&&!c.ctrlKey&&(r(!1),window.removeEventListener("mousedown",l),window.removeEventListener("keydown",a))},a=c=>{c.key==="Escape"&&(r(!1),window.removeEventListener("keydown",a))};return Z(()=>{s.abort()}),{setLabel:o,onpointerdown:i}};var en=b("<svg stroke=currentColor style=z-index:0;overflow:visible;position:absolute><g style=outline:0><path fill=none style></path><path stroke-width=20 stroke=transparent fill=none>"),tn=b('<div class=connection-toolbar style="position:absolute;left:calc(var(--mid-x) + var(--left, 0px));top:calc(var(--mid-y) + var(--top, -2em));transform:translate(-50%, -50%)">'),nn=b('<span class=connection-label contenteditable=true style="position:absolute;z-index:1000;transform:translate(-50%, -50%)">');const on=(e,t,n,r)=>[(()=>{var o=en(),i=o.firstChild,s=i.firstChild,l=s.nextSibling;o.$$dblclick=()=>t.setLabel("Test"),D(i,"pointerdown",t.onpointerdown);var a=e.connectionRef;return typeof a=="function"?G(a,i):e.connectionRef=i,C(c=>{var d=`connection-svg ${n.connection.class??""}`,u=n.connection.id,h=`connection ${n.connection.class??""}`,f=!!e.selected(),g={...n.connection.style},v=e.path(),w=e.path();return d!==c.e&&E(o,"class",c.e=d),u!==c.t&&E(i,"data-id",c.t=u),h!==c.a&&E(i,"class",c.a=h),f!==c.o&&i.classList.toggle("selected",c.o=f),c.i=$e(i,g,c.i),v!==c.n&&E(s,"d",c.n=v),w!==c.s&&E(l,"d",c.s=w),c},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0}),o})(),y(R,{get when(){return se(()=>!!n.Toolbar)()&&e.selected()},get children(){var o=tn(),i=e.toolbarRef;return typeof i=="function"?G(i,o):e.toolbarRef=o,$(o,y(De,{get component(){return n.Toolbar},get kit(){return n.kit},get connection(){return n.connection}})),C(s=>{var l=e.mid().x+"px",a=e.mid().y+"px";return l!==s.e&&z(o,"--mid-x",s.e=l),a!==s.t&&z(o,"--mid-y",s.t=a),s},{e:void 0,t:void 0}),o}}),y(R,{get when(){return n.connection.label!==void 0},get children(){var o=nn();return o.$$keydown=i=>{i.key==="Enter"&&i.currentTarget.blur()},o.addEventListener("blur",i=>{const s=i.currentTarget.innerText.trim().length===0?void 0:i.currentTarget.innerText;t.setLabel(s)}),$(o,()=>n.connection.label),C(i=>{var s=e.mid().x+"px",l=e.mid().y+"px";return s!==i.e&&z(o,"left",i.e=s),l!==i.t&&z(o,"top",i.t=l),i},{e:void 0,t:void 0}),o}})];H(["dblclick","keydown"]);const rn=e=>({getNodeRect:n=>e.kit.nodes.find(r=>r.id===n)}),sn=B({create:e=>{const t=rn(e),n=Jt(e,t),r=Qt(n,e);return{helper:t,state:n,logic:r,view:(o,i,s,l)=>on(o,i,s)}}}),xe=["left","right","top","bottom"],ln=(e,t)=>{const n=e.kit.activeConnectionDestination(),r=e.kit.activeConnection.from.side;return{path:x(()=>ct({start:n,startPos:r,end:e.kit.activeConnectionDestination(),endPos:e.kit.activeConnection.to?.side??xe[xe.indexOf(r)^1]??"top"}))}},cn=(e,t,n)=>{const r=o=>{const{x:i,y:s,zoom:l}=t.kit.viewport(),a=t.kit.container?.getBoundingClientRect();a&&t.kit.setActiveConnectionDestination({x:(o.clientX-a.left-i)/l,y:(o.clientY-a.top-s)/l})};return de(()=>{window.addEventListener("pointermove",r)}),Z(()=>{window.removeEventListener("pointermove",r)}),{}};var an=b('<svg stroke=currentColor style=z-index:0;overflow:visible;position:absolute><g tabindex=0 class="connection connection-preview"><path fill=none style="stroke-width:var(--connection-width, 2)">');const dn=(e,t,n,r)=>(()=>{var o=an(),i=o.firstChild,s=i.firstChild;return C(()=>E(s,"d",e.path())),o})(),un=e=>({}),fn=B({create:e=>{const t=un(),n=ln(e),r=cn(n,e);return{helper:t,state:n,logic:r,view:(o,i,s,l)=>dn(o)}}}),hn=(e,t)=>{const n=x(()=>e.node.data?.component);let r;const o=x(()=>!!e.node.data?.component&&e.node.data.component in e.components),i=x(()=>"node-toolbar"in e.components),s=x(()=>e.kit.selection.getNodes().includes(e.node.id));return{type:n,nodeDiv:r,hasComponent:o,Toolbar:i,selected:s}},gn=(e,t,n)=>{const r=new AbortController,o=c=>{const d=t.kit.selection;c?d.addItem(t.node.id,"node"):d.removeItem(t.node.id,"node")},i=Te({onStart:c=>({x:t.node.x,y:t.node.y,clientX:c.clientX,clientY:c.clientY,zoom:t.kit.viewport().zoom,gridSize:t.kit.configs.gridSize}),onMove:(c,d)=>{const u=c.clientX,h=c.clientY,f=ke(u,d.clientX,d.zoom,d.gridSize),g=ke(h,d.clientY,d.zoom,d.gridSize),v=d.x+f,w=d.y+g;t.kit.setNodes(m=>m.id===t.node.id,{x:v,y:w})},onEnd:(c,d)=>{(d.x!==t.node.x||d.y!==t.node.y)&&t.kit.updateNodes()},preventDefault:!0}),s=c=>{o(!0),!(c.button===2||t.kit.configs.disableNodeDrag||t.kit.focus())&&i.onPointerDown(c)};ae(gt(e.selected,()=>{e.nodeDiv&&(e.selected()?(e.nodeDiv.focus(),window.addEventListener("pointerdown",l,{signal:r.signal}),window.addEventListener("keydown",a,{signal:r.signal})):e.nodeDiv.classList.contains("selected")&&e.nodeDiv.blur())},{defer:!0}));const l=c=>{const d=c.target;e.nodeDiv&&!e.nodeDiv.contains(d)&&!c.ctrlKey&&(o(!1),window.removeEventListener("pointerdown",l),window.removeEventListener("keydown",a))},a=c=>{c.key==="Escape"&&(o(!1),window.removeEventListener("keydown",a))};return Z(()=>{r.abort()}),{onPointerDown:s}},vn=(e,t)=>({size:x(()=>{if(e?.kit.configs.disableEdgeDrag)return{};const r="calc(var(--node-border-width, 2px) + 10px)";return t?.isCorner?{width:r,height:r,"--cursor":t?.cursor}:{width:t?.single.axis==="y"?"100%":r,height:t?.single.axis==="y"?r:"100%","--cursor":t?.cursor}})}),wn=(e,t,n)=>{const r=(f,g,v)=>Math.max(g,Math.min(f,v)),o=f=>{const{minNodeWidth:g=1,maxNodeWidth:v=1e4}=t.kit.configs;return r(f,g,v)},i=f=>{const{minNodeHeight:g=1,maxNodeHeight:v=1e4}=t.kit.configs;return r(f,g,v)},s=(()=>{switch(t.side){case"top":case"bottom":case"left":case"right":return{[t.side]:"var(--off-v)"};case"tl":return{top:"var(--off-v)",left:"var(--off-v)"};case"tr":return{top:"var(--off-v)",right:"var(--off-v)"};case"bl":return{bottom:"var(--off-v)",left:"var(--off-v)"};case"br":return{bottom:"var(--off-v)",right:"var(--off-v)"}}})(),l=t.side==="tl"?[{axis:"x",sign:-1},{axis:"y",sign:-1}]:t.side==="tr"?[{axis:"x",sign:1},{axis:"y",sign:-1}]:t.side==="bl"?[{axis:"x",sign:-1},{axis:"y",sign:1}]:t.side==="br"?[{axis:"x",sign:1},{axis:"y",sign:1}]:[],a=n?.isCorner?l:[n?.single],c=Te({onStart:f=>({width:t.node.width,height:t.node.height,x:t.node.x,y:t.node.y,clientX:f.clientX,clientY:f.clientY,vp:t.kit.viewport(),gridSize:t.kit.configs.gridSize}),onMove:(f,g)=>{let{width:v,height:w,x:m,y:k,vp:p,gridSize:S}=g;for(const P of a){const N=p.zoom,ne=(P?.axis==="x"?ke(f.clientX,g.clientX,N,S):ke(f.clientY,g.clientY,N,S))*(P?.sign??1);if(P?.axis==="x"){let oe=v+ne;const K=o(oe),Ce=K-v;v=K,(t.side==="left"||t.side==="tl"||t.side==="bl")&&(m-=Ce)}else{let oe=w+ne;const K=i(oe),Ce=K-w;w=K,(t.side==="top"||t.side==="tl"||t.side==="tr")&&(k-=Ce)}}t.kit.setNodes(P=>P.id===t.node.id,{width:v,height:w,x:m,y:k})},onEnd:(f,g)=>{["width","height","x","y"].some(v=>g[v]!==t.node[v])&&t.kit.updateNodes()},stopPropagation:!0,preventDefault:!0,disableSelection:!0});return{onPointerLeave:()=>{const f=t.kit.activeConnection;f.from&&(t.kit.activeConnection={...f,to:{id:void 0,side:f.to?.side}})},onPointerDown:f=>{t.kit.configs.disableEdgeDrag||c.onPointerDown(f)},onPointerEnter:()=>{const{from:f}=t.kit.activeConnection;!f||n?.isCorner||(t.kit.activeConnection={from:f,to:{side:t.side,id:t.node.id}})},positionStyle:s}},mn=(e,t)=>({anchorRef:void 0}),yn=(e,t,n)=>{let r=!1;const o=c=>{if(!t?.kit.activeConnection.from)return;const d=be(c.clientX,c.clientY,t?.kit.viewport(),t?.kit.container?.getBoundingClientRect());d&&t?.kit.setActiveConnectionDestination(d)},i=()=>{if(!r){a();return}const c=t?.kit;if(c&&c.activeConnection.from){let d=c.activeConnection.to;if(!d?.id&&!c.configs.disableAnchorConnectionCreation){const u=c.activeConnectionDestination(),h=t?.kit.configs.gridSize;if(u){const f=_e(u.x-75,h),g=_e(u.y,h),v=Math.round(150/h),w=Math.round(60/h),m=c.randomId("node"),k={x:f,y:g,width:v*c.configs.gridSize,height:w*c.configs.gridSize,data:{label:"Node",component:"default"},...c.configs.defaultNode,id:m};c.setNodes(W([...c.nodes,k])),c.updateNodes(!0);const p=c.activeConnection.from.side,S=xe[xe.indexOf(p)^1];d={id:m,side:d?.side??S}}}if(d?.id&&c.activeConnection.from.id!==d.id){const u={id:c.randomId("connection"),from:c.activeConnection.from,to:d};c.setConnections(W([...c.connections,u])),c.updateConnections()}}a()},s=()=>{if(!e.anchorRef)return;const{x:c,y:d,width:u,height:h}=e.anchorRef.getBoundingClientRect();st(),t&&(t.kit.activeConnection={from:{side:t?.side,id:t?.id}});const f=be(c+u/2,d+h/2,t?.kit.viewport(),t?.kit.container?.getBoundingClientRect());f&&t?.kit.setActiveConnectionDestination(f)},l=c=>{c.stopPropagation(),c.preventDefault(),c.clientX,c.clientY,r=!0,s(),window.addEventListener("pointermove",o),window.addEventListener("pointerup",i,{once:!0}),window.addEventListener("pointercancel",i,{once:!0})},a=()=>{lt(),t&&(t.kit.setActiveConnectionDestination(null),t.kit.activeConnection={}),window.removeEventListener("pointermove",o),window.removeEventListener("pointerup",i),window.removeEventListener("pointercancel",i)};return{onPointerDown:l}};var bn=b("<div class=node-anchor>");const kn=(e,t,n,r)=>(()=>{var o=bn();D(o,"pointerdown",t.onPointerDown);var i=e.anchorRef;return typeof i=="function"?G(i,o):e.anchorRef=o,o})(),xn=e=>({}),pn=B({create:e=>{const t=xn(),n=mn(),r=yn(n,e);return{helper:t,state:n,logic:r,view:(o,i,s,l)=>kn(o,i)}}});var $n=b("<div class=node-edge>");const Cn=(e,t,n,r)=>(()=>{var o=$n();return D(o,"pointerdown",t.onPointerDown),D(o,"pointerleave",t.onPointerLeave),D(o,"pointerenter",t.onPointerEnter),$(o,y(R,{get when(){return se(()=>!r?.isCorner)()&&!n?.kit.configs.disableNodeAnchors},get children(){return y(pn,{get side(){return n?.side},get kit(){return n?.kit},get id(){return n?.node.id}})}})),C(i=>$e(o,{...e.size(),...t.positionStyle},i)),o})(),Sn=e=>{const t=["tl","tr","bl","br"].includes(e?.side),n={top:{axis:"y",sign:-1,cursor:"ns-resize"},bottom:{axis:"y",sign:1,cursor:"ns-resize"},left:{axis:"x",sign:-1,cursor:"ew-resize"},right:{axis:"x",sign:1,cursor:"ew-resize"}}[e?.side],r=t?e?.side==="tl"||e?.side==="br"?"nwse-resize":"nesw-resize":n?.cursor??"default";return{isCorner:t,cursor:r,single:n}},En=B({create:e=>{const t=Sn(e),n=vn(e,t),r=wn(n,e,t);return{helper:t,state:n,logic:r,view:(o,i,s,l)=>Cn(o,i,s,l)}}});var Pn=b('<div class=node-toolbar style="position:absolute;top:var(--top, 0);left:var(--left, calc(100% + 1em))">'),An=b("<span class=node-label contenteditable=true style=top:-2em;left:0;width:var(--size);height:var(--size);display:flex;align-items:center;justify-content:center;outline:none>"),Mn=b("<div class=node-component style=width:100%;height:100%>"),Nn=b("<div>");const Ln=(e,t,n,r)=>(()=>{var o=Nn();D(o,"pointerdown",t.onPointerDown);var i=e.nodeDiv;return typeof i=="function"?G(i,o):e.nodeDiv=o,$(o,y(R,{get when(){return se(()=>!!e.Toolbar())()&&e.selected()},get children(){var s=Pn();return s.$$pointerdown=l=>{console.log("p-down"),l.stopPropagation()},$(s,y(De,{get component(){return n.components?.["node-toolbar"]},get kit(){return n.kit},get node(){return n.node}})),s}}),null),$(o,y(R,{get when(){return n.node.data?.label},get children(){var s=An();return s.$$keydown=l=>{l.key==="Escape"&&l.currentTarget.blur()},s.addEventListener("blur",l=>{const a=l.currentTarget.innerText.trim().length===0?void 0:l.currentTarget.innerText;n.kit.setNodes(c=>c.id===n.node.id,"data","label",a),n.kit.updateNodes()}),$(s,()=>n.node.data?.label),C(l=>{var a=e.type()&&e.hasComponent()?"fit-content":"100%",c=e.type()&&e.hasComponent()?"absolute":"static";return a!==l.e&&z(s,"--size",l.e=a),c!==l.t&&z(s,"position",l.t=c),l},{e:void 0,t:void 0}),s}}),null),$(o,y(R,{get when(){return se(()=>!!(e.type()&&n.components))()&&e.hasComponent()},get children(){var s=Mn();return $(s,y(De,{get component(){return n.components[e.type()]},get node(){return n.node},get kit(){return n.kit}})),s}}),null),$(o,y(U,{each:["left","top","right","bottom","tl","tr","br","bl"],children:s=>y(En,{side:s,get node(){return n.node},get kit(){return n.kit}})}),null),C(s=>{var l=`node ${n.node.class??""} `,a=!!e.selected(),c=n.node.id,d={transform:`translate(${n.node.x}px, ${n.node.y}px)`,width:`${n.node.width}px`,height:`${n.node.height}px`,"--node-cursor":n.kit.focus()?"auto":"grab",...n.node.style};return l!==s.e&&tt(o,s.e=l),a!==s.t&&o.classList.toggle("selected",s.t=a),c!==s.a&&E(o,"data-id",s.a=c),s.o=$e(o,d,s.o),s},{e:void 0,t:void 0,a:void 0,o:void 0}),o})();H(["pointerdown","keydown"]);const Dn=e=>({}),zn=B({create:e=>{const t=Dn(),n=hn(e),r=gn(n,e);return{helper:t,state:n,logic:r,view:(o,i,s,l)=>Ln(o,i,s)}}});var On=b('<div class=solid-kitx tabindex=0 autofocus style=outline:none><div class=container style="transform-origin:0 0">');const _n=(e,t,n,r)=>{const o=e.Children;return(()=>{var i=On(),s=i.firstChild;D(i,"pointerdown",t.onPointerDown,!0);var l=e.containerRef;return typeof l=="function"?G(l,i):e.containerRef=i,$(i,y(o,{}),s),$(s,y(U,{get each(){return e.kit.connections},children:a=>y(sn,{connection:a,get Toolbar(){return n.components?.["connection-toolbar"]},get kit(){return e.kit}})}),null),$(s,y(R,{get when(){return e.kit.activeConnectionDestination()},get children(){return y(fn,{get kit(){return e.kit}})}}),null),$(s,y(U,{get each(){return e.kit.nodes},children:a=>y(zn,{node:a,get components(){return n.components},get kit(){return e.kit}})}),null),C(a=>z(s,"transform",`translate(${e.vp().x}px, ${e.vp().y}px) scale(${e.vp().zoom})`)),i})()};H(["pointerdown"]);const In=e=>({}),Tn=B({create:e=>{const t=In(),n=Zt(e),r=qt(n,e);return{helper:t,state:n,logic:r,view:(o,i,s,l)=>_n(o,i,s)}}}),Rn=(e,t)=>{const n=x(()=>e.absoluteGrid??e.kit.configs.gridSize??100),r=x(()=>e.kit.viewport()),o=x(()=>n()*r().zoom),i=x(()=>e.type==="dash"&&n()/(e.dashWidth??8)*r().zoom);return{grid:n,vp:r,dif:o,dashWidth:i}},Hn=(e,t,n)=>({});var jn=b("<svg><line stroke=currentColor y1=0 y2=0></svg>",!1,!0,!1),Bn=b("<svg><line stroke=currentColor x1=0 x2=0></svg>",!1,!0,!1),Vn=b("<svg><circle fill=currentColor></svg>",!1,!0,!1),Fn=b("<svg class=background-grid style=position:absolute;width:100%;height:100%><pattern id=grid-pattern patternUnits=userSpaceOnUse></pattern><rect x=0 y=0 width=100% height=100% fill=url(#grid-pattern)>");const Un=(e,t,n,r)=>(()=>{var o=Fn(),i=o.firstChild;return $(i,y(et,{get children(){return[y(Ne,{get when(){return n.type==="dash"},get children(){return[(()=>{var s=jn();return C(l=>{var a=`${e.dashWidth()}`,c=-e.dashWidth()/2,d=e.grid()*e.vp().zoom;return a!==l.e&&E(s,"stroke-dasharray",l.e=a),c!==l.t&&E(s,"x1",l.t=c),d!==l.a&&E(s,"x2",l.a=d),l},{e:void 0,t:void 0,a:void 0}),s})(),(()=>{var s=Bn();return C(l=>{var a=`${e.dashWidth()}`,c=-e.dashWidth()/2,d=e.grid()*e.vp().zoom;return a!==l.e&&E(s,"stroke-dasharray",l.e=a),c!==l.t&&E(s,"y1",l.t=c),d!==l.a&&E(s,"y2",l.a=d),l},{e:void 0,t:void 0,a:void 0}),s})()]}}),y(Ne,{get when(){return!n.type||n.type==="dot"},get children(){var s=Vn();return C(l=>{var a=e.vp().zoom,c=e.vp().zoom,d=e.vp().zoom;return a!==l.e&&E(s,"cx",l.e=a),c!==l.t&&E(s,"cy",l.t=c),d!==l.a&&E(s,"r",l.a=d),l},{e:void 0,t:void 0,a:void 0}),s}})]}})),C(s=>{var l=e.vp().x+e.dif()/2,a=e.vp().y+e.dif()/2,c=e.dif(),d=e.dif();return l!==s.e&&E(i,"x",s.e=l),a!==s.t&&E(i,"y",s.t=a),c!==s.a&&E(i,"width",s.a=c),d!==s.o&&E(i,"height",s.o=d),s},{e:void 0,t:void 0,a:void 0,o:void 0}),o})(),Xn=e=>({}),Wn=B({create:e=>{const t=Xn(),n=Rn(e),r=Hn();return{helper:t,state:n,logic:r,view:(o,i,s,l)=>Un(o,i,s)}}}),Yn=(e,t)=>({}),Kn=(e,t,n)=>({zoomIn:()=>{const s=t.kit.viewport(),l=Math.min(5,s.zoom+.1);t.kit.setViewport({...s,zoom:l}),t.kit.updateViewport()},zoomOut:()=>{const s=t.kit.viewport();t.kit.setViewport({...s,zoom:Math.max(.1,s.zoom-.1)}),t.kit.updateViewport()},fitView:()=>{if(!t.kit.container||t.kit.nodes.length===0)return;const s=t.kit.nodes;let l=1/0,a=1/0,c=-1/0,d=-1/0;s.forEach(N=>{l=Math.min(l,N.x),a=Math.min(a,N.y),c=Math.max(c,N.x+N.width),d=Math.max(d,N.y+N.height)});const{width:u,height:h}=t.kit.container.getBoundingClientRect(),f=40,g=c-l,v=d-a;if(g<=0||v<=0)return;const w=Math.min((u-f*2)/g,(h-f*2)/v),m=Math.min(w,1),k=l+g/2,p=a+v/2,S=u/2-k*m,P=h/2-p*m;t.kit.setViewport({x:S,y:P,zoom:m}),t.kit.updateViewport()}});var Gn=b(`<div class=kit-controls><button><svg xmlns=http://www.w3.org/2000/svg viewBox="0 0 297 297"fill=currentColor><g><path d="M294.077,251.199l-59.105-59.107l42.167-24.356c3.295-1.903,5.212-5.52,4.938-9.315c-0.274-3.796-2.692-7.101-6.226-8.51
		L87.82,74.905c-3.686-1.472-7.895-0.605-10.702,2.201c-2.807,2.808-3.674,7.016-2.203,10.702l74.994,188.053
		c1.41,3.534,4.715,5.953,8.511,6.227c3.796,0.276,7.414-1.642,9.316-4.938l24.354-42.167l59.101,59.107
		c1.862,1.863,4.39,2.91,7.023,2.91c2.635,0,5.161-1.047,7.023-2.91l28.841-28.845C297.956,261.366,297.956,255.078,294.077,251.199
		z"></path><path d="M43.61,29.552c-3.879-3.876-10.166-3.877-14.047,0c-3.878,3.879-3.878,10.168,0,14.047l22.069,22.069
		c1.939,1.939,4.48,2.909,7.023,2.909c2.541,0,5.083-0.97,7.022-2.909c3.879-3.879,3.879-10.167,0-14.046L43.61,29.552z"></path><path d="M51.089,98.215c0-5.484-4.447-9.932-9.933-9.932H9.946c-5.485,0-9.933,4.447-9.933,9.932c0,5.485,4.447,9.933,9.933,9.933
		h31.21C46.642,108.147,51.089,103.7,51.089,98.215z"></path><path d="M47.063,128.869l-22.072,22.071c-3.878,3.879-3.878,10.168,0,14.046c1.94,1.939,4.482,2.909,7.023,2.909
		c2.541,0,5.084-0.97,7.023-2.909l22.071-22.07c3.879-3.879,3.879-10.168,0-14.047C57.23,124.993,50.944,124.992,47.063,128.869z"></path><path d="M98.222,51.078c5.485,0,9.933-4.447,9.933-9.933V9.932c0-5.485-4.447-9.932-9.933-9.932c-5.484,0-9.932,4.446-9.932,9.932
		v31.214C88.29,46.631,92.737,51.078,98.222,51.078z"></path><path d="M135.894,64.006c2.543,0,5.084-0.97,7.023-2.909l22.068-22.069c3.879-3.879,3.879-10.168,0-14.047
		c-3.879-3.877-10.168-3.877-14.046,0l-22.068,22.07c-3.879,3.879-3.879,10.168,0,14.046
		C130.811,63.036,133.352,64.006,135.894,64.006z"></path></g></svg></button><button class=control-button><svg viewBox="0 0 24 24"id=plus data-name="Flat Line"xmlns=http://www.w3.org/2000/svg stroke=currentColor><path d=M5,12H19M12,5V19 fill=none stroke-linecap=round stroke-linejoin=round stroke-width=2></path></svg></button><button class=control-button><svg viewBox="0 0 24 24"id=minus data-name="Flat Line"xmlns=http://www.w3.org/2000/svg stroke=currentColor><line fill=none stroke-linecap=round stroke-linejoin=round stroke-width=2 x1=19 y1=12 x2=5 y2=12></line></svg></button><button class=control-button><svg viewBox="0 0 24 24"id=maximize-size data-name="Flat Line"xmlns=http://www.w3.org/2000/svg fill=none stroke-linecap=round stroke-linejoin=round stroke-width=2 stroke=currentColor><path d=M9,9,3.29,3.29M15,9l5.71-5.71M9,15,3.29,20.71m17.42,0L15,15></path><path data-name=primary d=M3,8V4A1,1,0,0,1,4,3H8></path><path data-name=primary d=M16,3h4a1,1,0,0,1,1,1V8></path><path data-name=primary d=M8,21H4a1,1,0,0,1-1-1V16></path><path data-name=primary d=M21,16v4a1,1,0,0,1-1,1H16>`);const Zn=(e,t,n,r)=>(()=>{var o=Gn(),i=o.firstChild,s=i.nextSibling,l=s.nextSibling,a=l.nextSibling;return i.$$pointerdown=()=>n.kit.setFocus(c=>!c),D(s,"pointerdown",t.zoomIn,!0),D(l,"pointerdown",t.zoomOut,!0),D(a,"pointerdown",t.fitView,!0),C(()=>i.classList.toggle("on",!!n.kit.focus())),o})();H(["pointerdown"]);const qn=e=>({}),Jn=B({create:e=>{const t=qn(),n=Yn(),r=Kn(n,e);return{helper:t,state:n,logic:r,view:(o,i,s,l)=>Zn(o,i,s)}}}),Qn=(e,t)=>{const[n,r]=I(!1),[o,i]=I({x:0,y:0}),s=x(()=>{const a=t?.startPos,c=o();return{left:Math.min(a.x,c.x),top:Math.min(a.y,c.y),right:Math.max(a.x,c.x),bottom:Math.max(a.y,c.y),width:Math.abs(a.x-c.x),height:Math.abs(a.y-c.y)}}),l=x(()=>{const a=s(),c=e.kit.viewport();return{left:a.left*c.zoom,top:a.top*c.zoom,width:a.width*c.zoom,height:a.height*c.zoom}});return{isDragging:n,currentPos:o,setCurrentPos:i,setIsDragging:r,rectOnScreen:l,rect:s}},eo=(e,t,n)=>{function r(){const s=e.rect();if(s.width<5||s.height<5)return;const l=t.kit.container.getBoundingClientRect(),a={nodes:[],connections:[]};t.kit.container.querySelectorAll(".node, .connection").forEach(d=>{const u=d.getBoundingClientRect(),h=t.kit.viewport(),f={left:(u.left-l.left)/h.zoom,top:(u.top-l.top)/h.zoom,right:(u.right-l.left)/h.zoom,bottom:(u.bottom-l.top)/h.zoom};if(!(f.left>s.right||f.right<s.left||f.top>s.bottom||f.bottom<s.top)){const v=d.getAttribute("data-id"),w=d.classList.contains("node");v&&(w?a.nodes.push(v):a.connections.push(v))}}),t.kit.selection.set(a)}const o=Te({onStart:s=>{if(s.button!==0)return;const l=be(s.clientX,s.clientY,{...t.kit.viewport(),x:0,y:0},t.kit.container.getBoundingClientRect());if(l)return n&&(n.startPos=l),e.setCurrentPos(l),e.setIsDragging(!0),l},onMove:(s,l)=>{const a=be(s.clientX,s.clientY,{...t.kit.viewport(),x:0,y:0},t.kit.container.getBoundingClientRect());a&&e.setCurrentPos(a)},onEnd:(s,l)=>{e.setIsDragging(!1),r()},disableSelection:!0}),i=s=>{t.kit.focus()&&o.onPointerDown(s)};return de(()=>{t.kit.container?.addEventListener("pointerdown",i)}),Z(()=>{t.kit.container?.removeEventListener("pointerdown",i)}),{}};var to=b('<div class=kit-selection-rect style="position:absolute;border:1px solid rgb(var(--selection-rgb, 0,120,215));background-color:rgba(var(--selection-rgb, 0,120,215), 0.3)">');const no=(e,t,n,r)=>y(R,{get when(){return se(()=>!!e.isDragging())()&&n.kit.focus()},get children(){var o=to();return C(i=>{var s=`${e.rectOnScreen().left}px`,l=`${e.rectOnScreen().top}px`,a=`${e.rectOnScreen().width}px`,c=`${e.rectOnScreen().height}px`;return s!==i.e&&z(o,"left",i.e=s),l!==i.t&&z(o,"top",i.t=l),a!==i.a&&z(o,"width",i.a=a),c!==i.o&&z(o,"height",i.o=c),i},{e:void 0,t:void 0,a:void 0,o:void 0}),o}}),oo=e=>({startPos:{x:0,y:0}}),io=B({create:e=>{const t=oo(),n=Qn(e,t),r=eo(n,e,t);return{helper:t,state:n,logic:r,view:(o,i,s,l)=>no(o,i,s)}}});var ro=b('<button><svg xmlns=http://www.w3.org/2000/svg viewBox="0 0 24 24"stroke=currentColor stroke-width=2 stroke-linecap=round stroke-linejoin=round><path stroke=none d="M0 0h24v24H0z"fill=none></path><path d="M12 5l0 14"></path><path d="M5 12l14 0">'),so=b('<div class=kit-controls style=--flex-direction:row><button title="Remove Node"><svg xmlns=http://www.w3.org/2000/svg viewBox="0 0 24 24"fill=none stroke=currentColor stroke-width=2 stroke-linecap=round stroke-linejoin=round class="icon icon-tabler icons-tabler-outline icon-tabler-trash"><path stroke=none d="M0 0h24v24H0z"fill=none></path><path d="M4 7l16 0"></path><path d="M10 11l0 6"></path><path d="M14 11l0 6"></path><path d="M5 7l1 12a2 2 0 0 0 2 2h8a2 2 0 0 0 2 -2l1 -12"></path><path d="M9 7v-3a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v3">');const lo=e=>{const t=x(()=>e.node.data?.component==="task-node"),n=()=>{const i=e.node.id;e.kit.setConnections(W(e.kit.connections.filter(s=>s.from.id!==i&&s.to.id!==i))),e.kit.setNodes(W(e.kit.nodes.filter(s=>s.id!==i))),e.kit.updateNodes()},r=()=>{e.kit.setNodes(i=>i.id===e.node.id,"data","extra","fields",["new field",...e.node.data?.extra?.fields??[]])},o=()=>{e.kit.setNodes(i=>i.id===e.node.id,"data","extra","tasks",[{description:"new task",done:!1},...e.node.data?.extra.tasks])};return(()=>{var i=so(),s=i.firstChild;return s.$$pointerdown=n,$(i,y(et,{get children(){return y(Ne,{get when(){return["fields-node","task-node"].includes(e.node.data?.component)},get children(){var l=ro();return D(l,"pointerdown",t()?o:r,!0),C(()=>E(l,"title",t()?"Add Task":"Add field")),l}})}}),null),i})()};H(["pointerdown"]);var co=b('<div class=kit-controls style=--flex-direction:row><button><svg xmlns=http://www.w3.org/2000/svg viewBox="0 0 24 24"fill=none stroke=currentColor stroke-width=2 stroke-linecap=round stroke-linejoin=round class="icon icon-tabler icons-tabler-outline icon-tabler-trash"><path stroke=none d="M0 0h24v24H0z"fill=none></path><path d="M4 7l16 0"></path><path d="M10 11l0 6"></path><path d="M14 11l0 6"></path><path d="M5 7l1 12a2 2 0 0 0 2 2h8a2 2 0 0 0 2 -2l1 -12"></path><path d="M9 7v-3a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v3"></path></svg></button><button><svg xmlns=http://www.w3.org/2000/svg viewBox="0 0 24 24"fill=none stroke=currentColor stroke-width=2 stroke-linecap=round stroke-linejoin=round class="icon icon-tabler icons-tabler-outline icon-tabler-palette"><path stroke=none d="M0 0h24v24H0z"fill=none></path><path d="M12 21a9 9 0 0 1 0 -18c4.97 0 9 3.582 9 8c0 1.06 -.474 2.078 -1.318 2.828c-.844 .75 -1.989 1.172 -3.182 1.172h-2.5a2 2 0 0 0 -1 3.75a1.3 1.3 0 0 1 -1 2.25"></path><path d="M8.5 10.5m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0"></path><path d="M12.5 7.5m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0"></path><path d="M16.5 10.5m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0">');const ao=e=>{const t=()=>{const r=document.createElement("input");r.type="color",r.click(),r.addEventListener("input",()=>{e.kit.setConnections(W(e.kit.connections.map(o=>o.id===e.connection.id?{...o,style:{...o.style,stroke:r.value}}:o))),e.kit.updateConnections()})},n=()=>{e.kit.setConnections(W(e.kit.connections.filter(r=>r.id!==e.connection.id))),e.kit.updateConnections()};return(()=>{var r=co(),o=r.firstChild,i=o.nextSibling;return o.$$pointerdown=n,i.$$pointerdown=t,r})()};H(["pointerdown"]);const uo=(e,t)=>{const[n,r]=I("");return{selected:n,setSelected:r}},fo=(e,t,n)=>{const r=t.kit,o=a=>{a.shiftKey&&a.key===" "&&t.kit.setFocus(c=>!c)},i=()=>{confirm("Are you sure you want to remove everything?")&&(localStorage.removeItem("nodes"),localStorage.removeItem("connections"),localStorage.removeItem("vp"),window.location.reload())},s=()=>{const a={nodes:T(r.nodes),connections:T(r.connections),viewport:r.viewport()},c=JSON.stringify(a,null,2),d=new Blob([c],{type:"application/json"}),u=URL.createObjectURL(d),h=document.createElement("a");h.href=u,h.download="solid-kitx-export.json",h.click(),URL.revokeObjectURL(u)},l=()=>{const a=document.createElement("input");a.type="file",a.accept="application/json",a.onchange=async c=>{const d=c.target.files?.[0];if(d)try{const u=await d.text(),h=JSON.parse(u);if(!h.nodes||!h.connections||!h.viewport){alert("Invalid file format. Missing required fields.");return}r.setNodes(h.nodes),r.setConnections(h.connections),r.setViewport(h.viewport),r.updateNodes(),r.updateConnections(),r.updateViewport(),console.log("Import successful:",h)}catch(u){console.error(u),alert("Failed to read file.")}},a.click()};return de(()=>{window.addEventListener("keydown",o)}),Z(()=>{window.removeEventListener("keydown",o)}),{clearAll:i,exportAll:s,importAll:l}},ho=`<svg xmlns="http://www.w3.org/2000/svg" class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" ><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M15 12h.01" /><path d="M12 12h.01" /><path d="M9 12h.01" /><path d="M6 19a2 2 0 0 1 -2 -2v-4l-1 -1l1 -1v-4a2 2 0 0 1 2 -2" /><path d="M18 19a2 2 0 0 0 2 -2v-4l1 -1l-1 -1v-4a2 2 0 0 0 -2 -2" /></svg>
`;var go=b('<div class="sidebar kit-controls"><button title=Github></button><div style=height:20px></div><button><svg xmlns=http://www.w3.org/2000/svg viewBox="0 0 24 24"fill=none stroke=currentColor stroke-width=2 stroke-linecap=round stroke-linejoin=round><path stroke=none d="M0 0h24v24H0z"fill=none></path><path d="M12 9a3 3 0 0 0 0 6v-6z"></path><path d="M6 6h3.5l2.5 -2.5l2.5 2.5h3.5v3.5l2.5 2.5l-2.5 2.5v3.5h-3.5l-2.5 2.5l-2.5 -2.5h-3.5v-3.5l-2.5 -2.5l2.5 -2.5z"></path></svg></button><button title="Export Backup"><svg xmlns=http://www.w3.org/2000/svg viewBox="0 0 24 24"fill=none stroke=currentColor stroke-width=2 stroke-linecap=round stroke-linejoin=round><path stroke=none d="M0 0h24v24H0z"fill=none></path><path d="M14 8v-2a2 2 0 0 0 -2 -2h-7a2 2 0 0 0 -2 2v12a2 2 0 0 0 2 2h7a2 2 0 0 0 2 -2v-2"></path><path d="M9 12h12l-3 -3"></path><path d="M18 15l3 -3"></path></svg></button><button title="Import Backup"><svg xmlns=http://www.w3.org/2000/svg viewBox="0 0 24 24"fill=none stroke=currentColor stroke-width=2 stroke-linecap=round stroke-linejoin=round><path stroke=none d="M0 0h24v24H0z"fill=none></path><path d="M15 8v-2a2 2 0 0 0 -2 -2h-7a2 2 0 0 0 -2 2v12a2 2 0 0 0 2 2h7a2 2 0 0 0 2 -2v-2"></path><path d="M21 12h-13l3 -3"></path><path d="M11 15l-3 -3"></path></svg></button><button title="Clear All"><svg xmlns=http://www.w3.org/2000/svg viewBox="0 0 24 24"stroke=currentColor stroke-width=2 stroke-linecap=round stroke-linejoin=round class="icon icon-tabler icons-tabler-outline icon-tabler-x"><path stroke=none d="M0 0h24v24H0z"fill=none></path><path d="M18 6l-12 12"></path><path d="M6 6l12 12"></path></svg></button><div style=height:50px>'),vo=b("<button>"),wo=b("<div class=node-preview>");const mo=(e,t,n,r)=>(()=>{var o=go(),i=o.firstChild,s=i.nextSibling,l=s.nextSibling,a=l.nextSibling,c=a.nextSibling,d=c.nextSibling;return d.nextSibling,o.$$pointerdown=u=>u.stopPropagation(),i.$$pointerdown=()=>window.open("https://github.com/ryusufe/solid-kitx/","_blank"),i.innerHTML=ho,l.$$pointerdown=()=>{document.documentElement.classList.toggle("dark"),localStorage.theme=localStorage.theme==="dark"?"light":"dark"},D(a,"pointerdown",t.exportAll,!0),D(c,"pointerdown",t.importAll,!0),D(d,"pointerdown",t.clearAll,!0),$(o,y(U,{get each(){return r?.nodeTypes},children:u=>(()=>{var h=vo();return h.$$click=()=>e.setSelected(f=>f===u.type?"":u.type),$(h,()=>u.icon()),C(f=>{var g=u.label,v=u.type===e.selected();return g!==f.e&&E(h,"title",f.e=g),v!==f.t&&h.classList.toggle("on",f.t=v),f},{e:void 0,t:void 0}),h})()}),null),$(o,y(R,{get when(){return e.selected()},get children(){return y(yo,{get selected(){return r?.nodeTypes.find(u=>u.type===e.selected())},get setSelected(){return e.setSelected},get kit(){return n.kit}})}}),null),o})(),yo=({selected:e,setSelected:t,kit:n})=>{const[r,o]=I({x:0,y:0});let i={x:e.defaultWidth/2,y:e.defaultHeight/2};const s=c=>{o({x:c.clientX-i.x,y:c.clientY-i.y})},l=()=>{const c={id:n.randomId("node"),...r(),height:e.defaultHeight,width:e.defaultWidth,data:{label:e.label,component:e.type,extra:e.defaultData}};n.setNodes(d=>[...d,c]),t(""),n.updateNodes(),window.removeEventListener("pointermove",s),window.removeEventListener("keydown",a)},a=c=>{c.key==="Escape"&&(t(""),window.removeEventListener("keydown",a),window.removeEventListener("pointermove",s),window.removeEventListener("pointerup",l))};return de(()=>{window.addEventListener("pointerup",l,{once:!0}),window.addEventListener("pointermove",s),window.addEventListener("keydown",a),o({x:(window.innerWidth-e.defaultWidth)/2,y:(window.innerHeight-e.defaultHeight)/2})}),(()=>{var c=wo();return $(c,()=>e.label),C(d=>{var u=e.defaultWidth+"px",h=e.defaultHeight+"px",f=`translate(${r().x}px, ${r().y}px)`;return u!==d.e&&z(c,"width",d.e=u),h!==d.t&&z(c,"height",d.t=h),f!==d.a&&z(c,"transform",d.a=f),d},{e:void 0,t:void 0,a:void 0}),c})()};H(["pointerdown","click"]);var bo=b('<svg viewBox="0 0 24 24"fill=none stroke=currentColor stroke-width=2 stroke-linecap=round stroke-linejoin=round style=pointer-events:none><rect x=3 y=3 width=18 height=18 rx=2 ry=2></rect><line x1=9 y1=3 x2=9 y2=21></line><line x1=3 y1=9 x2=21 y2=9></line><line x1=3 y1=15 x2=21 y2=15>'),ko=b('<svg viewBox="0 0 24 24"fill=none stroke=currentColor stroke-width=2 stroke-linecap=round stroke-linejoin=round style=pointer-events:none><path d="M4 19.5A2.5 2.5 0 0 1 6.5 17H20"></path><path d="M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z"></path><circle cx=12 cy=12 r=2></circle><path d="M12 7v3"></path><path d="M12 14v3">'),xo=b('<svg viewBox="0 0 24 24"fill=none stroke=currentColor stroke-width=2 stroke-linecap=round stroke-linejoin=round style=pointer-events:none><path d="M9 11l3 3L22 4"></path><path d="M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11">');const po=e=>({nodeTypes:[{type:"fields-node",label:"Fields",description:"A structured set of fields for grouping data.",defaultWidth:250,defaultHeight:160,defaultData:{fields:["field1","field2"],description:"Enter description here"},icon:()=>bo()},{type:"function-node",label:"Function",description:"Executes a function with inputs and outputs.",defaultWidth:245,defaultHeight:215,defaultData:{inputs:["input1","input2"],outputs:["result"]},icon:()=>ko()},{type:"task-node",label:"Tasks",description:"Represents a step or an action in a workflow.",defaultWidth:220,defaultHeight:110,defaultData:{tasks:[{description:"New step",done:!1}]},icon:()=>xo()}]}),$o=B({create:e=>{const t=po(),n=uo(),r=fo(n,e);return{helper:t,state:n,logic:r,view:(o,i,s,l)=>mo(o,i,s,l)}}});var Co=b("<div class=fields-node><div><input type=text></div><div>"),So=b("<div class=field-item><div class=field-dot></div><input type=text>");const Eo=e=>{const[t,n]=I(null),r=s=>{e.kit.setNodes(l=>l.id===e.node.id,"data","extra","description",s)},o=(s,l)=>{l?e.kit.setNodes(a=>a.id===e.node.id,"data","extra","fields",s,l):e.kit.setNodes(a=>a.id===e.node.id,"data","extra","fields",e.node.data?.extra?.fields.filter((a,c)=>c!==s))},i=()=>{const s=e.node.data?.extra?.fields?.length??0;e.kit.setNodes(l=>l.id===e.node.id,"data","extra","fields",[...e.node.data?.extra?.fields??[],""]),n(s)};return(()=>{var s=Co(),l=s.firstChild,a=l.firstChild,c=l.nextSibling;return a.addEventListener("change",()=>e.kit.updateNodes()),a.$$input=d=>r(d.currentTarget.value),$(c,y(U,{get each(){return e.node.data?.extra?.fields||[]},children:(d,u)=>{let h;return ae(()=>{t()===u()&&(h?.focus(),h?.select(),n(null))}),(()=>{var f=So(),g=f.firstChild,v=g.nextSibling;v.addEventListener("change",m=>{o(u(),m.currentTarget.value),e.kit.updateNodes()}),v.$$keydown=m=>{m.key==="Enter"&&i()};var w=h;return typeof w=="function"?G(w,v):h=v,v.value=d,f})()}})),C(()=>a.value=e.node.data?.extra?.description??""),s})()};H(["input","keydown"]);var Po=b("<div class=function-node><div class=section><div class=section-header>Inputs<button class=btn>+</button></div></div><div class=divider></div><div class=section><div class=section-header>Outputs<button class=btn>+"),Ao=b("<div class=input-item><span class=icon></span><input type=text>"),Mo=b("<div class=output-item><span class=icon></span><input type=text>");const No=e=>{const t=(s,l)=>{l?e.kit.setNodes(a=>a.id===e.node.id,"data","extra","inputs",s,l):e.kit.setNodes(a=>a.id===e.node.id,"data","extra","inputs",e.node.data?.extra?.inputs.filter((a,c)=>c!==s)),e.kit.updateNodes()},n=(s,l)=>{l?e.kit.setNodes(a=>a.id===e.node.id,"data","extra","outputs",s,l):e.kit.setNodes(a=>a.id===e.node.id,"data","extra","outputs",e.node.data?.extra?.outputs.filter((a,c)=>c!==s)),e.kit.updateNodes()},r=()=>{console.log("hi"),i("inputs",["new input",...e.node.data?.extra?.inputs??[]])},o=()=>{i("outputs",["new output",...e.node.data?.extra?.outputs??[]])},i=(s,l)=>{e.kit.setNodes(a=>a.id===e.node.id,"data","extra",s,l),e.kit.updateNodes()};return(()=>{var s=Po(),l=s.firstChild,a=l.firstChild,c=a.firstChild,d=c.nextSibling,u=l.nextSibling,h=u.nextSibling,f=h.firstChild,g=f.firstChild,v=g.nextSibling;return d.$$pointerdown=r,$(l,y(U,{get each(){return e.node.data?.extra?.inputs||[]},children:(w,m)=>(()=>{var k=Ao(),p=k.firstChild,S=p.nextSibling;return S.addEventListener("change",P=>t(m(),P.currentTarget.value)),S.value=w,k})()}),null),v.$$pointerdown=o,$(h,y(U,{get each(){return e.node.data?.extra?.outputs||[]},children:(w,m)=>(()=>{var k=Mo(),p=k.firstChild,S=p.nextSibling;return S.addEventListener("change",P=>n(m(),P.currentTarget.value)),S.value=w,k})()}),null),s})()};H(["pointerdown"]);var Lo=b("<div class=task-node><div class=status-badge>"),Do=b('<svg width=14 height=14 viewBox="0 0 24 24"fill=none stroke=white stroke-width=3 stroke-linecap=round stroke-linejoin=round><polyline points="20 6 9 17 4 12">'),zo=b("<div class=task-item><div class=checkbox></div><div class=task-content><div><textarea>");const Oo=e=>{const t=x(()=>e.node.data?.extra?.tasks.every(o=>o.done));console.log(e.node.data?.extra?.tasks);const n=o=>{e.kit.setNodes(i=>i.id===e.node.id,"data","extra","tasks",o,"done",i=>!i),e.kit.updateNodes()},r=(o,i)=>{e.kit.setNodes(s=>s.id===e.node.id,"data","extra","tasks",o,"description",i),e.kit.updateNodes()};return(()=>{var o=Lo(),i=o.firstChild;return $(i,y(R,{get when(){return t()},fallback:" Pending",children:" Completed"})),$(o,y(U,{get each(){return e.node.data?.extra?.tasks},children:(s,l)=>(()=>{var a=zo(),c=a.firstChild,d=c.nextSibling,u=d.firstChild,h=u.firstChild;return c.$$pointerdown=()=>n(l()),$(c,y(R,{get when(){return s.done},get children(){return Do()}})),h.addEventListener("change",f=>r(l(),f.currentTarget.value)),C(()=>c.classList.toggle("checked",!!s.done)),C(()=>h.value=s.description),a})()}),null),C(s=>{var l=!!t(),a=!t();return l!==s.e&&i.classList.toggle("completed",s.e=l),a!==s.t&&i.classList.toggle("pending",s.t=a),s},{e:void 0,t:void 0}),o})()};H(["pointerdown"]);var _o=b("<div style=background:#000;width:100vw;height:100vh;display:flex;align-items:center;position:relative>");const Io=()=>{const e=Ue(JSON.parse(localStorage.nodes??"[]")),t=Ue(JSON.parse(localStorage.connections??"[]")),n=I(JSON.parse(localStorage.vp??'{ "x": 0, "y": 0, "zoom": 1 }')),r=()=>{console.log("nodes changed"),localStorage.nodes=JSON.stringify(T(e[0]))},o=()=>{console.log("connections changed"),localStorage.connections=JSON.stringify(T(t[0]))},i=()=>{console.log("viewport changed"),localStorage.vp=JSON.stringify(n[0]())};return(()=>{var s=_o();return $(s,y(Tn,{nodesStore:e,onNodesChange:r,connectionsStore:t,onConnectionsChange:o,viewportSignal:n,onViewportChange:i,defaultNode:To,components:{"node-toolbar":lo,"connection-toolbar":ao,"fields-node":Eo,"function-node":No,"task-node":Oo},children:l=>[y(Wn,{kit:l,type:"dash"}),y(io,{kit:l}),y(Jn,{kit:l}),y($o,{kit:l})]})),s})()},To={width:150,height:60};Dt(()=>y(Io,{}),document.getElementById("root"));
